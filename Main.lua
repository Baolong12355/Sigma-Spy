--[[
	⣿⣿⣿⣿⣿ SIGMA SPY ⣿⣿⣿⣿⣿
	⣿⣿⣯⡉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉
	⠉⠻⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠈⠻⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠙⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠀⠀⣉⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⣠⣾⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⢀⣴⣿⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣀⣴⣿⣿⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣿⣿⣟⣁⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀
	⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿

	@author depso (depthso)
	@repo https://github.com/depthso
	@license MIT
	@description Sigma Remote Spy for Roblox
    
	This file is COMPILED, check /src folder for the source
	Build scripts are available in /build
]]

local a,b={UseWorkspace=false,NoActors=false,FolderName='Sigma Spy',RepoUrl=
[[https://raw.githubusercontent.com/depthso/Sigma-Spy/refs/heads/main]],
ParserUrl=
[[https://raw.githubusercontent.com/depthso/Roblox-parser/refs/heads/main/dist/Main.luau]]
},{...}local c=b[1]if typeof(c)=='table'then for d,e in c do a[d]=e end end
local d=setmetatable({},{__index=function(d,e)local f=game:GetService(e)return
cloneref(f)end})local e=(function()local e,f={UseWorkspace=false,Folder=
'Sigma spy',RepoUrl=nil,FolderStructure={['Sigma Spy']={'assets'}}}function e:
Init(g)local h,i=self.FolderStructure,g.Services f=i.HttpService self:
CheckFolders(h)end function e:PushConfig(g)for h,i in next,g do self[h]=i end
end function e:UrlFetch(g)local h={Url=g:gsub(' ','%%20'),Method='GET'}local i,j
=pcall(request,h)if not i then warn'[!] HTTP request error! Check console (F9)'
warn('> Url:',g)error(j)return''end local k,l=j.Body,j.StatusCode if l==404 then
warn'[!] The file requested has moved or been deleted.'warn(' >',g)return''end
return k,j end function e:MakePath(g)local h=self.Folder return`{h}/{g}`end
function e:LoadCustomasset(g)if not getcustomasset then return end if not g then
return end local h=readfile(g)if#h<=0 then return end local i,j=pcall(
getcustomasset,g)if not i then return end if not j or#j<=0 then return end
return j end function e:GetFile(g,h)local i,j,k,l=self.RepoUrl,self.UseWorkspace
,self:MakePath(g),''if j then l=readfile(k)else l=self:UrlFetch(`{i}/{g}`)end if
h then self:FileCheck(k,function()return l end)return self:LoadCustomasset(k)end
return l end function e:GetTemplate(g)return self:GetFile(`templates/{g}.lua`)
end function e:FileCheck(g,h)if isfile(g)then return end local i=h()writefile(g,
i)end function e:FolderCheck(g)if isfolder(g)then return end makefolder(g)end
function e:CheckPath(g,h)return g and`{g}/{h}`or h end function e:CheckFolders(g
,h)for i,j in next,g do if typeof(j)=='table'then local k=self:CheckPath(h,i)
self:FolderCheck(k)self:CheckFolders(j,k)continue end local k=self:CheckPath(h,j
)self:FolderCheck(k)end end function e:TemplateCheck(g,h)self:FileCheck(g,
function()return self:GetTemplate(h)end)end function e:GetAsset(g,h)return self:
GetFile(`assets/{g}`,h)end function e:GetModule(g,h)local i=`{g}.lua`if h then
self:TemplateCheck(i,h)local j=readfile(i)local k=loadstring(j)if k then return
j end return self:GetTemplate(h)end return self:GetFile(i)end function e:
LoadLibraries(g,...)local h={}for i,j in next,g do local k=typeof(j)=='table'and
j[1]=='base64'j=k and j[2]or j if typeof(j)~='string'and not k then h[i]=j
continue end if k then j=crypt.base64decode(j)g[i]=j end local l,m=loadstring(j,
i)assert(l,`Failed to load {i}: {m}`)h[i]=l(...)end return h end function e:
LoadModules(g,h)for i,j in next,g do local k=j.Init if not k then continue end j
:Init(h)end end function e:CreateFont(g,h)if not h then return end local i=`assets/{
g}.json`local j,k=self:MakePath(i),{name=g,faces={{name='Regular',weight=400,
style='Normal',assetId=h}}}local l=f:JSONEncode(k)writefile(j,l)return j end
function e:CompileModule(g)local h='local Libraries = {'for i,j in g do if
typeof(j)~='string'then continue end h..=`\t{i} = (function()\n{j}\nend)(),\n`
end h..='}'return h end function e:MakeActorScript(g,h)local i=e:CompileModule(g
)i..='\r\n\tlocal ExtraData = {\r\n\t\tIsActor = true\r\n\t}\r\n\t'i..=`Libraries.Hook:BeginService(Libraries, ExtraData, {
h})`return i end return e end)()e:PushConfig(a)e:Init{Services=d}local f=e.
FolderName local g,h={Config=e:GetModule(`{f}/Config`,'Config'),ReturnSpoofs=e:
GetModule(`{f}/Return spoofs`,'Return Spoofs'),Configuration=a,Files=e,Process={
'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KICAgIE5vQmFja3RyYWNlOiBib29sZWFuPywNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCUFyZ3M6IHRhYmxlLA0KICAgIElkOiBzdHJpbmcsDQoJTWV0aG9kOiBzdHJpbmcsDQogICAgVHJhbnNmZXJUeXBlOiBzdHJpbmcsDQoJVmFsdWVSZXBsYWNlbWVudHM6IHRhYmxlLA0KICAgIFJldHVyblZhbHVlczogdGFibGUsDQogICAgT3JpZ2luYWxGdW5jOiAoSW5zdGFuY2UsIC4uLmFueSkgLT4gLi4uYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBQcm9jZXNzID0gew0KICAgIC0tLy8gUmVtb3RlIGNsYXNzZXMNCiAgICBSZW1vdGVDbGFzc0RhdGEgPSB7DQogICAgICAgIFsiUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJSZW1vdGVGdW5jdGlvbiJdID0gew0KICAgICAgICAgICAgSXNSZW1vdGVGdW5jdGlvbiA9IHRydWUsDQogICAgICAgICAgICBTZW5kID0gew0KICAgICAgICAgICAgICAgICJJbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJpbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50SW52b2tlIiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJVbnJlbGlhYmxlUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJCaW5kYWJsZUV2ZW50Il0gPSB7DQogICAgICAgICAgICBOb1JlY2l2ZUhvb2sgPSB0cnVlLA0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiRXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIkJpbmRhYmxlRnVuY3Rpb24iXSA9IHsNCiAgICAgICAgICAgIElzUmVtb3RlRnVuY3Rpb24gPSB0cnVlLA0KICAgICAgICAgICAgTm9SZWNpdmVIb29rID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiT25JbnZva2UiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBSZW1vdGVPcHRpb25zID0ge30sDQogICAgTG9vcGluZ1JlbW90ZXMgPSB7fSwNCiAgICBDb25maWdPdmVyd3JpdGVzID0gew0KICAgICAgICBbeyJzaXJodXJ0IiwgInBvdGFzc2l1bSIsICJ3YXZlIn1dID0gew0KICAgICAgICAgICAgRm9yY2VVc2VDdXN0b21Db21tID0gdHJ1ZQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIEhvb2sNCmxvY2FsIENvbW11bmljYXRpb24NCmxvY2FsIFJldHVyblNwb29mcw0KbG9jYWwgVWkNCmxvY2FsIENvbmZpZw0KDQotLS8vIENvbW11bmljYXRpb24gY2hhbm5lbA0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ2hhbm5lbFdyYXBwZWQgPSBmYWxzZQ0KDQpsb2NhbCBTaWdtYUVOViA9IGdldGZlbnYoMSkNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGUpDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQogICAgLS0vLyBNb2R1bGVzDQogICAgQ29uZmlnID0gTW9kdWxlcy5Db25maWcNCiAgICBVaSA9IE1vZHVsZXMuVWkNCiAgICBIb29rID0gTW9kdWxlcy5Ib29rDQogICAgQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbg0KICAgIFJldHVyblNwb29mcyA9IE1vZHVsZXMuUmV0dXJuU3Bvb2ZzDQplbmQNCg0KLS0vLyBDb21tdW5pY2F0aW9uDQpmdW5jdGlvbiBQcm9jZXNzOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogQmluZGFibGVFdmVudCwgSXNXcmFwcGVkOiBib29sZWFuKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQogICAgQ2hhbm5lbFdyYXBwZWQgPSBJc1dyYXBwZWQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldENvbmZpZ092ZXJ3cml0ZXMoTmFtZTogc3RyaW5nKQ0KICAgIGxvY2FsIENvbmZpZ092ZXJ3cml0ZXMgPSBzZWxmLkNvbmZpZ092ZXJ3cml0ZXMNCg0KICAgIGZvciBMaXN0LCBPdmVyd3JpdGVzIGluIG5leHQsIENvbmZpZ092ZXJ3cml0ZXMgZG8NCiAgICAgICAgaWYgbm90IHRhYmxlLmZpbmQoTGlzdCwgTmFtZSkgdGhlbiBjb250aW51ZSBlbmQNCiAgICAgICAgcmV0dXJuIE92ZXJ3cml0ZXMNCiAgICBlbmQNCiAgICByZXR1cm4NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrQ29uZmlnKENvbmZpZzogdGFibGUpDQogICAgbG9jYWwgTmFtZSA9IGlkZW50aWZ5ZXhlY3V0b3IoKTpsb3dlcigpDQoNCiAgICAtLS8vIEZvcmNlIGNvbmZpZ3VyYXRpb24gb3ZlcndyaXRlcyBmb3Igc3BlY2lmaWMgZXhlY3V0b3JzDQogICAgbG9jYWwgT3ZlcndyaXRlcyA9IHNlbGY6R2V0Q29uZmlnT3ZlcndyaXRlcyhOYW1lKQ0KICAgIGlmIG5vdCBPdmVyd3JpdGVzIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgTWVyZ2UoQ29uZmlnLCBPdmVyd3JpdGVzKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2xlYW5DRXJyb3IoRXJyb3I6IHN0cmluZyk6IHN0cmluZw0KICAgIEVycm9yID0gRXJyb3I6Z3N1YigiOiVkKzogIiwgIiIpDQogICAgRXJyb3IgPSBFcnJvcjpnc3ViKCIsIGdvdCAlYSsiLCAiIikNCiAgICBFcnJvciA9IEVycm9yOmdzdWIoImludmFsaWQgYXJndW1lbnQiLCAibWlzc2luZyBhcmd1bWVudCIpDQogICAgcmV0dXJuIEVycm9yDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDb3VudE1hdGNoZXMoU3RyaW5nOiBzdHJpbmcsIE1hdGNoOiBzdHJpbmcpOiBudW1iZXINCglsb2NhbCBDb3VudCA9IDANCglmb3IgXyBpbiBTdHJpbmc6Z21hdGNoKE1hdGNoKSBkbw0KCQlDb3VudCArPTEgDQoJZW5kDQoNCglyZXR1cm4gQ291bnQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKFRhYmxlLCBJZ25vcmU6IHRhYmxlPykNCglsb2NhbCBOZXcgPSB7fQ0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRhYmxlIGRvDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHZhbHVlIGlzIGlnbm9yZWQNCiAgICAgICAgaWYgSWdub3JlIGFuZCB0YWJsZS5maW5kKElnbm9yZSwgVmFsdWUpIHRoZW4gY29udGludWUgZW5kDQoNCgkJTmV3W0tleV0gPSB0eXBlb2YoVmFsdWUpID09ICJ0YWJsZSIgYW5kIHNlbGY6RGVlcENsb25lVGFibGUoVmFsdWUpIG9yIFZhbHVlDQoJZW5kDQoJcmV0dXJuIE5ldw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VW5wYWNrKFRhYmxlOiB0YWJsZSkNCglsb2NhbCBMZW5ndGggPSB0YWJsZS5tYXhuKFRhYmxlKQ0KCXJldHVybiB1bnBhY2soVGFibGUsIDEsIExlbmd0aCkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlB1c2hDb25maWcoT3ZlcndyaXRlcykNCiAgICBNZXJnZShzZWxmLCBPdmVyd3JpdGVzKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RnVuY0V4aXN0cyhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIGdldGZlbnYoMSlbTmFtZV0NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrRXhlY3V0b3IoKTogYm9vbGVhbg0KICAgIGxvY2FsIEJsYWNrbGlzdGVkID0gew0KICAgICAgICAieGVubyIsDQogICAgICAgICJzb2xhcmEiLA0KICAgICAgICAiampzcGxvaXQiDQogICAgfQ0KDQogICAgbG9jYWwgTmFtZSA9IGlkZW50aWZ5ZXhlY3V0b3IoKTpsb3dlcigpDQogICAgbG9jYWwgSXNCbGFja2xpc3RlZCA9IHRhYmxlLmZpbmQoQmxhY2tsaXN0ZWQsIE5hbWUpDQoNCiAgICAtLS8vIFNvbWUgZXhlY3V0b3JzIGhhdmUgYnJva2VuIGZ1bmN0aW9uYWxpdHkNCiAgICBpZiBJc0JsYWNrbGlzdGVkIHRoZW4NCiAgICAgICAgVWk6U2hvd1Vuc3VwcG9ydGVkRXhlY3V0b3IoTmFtZSkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tGdW5jdGlvbnMoKTogYm9vbGVhbg0KICAgIGxvY2FsIENvcmVGdW5jdGlvbnMgPSB7DQogICAgICAgICJob29rbWV0YW1ldGhvZCIsDQogICAgICAgICJob29rZnVuY3Rpb24iLA0KICAgICAgICAiZ2V0cmF3bWV0YXRhYmxlIiwNCiAgICAgICAgInNldHJlYWRvbmx5Ig0KICAgIH0NCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGZ1bmN0aW9ucyBleGlzdCBpbiB0aGUgRU5WDQogICAgZm9yIF8sIE5hbWUgaW4gQ29yZUZ1bmN0aW9ucyBkbw0KICAgICAgICBsb2NhbCBGdW5jID0gc2VsZjpGdW5jRXhpc3RzKE5hbWUpDQogICAgICAgIGlmIEZ1bmMgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICAtLS8vIEZ1bmN0aW9uIG1pc3NpbmchDQogICAgICAgIFVpOlNob3dVbnN1cHBvcnRlZChOYW1lKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0lzU3VwcG9ydGVkKCk6IGJvb2xlYW4NCiAgICAtLS8vIENoZWNrIGlmIHRoZSBleGVjdXRvciBpcyBibGFja2xpc3RlZA0KICAgIGxvY2FsIEV4ZWN1dG9yU3VwcG9ydGVkID0gc2VsZjpDaGVja0V4ZWN1dG9yKCkNCiAgICBpZiBub3QgRXhlY3V0b3JTdXBwb3J0ZWQgdGhlbg0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGNvcmUgZnVuY3Rpb25zIGV4aXN0DQogICAgbG9jYWwgRnVuY3Rpb25zU3VwcG9ydGVkID0gc2VsZjpDaGVja0Z1bmN0aW9ucygpDQogICAgaWYgbm90IEZ1bmN0aW9uc1N1cHBvcnRlZCB0aGVuDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldENsYXNzRGF0YShSZW1vdGU6IEluc3RhbmNlKTogdGFibGU/DQogICAgbG9jYWwgUmVtb3RlQ2xhc3NEYXRhID0gc2VsZi5SZW1vdGVDbGFzc0RhdGENCiAgICBsb2NhbCBDbGFzc05hbWUgPSBIb29rOkluZGV4KFJlbW90ZSwgIkNsYXNzTmFtZSIpDQoNCiAgICByZXR1cm4gUmVtb3RlQ2xhc3NEYXRhW0NsYXNzTmFtZV0NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOklzUHJvdGVjdGVkUmVtb3RlKFJlbW90ZTogSW5zdGFuY2UpOiBib29sZWFuDQogICAgbG9jYWwgSXNEZWJ1ZyA9IFJlbW90ZSA9PSBDb21tdW5pY2F0aW9uLkRlYnVnSWRSZW1vdGUNCiAgICBsb2NhbCBJc0NoYW5uZWwgPSBSZW1vdGUgPT0gKENoYW5uZWxXcmFwcGVkIGFuZCBDaGFubmVsLkNoYW5uZWwgb3IgQ2hhbm5lbCkNCg0KICAgIHJldHVybiBJc0RlYnVnIG9yIElzQ2hhbm5lbA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6UmVtb3RlQWxsb3dlZChSZW1vdGU6IEluc3RhbmNlLCBUcmFuc2ZlclR5cGU6IHN0cmluZywgTWV0aG9kOiBzdHJpbmc/KTogYm9vbGVhbj8NCiAgICBpZiB0eXBlb2YoUmVtb3RlKSB+PSAnSW5zdGFuY2UnIHRoZW4gcmV0dXJuIGVuZA0KICAgIA0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIFJlbW90ZSBpcyBwcm90ZWN0ZWQNCiAgICBpZiBzZWxmOklzUHJvdGVjdGVkUmVtb3RlKFJlbW90ZSkgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIEZldGNoIGNsYXNzIHRhYmxlDQoJbG9jYWwgQ2xhc3NEYXRhID0gc2VsZjpHZXRDbGFzc0RhdGEoUmVtb3RlKQ0KCWlmIG5vdCBDbGFzc0RhdGEgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSB0cmFuc2ZlciB0eXBlIGhhcyBkYXRhDQoJbG9jYWwgQWxsb3dlZCA9IENsYXNzRGF0YVtUcmFuc2ZlclR5cGVdDQoJaWYgbm90IEFsbG93ZWQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBtZXRob2QgaXMgYWxsb3dlZA0KCWlmIE1ldGhvZCB0aGVuDQoJCXJldHVybiB0YWJsZS5maW5kKEFsbG93ZWQsIE1ldGhvZCkgfj0gbmlsDQoJZW5kDQoNCglyZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0RXh0cmFEYXRhKERhdGE6IHRhYmxlKQ0KICAgIGlmIG5vdCBEYXRhIHRoZW4gcmV0dXJuIGVuZA0KICAgIHNlbGYuRXh0cmFEYXRhID0gRGF0YQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0UmVtb3RlU3Bvb2YoUmVtb3RlOiBJbnN0YW5jZSwgTWV0aG9kOiBzdHJpbmcsIC4uLik6IHRhYmxlPw0KICAgIGxvY2FsIFNwb29mID0gUmV0dXJuU3Bvb2ZzW1JlbW90ZV0NCg0KICAgIGlmIG5vdCBTcG9vZiB0aGVuIHJldHVybiBlbmQNCiAgICBpZiBTcG9vZi5NZXRob2Qgfj0gTWV0aG9kIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gU3Bvb2YuUmV0dXJuDQoNCiAgICAtLS8vIENhbGwgdGhlIFJldHVyblZhbHVlcyBmdW5jdGlvbiB0eXBlDQogICAgaWYgdHlwZW9mKFJldHVyblZhbHVlcykgPT0gImZ1bmN0aW9uIiB0aGVuDQogICAgICAgIFJldHVyblZhbHVlcyA9IFJldHVyblZhbHVlcyguLi4pDQogICAgZW5kDQoNCglyZXR1cm4gUmV0dXJuVmFsdWVzDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpTZXROZXdSZXR1cm5TcG9vZnMoTmV3UmV0dXJuU3Bvb2ZzOiB0YWJsZSkNCiAgICBSZXR1cm5TcG9vZnMgPSBOZXdSZXR1cm5TcG9vZnMNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkZpbmRDYWxsaW5nTENsb3N1cmUoT2Zmc2V0OiBudW1iZXIpDQogICAgbG9jYWwgR2V0ZmVudiA9IEhvb2s6R2V0T3JpZ2luYWxGdW5jKGdldGZlbnYpDQogICAgT2Zmc2V0ICs9IDENCg0KICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgT2Zmc2V0ICs9IDENCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSBzdGFjayBsZXZlbCBpcyB2YWxpZA0KICAgICAgICBsb2NhbCBJc1ZhbGlkID0gZGVidWcuaW5mbyhPZmZzZXQsICJsIikgfj0gLTENCiAgICAgICAgaWYgbm90IElzVmFsaWQgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSBmdW5jdGlvbiBpcyB2YWxpZA0KICAgICAgICBsb2NhbCBGdW5jdGlvbiA9IGRlYnVnLmluZm8oT2Zmc2V0LCAiZiIpDQogICAgICAgIGlmIG5vdCBGdW5jdGlvbiB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgaWYgR2V0ZmVudihGdW5jdGlvbikgPT0gU2lnbWFFTlYgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICByZXR1cm4gRnVuY3Rpb24NCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkRlY29tcGlsZShTY3JpcHQ6IExvY2FsU2NyaXB0IHwgTW9kdWxlU2NyaXB0KTogc3RyaW5nDQogICAgbG9jYWwgS29uc3RhbnRBUEkgPSAiaHR0cDovL2FwaS5wbHVzZ2lhbnQ1LmNvbS9rb25zdGFudC9kZWNvbXBpbGUiDQogICAgbG9jYWwgRm9yY2VLb25zdGFudCA9IENvbmZpZy5Gb3JjZUtvbnN0YW50RGVjb21waWxlcg0KDQogICAgLS0vLyBVc2UgYnVpbHQtaW4gZGVjb21waWxlciBpZiB0aGUgZXhlY3V0b3Igc3VwcG9ydHMgaXQNCiAgICBpZiBkZWNvbXBpbGUgYW5kIG5vdCBGb3JjZUtvbnN0YW50IHRoZW4gDQogICAgICAgIHJldHVybiBkZWNvbXBpbGUoU2NyaXB0KQ0KICAgIGVuZA0KDQogICAgLS0vLyBnZXRzY3JpcHRieXRlY29kZQ0KICAgIGxvY2FsIFN1Y2Nlc3MsIEJ5dGVjb2RlID0gcGNhbGwoZ2V0c2NyaXB0Ynl0ZWNvZGUsIFNjcmlwdCkNCiAgICBpZiBub3QgU3VjY2VzcyB0aGVuDQogICAgICAgIGxvY2FsIEVycm9yID0gYC0tRmFpbGVkIHRvIGdldCBzY3JpcHQgYnl0ZWNvZGUsIGVycm9yOlxuYA0KICAgICAgICBFcnJvciAuLj0gYFxuLS1bW1xue0J5dGVjb2RlfVxuXV1gDQogICAgICAgIHJldHVybiBFcnJvciwgdHJ1ZQ0KICAgIGVuZA0KICAgIA0KICAgIC0tLy8gU2VuZCBQT1NUIHJlcXVlc3QgdG8gdGhlIEFQSQ0KICAgIGxvY2FsIFJlc3BvbmNlID0gcmVxdWVzdCh7DQogICAgICAgIFVybCA9IEtvbnN0YW50QVBJLA0KICAgICAgICBCb2R5ID0gQnl0ZWNvZGUsDQogICAgICAgIE1ldGhvZCA9ICJQT1NUIiwNCiAgICAgICAgSGVhZGVycyA9IHsNCiAgICAgICAgICAgIFsiQ29udGVudC1UeXBlIl0gPSAidGV4dC9wbGFpbiINCiAgICAgICAgfSwNCiAgICB9KQ0KDQogICAgLS0vLyBFcnJvciBjaGVjaw0KICAgIGlmIFJlc3BvbmNlLlN0YXR1c0NvZGUgfj0gMjAwIHRoZW4NCiAgICAgICAgbG9jYWwgRXJyb3IgPSBgLS1bS09OU1RBTlRdIEVycm9yIG9jY3VyZWQgd2hpbGUgcmVxdWVzdGluZyB0aGUgQVBJLCBlcnJvcjpcbmANCiAgICAgICAgRXJyb3IgLi49IGBcbi0tW1tcbntSZXNwb25jZS5Cb2R5fVxuXV1gDQogICAgICAgIHJldHVybiBFcnJvciwgdHJ1ZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIFJlc3BvbmNlLkJvZHkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldFNjcmlwdEZyb21GdW5jKEZ1bmM6ICguLi5hbnkpIC0+IC4uLmFueSkNCiAgICBpZiBub3QgRnVuYyB0aGVuIHJldHVybiBlbmQNCg0KICAgIGxvY2FsIFN1Y2Nlc3MsIEVOViA9IHBjYWxsKGdldGZlbnYsIEZ1bmMpDQogICAgaWYgbm90IFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQogICAgDQogICAgLS0vLyBCbGFja2xpc3Qgc2lnbWEgc3B5DQogICAgaWYgc2VsZjpJc1NpZ21hU3B5RU5WKEVOVikgdGhlbiByZXR1cm4gZW5kDQoNCiAgICByZXR1cm4gcmF3Z2V0KEVOViwgInNjcmlwdCIpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDb25uZWN0aW9uSXNWYWxpZChDb25uZWN0aW9uOiB0YWJsZSk6IGJvb2xlYW4NCiAgICBsb2NhbCBWYWx1ZVJlcGxhY2VtZW50cyA9IHsNCgkJWyJTY3JpcHQiXSA9IGZ1bmN0aW9uKENvbm5lY3Rpb246IHRhYmxlKTogU2NyaXB0Pw0KCQkJbG9jYWwgRnVuY3Rpb24gPSBDb25uZWN0aW9uLkZ1bmN0aW9uDQoJCQlpZiBub3QgRnVuY3Rpb24gdGhlbiByZXR1cm4gZW5kDQoNCgkJCXJldHVybiBzZWxmOkdldFNjcmlwdEZyb21GdW5jKEZ1bmN0aW9uKQ0KCQllbmQNCgl9DQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZXNlIHByb3BlcnRpZXMgYXJlIHZhbGlkDQogICAgbG9jYWwgVG9DaGVjayA9IHsNCiAgICAgICAgIlNjcmlwdCINCiAgICB9DQogICAgZm9yIF8sIFByb3BlcnR5IGluIFRvQ2hlY2sgZG8NCiAgICAgICAgbG9jYWwgUmVwbGFjZW1lbnQgPSBWYWx1ZVJlcGxhY2VtZW50c1tQcm9wZXJ0eV0NCiAgICAgICAgbG9jYWwgVmFsdWUNCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZXJlJ3MgYSBmdW5jdGlvbiBmb3IgYSBwcm9wZXJ0eQ0KICAgICAgICBpZiBSZXBsYWNlbWVudCB0aGVuDQogICAgICAgICAgICBWYWx1ZSA9IFJlcGxhY2VtZW50KENvbm5lY3Rpb24pDQogICAgICAgIGVuZA0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHByb3BlcnR5IGhhcyBhIHZhbHVlDQogICAgICAgIGlmIFZhbHVlID09IG5pbCB0aGVuIA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlIA0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpGaWx0ZXJDb25uZWN0aW9ucyhTaWduYWw6IFJCWFNjcmlwdFNpZ25hbCk6IHRhYmxlDQogICAgbG9jYWwgUHJvY2Vzc2VkID0ge30NCg0KICAgIC0tLy8gRmlsdGVyIGVhY2ggY29ubmVjdGlvbg0KICAgIGZvciBfLCBDb25uZWN0aW9uIGluIGdldGNvbm5lY3Rpb25zKFNpZ25hbCkgZG8NCiAgICAgICAgaWYgbm90IHNlbGY6Q29ubmVjdGlvbklzVmFsaWQoQ29ubmVjdGlvbikgdGhlbiBjb250aW51ZSBlbmQNCiAgICAgICAgdGFibGUuaW5zZXJ0KFByb2Nlc3NlZCwgQ29ubmVjdGlvbikNCiAgICBlbmQNCg0KICAgIHJldHVybiBQcm9jZXNzZWQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOklzU2lnbWFTcHlFTlYoRW52OiB0YWJsZSk6IGJvb2xlYW4NCiAgICByZXR1cm4gRW52ID09IFNpZ21hRU5WDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KDQogICAgLS0vLyBDaGVjayBmb3IgZXhpc3RpbmcgcmVtb3RlIGRhdGENCglsb2NhbCBFeGlzdGluZyA9IFJlbW90ZU9wdGlvbnNbSWRdDQoJaWYgRXhpc3RpbmcgdGhlbiByZXR1cm4gRXhpc3RpbmcgZW5kDQoJDQogICAgLS0vLyBCYXNlIHJlbW90ZSBkYXRhDQoJbG9jYWwgRGF0YSA9IHsNCgkJRXhjbHVkZWQgPSBmYWxzZSwNCgkJQmxvY2tlZCA9IGZhbHNlDQoJfQ0KDQoJUmVtb3RlT3B0aW9uc1tJZF0gPSBEYXRhDQoJcmV0dXJuIERhdGENCmVuZA0KDQpsb2NhbCBQcm9jZXNzQ2FsbGJhY2sgPSBuZXdjY2xvc3VyZShmdW5jdGlvbihEYXRhOiBSZW1vdGVEYXRhLCAuLi4pOiB0YWJsZT8NCiAgICAtLS8vIFVucGFjayBEYXRhDQogICAgbG9jYWwgT3JpZ2luYWxGdW5jID0gRGF0YS5PcmlnaW5hbEZ1bmMNCiAgICBsb2NhbCBJZCA9IERhdGEuSWQNCiAgICBsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KICAgIGxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoNCiAgICBsb2NhbCBSZW1vdGVEYXRhID0gUHJvY2VzczpHZXRSZW1vdGVEYXRhKElkKQ0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgUmVtb3RlIGlzIEJsb2NrZWQNCiAgICBpZiBSZW1vdGVEYXRhLkJsb2NrZWQgdGhlbiByZXR1cm4ge30gZW5kDQoNCiAgICAtLS8vIENoZWNrIGZvciBhIHNwb29mDQogICAgbG9jYWwgU3Bvb2YgPSBQcm9jZXNzOkdldFJlbW90ZVNwb29mKFJlbW90ZSwgTWV0aG9kLCBPcmlnaW5hbEZ1bmMsIC4uLikNCiAgICBpZiBTcG9vZiB0aGVuIHJldHVybiBTcG9vZiBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIG9yaWduYWwgZnVuY3Rpb24gd2FzIHBhc3NlZA0KICAgIGlmIG5vdCBPcmlnaW5hbEZ1bmMgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIEludm9rZSBvcmlnbmFsIGZ1bmN0aW9uDQogICAgcmV0dXJuIHsNCiAgICAgICAgT3JpZ2luYWxGdW5jKFJlbW90ZSwgLi4uKQ0KICAgIH0NCmVuZCkNCg0KZnVuY3Rpb24gUHJvY2VzczpQcm9jZXNzUmVtb3RlKERhdGE6IFJlbW90ZURhdGEsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCiAgICBsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQogICAgbG9jYWwgVHJhbnNmZXJUeXBlID0gRGF0YS5UcmFuc2ZlclR5cGUNCiAgICBsb2NhbCBJc1JlY2VpdmUgPSBEYXRhLklzUmVjZWl2ZQ0KDQoJLS0vLyBDaGVjayBpZiB0aGUgdHJhbnNmZXJ0eXBlIG1ldGhvZCBpcyBhbGxvd2VkDQoJaWYgVHJhbnNmZXJUeXBlIGFuZCBub3Qgc2VsZjpSZW1vdGVBbGxvd2VkKFJlbW90ZSwgVHJhbnNmZXJUeXBlLCBNZXRob2QpIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBGZXRjaCBkZXRhaWxzDQogICAgbG9jYWwgSWQgPSBDb21tdW5pY2F0aW9uOkdldERlYnVnSWQoUmVtb3RlKQ0KICAgIGxvY2FsIENsYXNzRGF0YSA9IHNlbGY6R2V0Q2xhc3NEYXRhKFJlbW90ZSkNCiAgICBsb2NhbCBUaW1lc3RhbXAgPSB0aWNrKCkNCg0KICAgIGxvY2FsIENhbGxpbmdGdW5jdGlvbg0KICAgIGxvY2FsIFNvdXJjZVNjcmlwdA0KDQogICAgLS0vLyBBZGQgZXh0cmEgZGF0YSBpbnRvIHRoZSBsb2cgaWYgbmVlZGVkDQogICAgbG9jYWwgRXh0cmFEYXRhID0gc2VsZi5FeHRyYURhdGENCiAgICBpZiBFeHRyYURhdGEgdGhlbg0KICAgICAgICBNZXJnZShEYXRhLCBFeHRyYURhdGEpDQogICAgZW5kDQoNCiAgICAtLS8vIEdldCBjYWxsZXIgaW5mb3JtYXRpb24NCiAgICBpZiBub3QgSXNSZWNlaXZlIHRoZW4NCiAgICAgICAgQ2FsbGluZ0Z1bmN0aW9uID0gc2VsZjpGaW5kQ2FsbGluZ0xDbG9zdXJlKDYpDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IENhbGxpbmdGdW5jdGlvbiBhbmQgc2VsZjpHZXRTY3JpcHRGcm9tRnVuYyhDYWxsaW5nRnVuY3Rpb24pIG9yIG5pbA0KICAgIGVuZA0KDQogICAgLS0vLyBBZGQgdG8gcXVldWUNCiAgICBNZXJnZShEYXRhLCB7DQoJCUNhbGxpbmdTY3JpcHQgPSBnZXRjYWxsaW5nc2NyaXB0KCksDQogICAgICAgIENhbGxpbmdGdW5jdGlvbiA9IENhbGxpbmdGdW5jdGlvbiwNCiAgICAgICAgU291cmNlU2NyaXB0ID0gU291cmNlU2NyaXB0LA0KICAgICAgICBJZCA9IElkLA0KCQlDbGFzc0RhdGEgPSBDbGFzc0RhdGEsDQogICAgICAgIFRpbWVzdGFtcCA9IFRpbWVzdGFtcCwNCiAgICAgICAgQXJncyA9IHsuLi59DQogICAgfSkNCg0KICAgIC0tLy8gSW52b2tlIHRoZSBSZW1vdGUgYW5kIGxvZyByZXR1cm4gdmFsdWVzDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gUHJvY2Vzc0NhbGxiYWNrKERhdGEsIC4uLikNCiAgICBEYXRhLlJldHVyblZhbHVlcyA9IFJldHVyblZhbHVlcw0KDQogICAgLS0vLyBRdWV1ZSBsb2cNCiAgICBDb21tdW5pY2F0aW9uOlF1ZXVlTG9nKERhdGEpDQoNCiAgICByZXR1cm4gUmV0dXJuVmFsdWVzDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpTZXRBbGxSZW1vdGVEYXRhKEtleTogc3RyaW5nLCBWYWx1ZSkNCiAgICBsb2NhbCBSZW1vdGVPcHRpb25zID0gc2VsZi5SZW1vdGVPcHRpb25zDQoJZm9yIFJlbW90ZUlELCBEYXRhIGluIG5leHQsIFJlbW90ZU9wdGlvbnMgZG8NCgkJRGF0YVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQotLS8vIFRoZSBjb21tdW5pY2F0aW9uIGNyZWF0ZXMgYSBkaWZmZXJlbnQgdGFibGUgYWRkcmVzcw0KLS0vLyBSZWNpdmVkIHRhYmxlcyB3aWxsIG5vdCBiZSB0aGUgc2FtZQ0KZnVuY3Rpb24gUHJvY2VzczpTZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcsIFJlbW90ZURhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCiAgICBSZW1vdGVPcHRpb25zW0lkXSA9IFJlbW90ZURhdGENCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlVwZGF0ZVJlbW90ZURhdGEoSWQ6IHN0cmluZywgUmVtb3RlRGF0YTogdGFibGUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiUmVtb3RlRGF0YSIsIElkLCBSZW1vdGVEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VXBkYXRlQWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiQWxsUmVtb3RlRGF0YSIsIEtleSwgVmFsdWUpDQplbmQNCg0KcmV0dXJuIFByb2Nlc3M=]]
},Hook={'base64',
[[LS1bWw0KDQoJVGFraW5nIG15IG1ldGhvZHMg8J+SlvCfkpYNCglJIGxvdmUgYSBwYXN0ZXIgYW5kIGEgc2tpZCwgcHV0cyBkaXNndXN0IGluIG15IGZhY2UNCg0KXV0NCg0KbG9jYWwgSG9vayA9IHsNCglPcmlnaW5hbE5hbWVjYWxsID0gbmlsLA0KCU9yaWdpbmFsSW5kZXggPSBuaWwsDQoJUHJldmlvdXNGdW5jdGlvbnMgPSB7fQ0KfQ0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBNZXRhRnVuYyA9IChJbnN0YW5jZSwgLi4uYW55KSAtPiAuLi5hbnkNCnR5cGUgVW5rRnVuYyA9ICguLi5hbnkpIC0+IC4uLmFueQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIE1vZHVsZXMNCmxvY2FsIFByb2Nlc3MNCmxvY2FsIENvbmZpZ3VyYXRpb24NCmxvY2FsIENvbmZpZw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KDQpsb2NhbCBFeGVFTlYgPSBnZXRmZW52KDEpDQoNCmZ1bmN0aW9uIEhvb2s6SW5pdChEYXRhKQ0KICAgIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCg0KCVByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCglDb21tdW5pY2F0aW9uID0gTW9kdWxlcy5Db21tdW5pY2F0aW9uIG9yIENvbW11bmljYXRpb24NCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCglDb25maWd1cmF0aW9uID0gTW9kdWxlcy5Db25maWd1cmF0aW9uIG9yIENvbmZpZ3VyYXRpb24NCmVuZA0KDQotLS8vIFRoZSBjYWxsYmFjayBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBuaWwgdmFsdWUgc29tZXRpbWVzIHdoaWNoIHNob3VsZCBiZSBpbmdvcmVkDQpsb2NhbCBIb29rTWlkZGxlID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgQWx3YXlzVGFibGU6IGJvb2xlYW4/LCAuLi4pDQoJLS0vLyBJbnZva2UgY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBhIHJlcG9uY2Ugb3RoZXJ3aXNlIGlnbm9yZWQNCglsb2NhbCBSZXR1cm5WYWx1ZXMgPSBDYWxsYmFjayguLi4pDQoJaWYgUmV0dXJuVmFsdWVzIHRoZW4NCgkJcmV0dXJuIFByb2Nlc3M6VW5wYWNrKFJldHVyblZhbHVlcykNCgllbmQNCg0KCS0tLy8gSW52b2tlIG9yaWduYWwgZnVuY3Rpb24NCglpZiBBbHdheXNUYWJsZSB0aGVuDQoJCXJldHVybiB7T3JpZ2luYWxGdW5jKC4uLil9DQoJZW5kDQoJcmV0dXJuIE9yaWdpbmFsRnVuYyguLi4pDQplbmQpDQoNCmxvY2FsIGZ1bmN0aW9uIE1lcmdlKEJhc2U6IHRhYmxlLCBOZXc6IHRhYmxlKQ0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIE5ldyBkbw0KCQlCYXNlW0tleV0gPSBWYWx1ZQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SW5kZXgoT2JqZWN0OiBJbnN0YW5jZSwgS2V5OiBzdHJpbmcpDQoJcmV0dXJuIE9iamVjdFtLZXldDQplbmQNCg0KZnVuY3Rpb24gSG9vazpQdXNoQ29uZmlnKE92ZXJ3cml0ZXMpDQogICAgTWVyZ2Uoc2VsZiwgT3ZlcndyaXRlcykNCmVuZA0KDQotLS8vIGdldHJhd21ldGF0YWJsZQ0KZnVuY3Rpb24gSG9vazpSZXBsYWNlTWV0YU1ldGhvZChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhRnVuYyk6IE1ldGFGdW5jDQoJbG9jYWwgTWV0YXRhYmxlID0gZ2V0cmF3bWV0YXRhYmxlKE9iamVjdCkNCglsb2NhbCBPcmlnaW5hbEZ1bmMgPSBjbG9uZWZ1bmN0aW9uKE1ldGF0YWJsZVtDYWxsXSkNCgkNCgktLS8vIFJlcGxhY2UgZnVuY3Rpb24NCglzZXRyZWFkb25seShNZXRhdGFibGUsIGZhbHNlKQ0KCU1ldGF0YWJsZVtDYWxsXSA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgZmFsc2UsIC4uLikNCgllbmQpDQoJc2V0cmVhZG9ubHkoTWV0YXRhYmxlLCB0cnVlKQ0KDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCi0tLy8gaG9va2Z1bmN0aW9uDQpmdW5jdGlvbiBIb29rOkhvb2tGdW5jdGlvbihGdW5jOiBVbmtGdW5jLCBDYWxsYmFjazogVW5rRnVuYykNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglsb2NhbCBXcmFwcGVkQ2FsbGJhY2sgPSBuZXdjY2xvc3VyZShDYWxsYmFjaykNCglPcmlnaW5hbEZ1bmMgPSBjbG9uZWZ1bmN0aW9uKGhvb2tmdW5jdGlvbihGdW5jLCBmdW5jdGlvbiguLi4pDQoJCXJldHVybiBIb29rTWlkZGxlKE9yaWdpbmFsRnVuYywgV3JhcHBlZENhbGxiYWNrLCBmYWxzZSwgLi4uKQ0KCWVuZCkpDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCi0tLy8gaG9va21ldGFtZXRob2QNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFDYWxsKE9iamVjdDogSW5zdGFuY2UsIENhbGw6IHN0cmluZywgQ2FsbGJhY2s6IE1ldGFGdW5jKTogTWV0YUZ1bmMNCglsb2NhbCBNZXRhdGFibGUgPSBnZXRyYXdtZXRhdGFibGUoT2JqZWN0KQ0KCWxvY2FsIFVuaG9va2VkDQoJDQoJVW5ob29rZWQgPSBzZWxmOkhvb2tGdW5jdGlvbihNZXRhdGFibGVbQ2FsbF0sIGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoVW5ob29rZWQsIENhbGxiYWNrLCB0cnVlLCAuLi4pDQoJZW5kKQ0KCXJldHVybiBVbmhvb2tlZA0KZW5kDQoNCi0tLy8gaG9va21ldGFtZXRob2QNCi0tIGZ1bmN0aW9uIEhvb2s6SG9va01ldGFDYWxsKE9iamVjdDogSW5zdGFuY2UsIENhbGw6IHN0cmluZywgQ2FsbGJhY2s6IE1ldGFGdW5jKTogTWV0YUZ1bmMNCi0tIAlsb2NhbCBPcmlnaW5hbEZ1bmMNCi0tIAlPcmlnaW5hbEZ1bmMgPSBob29rbWV0YW1ldGhvZChPYmplY3QsIENhbGwsIG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCi0tIAkJcmV0dXJuIEhvb2tNaWRkbGUoT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgZmFsc2UsIC4uLikNCi0tIAllbmQpKQ0KLS0gCXJldHVybiBPcmlnaW5hbEZ1bmMNCi0tIGVuZA0KDQpmdW5jdGlvbiBIb29rOkhvb2tNZXRhTWV0aG9kKE9iamVjdDogSW5zdGFuY2UsIENhbGw6IHN0cmluZywgQ2FsbGJhY2s6IE1ldGFGdW5jKTogTWV0YUZ1bmMNCglsb2NhbCBGdW5jID0gbmV3Y2Nsb3N1cmUoQ2FsbGJhY2spDQoJDQoJLS0vLyBHZXRyYXdtZXRhdGFibGUNCglpZiBDb25maWcuUmVwbGFjZU1ldGFDYWxsRnVuYyB0aGVuDQoJCXJldHVybiBzZWxmOlJlcGxhY2VNZXRhTWV0aG9kKE9iamVjdCwgQ2FsbCwgRnVuYykNCgllbmQNCgkNCgktLS8vIEhvb2ttZXRhbWV0aG9kDQoJcmV0dXJuIHNlbGY6SG9va01ldGFDYWxsKE9iamVjdCwgQ2FsbCwgRnVuYykNCmVuZA0KDQotLS8vIFRoaXMgaW5jbHVkZXMgYSBmZXcgcGF0Y2hlcyBmb3IgZXhlY3V0b3IgZnVuY3Rpb25zIHRoYXQgcmVzdWx0IGluIGRldGVjdGlvbg0KLS0vLyBUaGlzIGlzbid0IGJ1bGxldHByb29mIHNpbmNlIHNvbWUgZnVuY3Rpb25zIGxpa2UgaG9va2Z1bmN0aW9uIEkgY2FuJ3QgcGF0Y2gNCi0tLy8gQnkgdGhlIHdheSwgdGhhbmtzIGZvciBjb3B5aW5nIHRoaXMgZ3V5cyEgU3VwZXIgYXBwcmVjaWF0ZSB0aGUgY29weWNhdA0KZnVuY3Rpb24gSG9vazpQYXRjaEZ1bmN0aW9ucygpDQoJLS0vLyBDaGVjayBpZiB0aGlzIGZ1bmN0aW9uIGlzIGRpc2FibGVkIGluIHRoZSBjb25maWd1cmF0aW9uDQoJaWYgQ29uZmlnLk5vRnVuY3Rpb25QYXRjaGluZyB0aGVuIHJldHVybiBlbmQNCg0KCWxvY2FsIFBhdGNoZXMgPSB7DQoJCS0tLy8gRXJyb3IgZGV0ZWN0aW9uIHBhdGNoDQoJCS0tLy8gaG9va2Z1bmN0aW9uIG1heSBzdGlsbCBiZSBkZXRlY3RlZCBkZXBlbmRpbmcgb24gdGhlIGV4ZWN1dG9yDQoJCVtwY2FsbF0gPSAgZnVuY3Rpb24oT2xkRnVuYywgRnVuYywgLi4uKQ0KCQkJbG9jYWwgUmVzcG9uY2UgPSB7T2xkRnVuYyhGdW5jLCAuLi4pfQ0KCQkJbG9jYWwgU3VjY2VzcywgRXJyb3IgPSBSZXNwb25jZVsxXSwgUmVzcG9uY2VbMl0NCgkJCWxvY2FsIElzQyA9IGlzY2Nsb3N1cmUoRnVuYykNCg0KCQkJLS0vLyBQYXRjaCBjLWNsb3N1cmUgZXJyb3IgZGV0ZWN0aW9uDQoJCQlpZiBTdWNjZXNzID09IGZhbHNlIGFuZCBJc0MgdGhlbg0KCQkJCWxvY2FsIE5ld0Vycm9yID0gUHJvY2VzczpDbGVhbkNFcnJvcihFcnJvcikNCgkJCQkNCgkJCQlSZXNwb25jZVsyXSA9IE5ld0Vycm9yDQoJCQllbmQNCg0KCQkJLS0vLyBTdGFjay1vdmVyZmxvdyBkZXRlY3Rpb24gcGF0Y2gNCgkJCWlmIFN1Y2Nlc3MgPT0gZmFsc2UgYW5kIG5vdCBJc0MgYW5kIEVycm9yOmZpbmQoIkMgc3RhY2sgb3ZlcmZsb3ciKSB0aGVuDQoJCQkJbG9jYWwgVHJhY2V0YWJsZSA9IEVycm9yOnNwbGl0KCI6IikNCgkJCQlsb2NhbCBDYWxsZXIsIExpbmUgPSBUcmFjZXRhYmxlWzFdLCBUcmFjZXRhYmxlWzJdDQoJCQkJbG9jYWwgQ291bnQgPSBQcm9jZXNzOkNvdW50TWF0Y2hlcyhFcnJvciwgQ2FsbGVyKQ0KDQoJCQkJaWYgQ291bnQgPT0gMTk2IHRoZW4NCgkJCQkJQ29tbXVuaWNhdGlvbjpDb25zb2xlUHJpbnQoIkMgc3RhY2sgb3ZlcmZsb3cgcGF0Y2hlZCIpDQoJCQkJCVJlc3BvbmNlWzJdID0gRXJyb3I6Z3N1Yihge0NhbGxlcn06e0xpbmV9OiBgLCBDYWxsZXIsIDEpDQoJCQkJZW5kDQoJCQllbmQNCg0KCQkJcmV0dXJuIFJlc3BvbmNlDQoJCWVuZCwNCgkJW2dldGZlbnZdID0gZnVuY3Rpb24oT2xkRnVuYywgTGV2ZWw6IG51bWJlciwgLi4uKQ0KCQkJTGV2ZWwgPSBMZXZlbCBvciAxDQoNCgkJCS0tLy8gUHJldmVudCBjYXRwdXJlIG9mIGV4ZWN1dG9yJ3MgZW52DQoJCQlpZiB0eXBlKExldmVsKSA9PSAibnVtYmVyIiB0aGVuDQoJCQkJTGV2ZWwgKz0gMg0KCQkJZW5kDQoNCgkJCWxvY2FsIFJlc3BvbmNlID0ge09sZEZ1bmMoTGV2ZWwsIC4uLil9DQoJCQlsb2NhbCBFTlYgPSBSZXNwb25jZVsxXQ0KDQoJCQktLS8vIF9fdG9zdHJpbmcgRU5WIGRldGVjdGlvbiBwYXRjaA0KCQkJaWYgbm90IGNoZWNrY2FsbGVyKCkgYW5kIEVOViA9PSBFeGVFTlYgdGhlbg0KCQkJCUNvbW11bmljYXRpb246Q29uc29sZVByaW50KCJFTlYgZXNjYXBlIHBhdGNoZWQiKQ0KCQkJCXJldHVybiBPbGRGdW5jKDk5OTk5OSwgLi4uKQ0KCQkJZW5kDQoNCgkJCXJldHVybiBSZXNwb25jZQ0KCQllbmQNCgl9DQoNCgktLS8vIEhvb2sgZWFjaCBmdW5jdGlvbg0KCWZvciBGdW5jLCBDYWxsQmFjayBpbiBQYXRjaGVzIGRvDQoJCWxvY2FsIFdyYXBwZWQgPSBuZXdjY2xvc3VyZShDYWxsQmFjaykNCgkJbG9jYWwgT2xkRnVuYzsgT2xkRnVuYyA9IHNlbGY6SG9va0Z1bmN0aW9uKEZ1bmMsIGZ1bmN0aW9uKC4uLikNCgkJCXJldHVybiBXcmFwcGVkKE9sZEZ1bmMsIC4uLikNCgkJZW5kKQ0KDQoJCS0tLy8gQ2FjaGUgcHJldmlvdXMgZnVuY3Rpb24NCgkJc2VsZi5QcmV2aW91c0Z1bmN0aW9uc1tGdW5jXSA9IE9sZEZ1bmMNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkdldE9yaWdpbmFsRnVuYyhGdW5jKQ0KCXJldHVybiBzZWxmLlByZXZpb3VzRnVuY3Rpb25zW0Z1bmNdIG9yIEZ1bmMNCmVuZA0KDQpmdW5jdGlvbiBIb29rOlJ1bk9uQWN0b3JzKENvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJaWYgbm90IGdldGFjdG9ycyBvciBub3QgcnVuX29uX2FjdG9yIHRoZW4gcmV0dXJuIGVuZA0KCQ0KCWxvY2FsIEFjdG9ycyA9IGdldGFjdG9ycygpDQoJaWYgbm90IEFjdG9ycyB0aGVuIHJldHVybiBlbmQNCgkNCglmb3IgXywgQWN0b3IgaW4gQWN0b3JzIGRvIA0KCQlwY2FsbChydW5fb25fYWN0b3IsIEFjdG9yLCBDb2RlLCBDaGFubmVsSWQpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gUHJvY2Vzc1JlbW90ZShPcmlnaW5hbEZ1bmMsIE1ldGFNZXRob2Q6IHN0cmluZywgc2VsZiwgTWV0aG9kOiBzdHJpbmcsIC4uLikNCglyZXR1cm4gUHJvY2VzczpQcm9jZXNzUmVtb3RlKHsNCgkJUmVtb3RlID0gc2VsZiwNCgkJTWV0aG9kID0gTWV0aG9kLA0KCQlPcmlnaW5hbEZ1bmMgPSBPcmlnaW5hbEZ1bmMsDQoJCU1ldGFNZXRob2QgPSBNZXRhTWV0aG9kLA0KCQlUcmFuc2ZlclR5cGUgPSAiU2VuZCIsDQoJCUlzRXhwbG9pdCA9IGNoZWNrY2FsbGVyKCkNCgl9LCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZTogc3RyaW5nLCBGdW5jTmFtZTogc3RyaW5nKQ0KCWxvY2FsIFJlbW90ZSA9IEluc3RhbmNlLm5ldyhDbGFzc05hbWUpDQoJbG9jYWwgRnVuYyA9IFJlbW90ZVtGdW5jTmFtZV0NCglsb2NhbCBPcmlnaW5hbEZ1bmMNCg0KCS0tLy8gUmVtb3RlcyB3aWxsIHNoYXJlIHRoZSBzYW1lIGZ1bmN0aW9ucw0KCS0tLy8gCUZvciBleGFtcGxlIEZpcmVTZXJ2ZXIgd2lsbCBiZSBpZGVudGljYWwNCgktLS8vIEFkZGlvbmFsbHksIHRoaXMgaXMgZm9yIF9faW5kZXggY2FsbHMuDQoJLS0vLyAJQSBfX25hbWVjYWxsIGhvb2sgd2lsbCBub3QgZGV0ZWN0IHRoaXMNCglPcmlnaW5hbEZ1bmMgPSBzZWxmOkhvb2tGdW5jdGlvbihGdW5jLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBpcyBhbGxvd2VkIA0KCQlpZiBub3QgUHJvY2VzczpSZW1vdGVBbGxvd2VkKHNlbGYsICJTZW5kIiwgRnVuY05hbWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gUHJvY2VzcyB0aGUgcmVtb3RlIGRhdGENCgkJcmV0dXJuIFByb2Nlc3NSZW1vdGUoT3JpZ2luYWxGdW5jLCAiX19pbmRleCIsIHNlbGYsIEZ1bmNOYW1lLCAuLi4pDQoJZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va1JlbW90ZUluZGV4ZXMoKQ0KCWxvY2FsIFJlbW90ZUNsYXNzRGF0YSA9IFByb2Nlc3MuUmVtb3RlQ2xhc3NEYXRhDQoJZm9yIENsYXNzTmFtZSwgRGF0YSBpbiBSZW1vdGVDbGFzc0RhdGEgZG8NCgkJbG9jYWwgRnVuY05hbWUgPSBEYXRhLlNlbmRbMV0NCgkJc2VsZjpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZSwgRnVuY05hbWUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpbkhvb2tzKCkNCgktLS8vIEhvb2sgUmVtb3RlIGZ1bmN0aW9ucw0KCXNlbGY6SG9va1JlbW90ZUluZGV4ZXMoKQ0KDQoJLS0vLyBOYW1lY2FsbCBob29rDQoJbG9jYWwgT3JpZ2luYWxOYW1lQ2FsbA0KCU9yaWdpbmFsTmFtZUNhbGwgPSBzZWxmOkhvb2tNZXRhTWV0aG9kKGdhbWUsICJfX25hbWVjYWxsIiwgZnVuY3Rpb24oc2VsZiwgLi4uKQ0KCQlsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpDQoJCXJldHVybiBQcm9jZXNzUmVtb3RlKE9yaWdpbmFsTmFtZUNhbGwsICJfX25hbWVjYWxsIiwgc2VsZiwgTWV0aG9kLCAuLi4pDQoJZW5kKQ0KDQoJTWVyZ2Uoc2VsZiwgew0KCQlPcmlnaW5hbE5hbWVjYWxsID0gT3JpZ2luYWxOYW1lQ2FsbCwNCgkJLS1PcmlnaW5hbEluZGV4ID0gT2kNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va0NsaWVudEludm9rZShSZW1vdGUsIE1ldGhvZCwgQ2FsbGJhY2spDQoJbG9jYWwgU3VjY2VzcywgRnVuY3Rpb24gPSBwY2FsbChmdW5jdGlvbigpDQoJCXJldHVybiBnZXRjYWxsYmFja3ZhbHVlKFJlbW90ZSwgTWV0aG9kKQ0KCWVuZCkNCg0KCS0tLy8gU29tZSBleGVjdXRvcnMgbGlrZSBQb3Rhc3NpdW0gd2lsbCB0aHJvdyBhIGVycm9yIGlmIHRoZSBDYWxsYmFjayB2YWx1ZSBpcyBuaWwNCglpZiBub3QgU3VjY2VzcyB0aGVuIHJldHVybiBlbmQNCgkNCglsb2NhbCBIb29rU3VjY2VzcyA9IHBjYWxsKGZ1bmN0aW9uKCkNCgkJc2VsZjpIb29rRnVuY3Rpb24oRnVuY3Rpb24sIGZ1bmN0aW9uKHNlbGYsIC4uLikNCgkJCXJldHVybiBDYWxsYmFjayguLi4pDQoJCWVuZCkNCgllbmQpDQoJDQoJaWYgSG9va1N1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoJUmVtb3RlW01ldGhvZF0gPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TXVsdGlDb25uZWN0KFJlbW90ZXMpDQoJZm9yIF8sIFJlbW90ZSBpbiBuZXh0LCBSZW1vdGVzIGRvDQoJCXNlbGY6Q29ubmVjdENsaWVudFJlY2l2ZShSZW1vdGUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpDb25uZWN0Q2xpZW50UmVjaXZlKFJlbW90ZSkNCgktLS8vIENoZWNrIGlmIHRoZSBSZW1vdGUgY2xhc3MgaXMgYWxsb3dlZCBmb3IgcmVjZWl2aW5nDQoJbG9jYWwgQWxsb3dlZCA9IFByb2Nlc3M6UmVtb3RlQWxsb3dlZChSZW1vdGUsICJSZWNlaXZlIikNCglpZiBub3QgQWxsb3dlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBoYXMgUmVtb3RlIGNsYXNzIGRhdGENCiAgICBsb2NhbCBDbGFzc0RhdGEgPSBQcm9jZXNzOkdldENsYXNzRGF0YShSZW1vdGUpDQogICAgbG9jYWwgSXNSZW1vdGVGdW5jdGlvbiA9IENsYXNzRGF0YS5Jc1JlbW90ZUZ1bmN0aW9uDQoJbG9jYWwgTm9SZWNpdmVIb29rID0gQ2xhc3NEYXRhLk5vUmVjaXZlSG9vaw0KICAgIGxvY2FsIE1ldGhvZCA9IENsYXNzRGF0YS5SZWNlaXZlWzFdDQoJbG9jYWwgUHJldmlvdXNGdW5jdGlvbiA9IG5pbA0KDQoJLS0vLyBDaGVjayBpZiB0aGUgUmVjaXZlIHNob3VsZCBiZSBob29rZWQNCglpZiBOb1JlY2l2ZUhvb2sgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIE5ldyBjYWxsYmFjayBmdW5jdGlvbg0KCWxvY2FsIGZ1bmN0aW9uIENhbGxiYWNrKC4uLikNCiAgICAgICAgcmV0dXJuIFByb2Nlc3M6UHJvY2Vzc1JlbW90ZSh7DQogICAgICAgICAgICBSZW1vdGUgPSBSZW1vdGUsDQogICAgICAgICAgICBNZXRob2QgPSBNZXRob2QsDQogICAgICAgICAgICBPcmlnaW5hbEZ1bmMgPSBQcmV2aW91c0Z1bmN0aW9uLA0KICAgICAgICAgICAgSXNSZWNlaXZlID0gdHJ1ZSwNCiAgICAgICAgICAgIE1ldGFNZXRob2QgPSAiQ29ubmVjdCIsDQoJCQlJc0V4cGxvaXQgPSBjaGVja2NhbGxlcigpDQogICAgICAgIH0sIC4uLikNCgllbmQNCg0KCS0tLy8gQ29ubmVjdCByZW1vdGUNCglpZiBub3QgSXNSZW1vdGVGdW5jdGlvbiB0aGVuDQogICAJCVJlbW90ZVtNZXRob2RdOkNvbm5lY3QoQ2FsbGJhY2spDQoJZWxzZSAtLSBSZW1vdGUgZnVuY3Rpb25zDQoJCXNlbGY6SG9va0NsaWVudEludm9rZShSZW1vdGUsIE1ldGhvZCwgQ2FsbGJhY2spDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpblNlcnZpY2UoTGlicmFyaWVzLCBFeHRyYURhdGEsIENoYW5uZWxJZCwgLi4uKQ0KCS0tLy8gTGlicmFyZWlzDQoJbG9jYWwgUmV0dXJuU3Bvb2ZzID0gTGlicmFyaWVzLlJldHVyblNwb29mcw0KCWxvY2FsIFByb2Nlc3NMaWIgPSBMaWJyYXJpZXMuUHJvY2Vzcw0KCWxvY2FsIENvbW11bmljYXRpb24gPSBMaWJyYXJpZXMuQ29tbXVuaWNhdGlvbg0KCWxvY2FsIEdlbmVyYXRpb24gPSBMaWJyYXJpZXMuR2VuZXJhdGlvbg0KCWxvY2FsIENvbmZpZyA9IExpYnJhcmllcy5Db25maWcNCg0KCS0tLy8gQ2hlY2sgZm9yIGNvbmZpZ3VyYXRpb24gb3ZlcndyaXRlcw0KCVByb2Nlc3NMaWI6Q2hlY2tDb25maWcoQ29uZmlnKQ0KDQoJLS0vLyBJbml0IGRhdGENCglsb2NhbCBJbml0RGF0YSA9IHsNCgkJTW9kdWxlcyA9IHsNCgkJCVJldHVyblNwb29mcyA9IFJldHVyblNwb29mcywNCgkJCUdlbmVyYXRpb24gPSBHZW5lcmF0aW9uLA0KCQkJQ29tbXVuaWNhdGlvbiA9IENvbW11bmljYXRpb24sDQoJCQlQcm9jZXNzID0gUHJvY2Vzc0xpYiwNCgkJCUNvbmZpZyA9IENvbmZpZywNCgkJCUhvb2sgPSBzZWxmDQoJCX0sDQoJCVNlcnZpY2VzID0gc2V0bWV0YXRhYmxlKHt9LCB7DQoJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgTmFtZTogc3RyaW5nKTogSW5zdGFuY2UNCgkJCQlsb2NhbCBTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKE5hbWUpDQoJCQkJcmV0dXJuIGNsb25lcmVmKFNlcnZpY2UpDQoJCQllbmQsDQoJCX0pDQoJfQ0KDQoJLS0vLyBJbml0IGxpYnJhcmllcw0KCUNvbW11bmljYXRpb246SW5pdChJbml0RGF0YSkNCglQcm9jZXNzTGliOkluaXQoSW5pdERhdGEpDQoNCgktLS8vIENvbW11bmljYXRpb24gY29uZmlndXJhdGlvbg0KCWxvY2FsIENoYW5uZWwsIElzV3JhcHBlZCA9IENvbW11bmljYXRpb246R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkKQ0KCUNvbW11bmljYXRpb246U2V0Q2hhbm5lbChDaGFubmVsKQ0KCUNvbW11bmljYXRpb246QWRkVHlwZUNhbGxiYWNrcyh7DQoJCVsiUmVtb3RlRGF0YSJdID0gZnVuY3Rpb24oSWQ6IHN0cmluZywgUmVtb3RlRGF0YSkNCgkJCVByb2Nlc3NMaWI6U2V0UmVtb3RlRGF0YShJZCwgUmVtb3RlRGF0YSkNCgkJZW5kLA0KCQlbIkFsbFJlbW90ZURhdGEiXSA9IGZ1bmN0aW9uKEtleTogc3RyaW5nLCBWYWx1ZSkNCgkJCVByb2Nlc3NMaWI6U2V0QWxsUmVtb3RlRGF0YShLZXksIFZhbHVlKQ0KCQllbmQsDQoJCVsiVXBkYXRlU3Bvb2ZzIl0gPSBmdW5jdGlvbihDb250ZW50OiBzdHJpbmcpDQoJCQlsb2NhbCBTcG9vZnMgPSBsb2Fkc3RyaW5nKENvbnRlbnQpKCkNCgkJCVByb2Nlc3NMaWI6U2V0TmV3UmV0dXJuU3Bvb2ZzKFNwb29mcykNCgkJZW5kDQoJfSkNCgkNCgktLS8vIFByb2Nlc3MgY29uZmlndXJhdGlvbg0KCVByb2Nlc3NMaWI6U2V0Q2hhbm5lbChDaGFubmVsLCBJc1dyYXBwZWQpDQoJUHJvY2Vzc0xpYjpTZXRFeHRyYURhdGEoRXh0cmFEYXRhKQ0KDQoJLS0vLyBIb29rIGNvbmZpZ3VyYXRpb24NCglzZWxmOkluaXQoSW5pdERhdGEpDQoJc2VsZjpQYXRjaEZ1bmN0aW9ucygpDQoJc2VsZjpCZWdpbkhvb2tzKCkNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRNZXRhSG9va3MoQWN0b3JDb2RlOiBzdHJpbmcsIENoYW5uZWxJZDogbnVtYmVyKQ0KCS0tLy8gSG9vayBhY3RvcnMNCglpZiBub3QgQ29uZmlndXJhdGlvbi5Ob0FjdG9ycyB0aGVuDQoJCXNlbGY6UnVuT25BY3RvcnMoQWN0b3JDb2RlLCBDaGFubmVsSWQpDQoJZW5kDQoNCgktLS8vIEhvb2sgY3VycmVudCB0aHJlYWQNCglzZWxmOkJlZ2luU2VydmljZShNb2R1bGVzLCBuaWwsIENoYW5uZWxJZCkgDQplbmQNCg0KZnVuY3Rpb24gSG9vazpMb2FkUmVjZWl2ZUhvb2tzKCkNCglsb2NhbCBOb1JlY2VpdmVIb29raW5nID0gQ29uZmlnLk5vUmVjZWl2ZUhvb2tpbmcNCglsb2NhbCBCbGFja0xpc3RlZFNlcnZpY2VzID0gQ29uZmlnLkJsYWNrTGlzdGVkU2VydmljZXMNCg0KCWlmIE5vUmVjZWl2ZUhvb2tpbmcgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIFJlbW90ZSBhZGRlZA0KCWdhbWUuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oUmVtb3RlKSAtLSBUT0RPDQoJCXNlbGY6Q29ubmVjdENsaWVudFJlY2l2ZShSZW1vdGUpDQoJZW5kKQ0KDQoJLS0vLyBDb2xsZWN0IHJlbW90ZXMgd2l0aCBuaWwgcGFyZW50cw0KCXNlbGY6TXVsdGlDb25uZWN0KGdldG5pbGluc3RhbmNlcygpKQ0KDQoJLS0vLyBTZWFyY2ggZm9yIHJlbW90ZXMNCglmb3IgXywgU2VydmljZSBpbiBuZXh0LCBnYW1lOkdldENoaWxkcmVuKCkgZG8NCgkJaWYgdGFibGUuZmluZChCbGFja0xpc3RlZFNlcnZpY2VzLCBTZXJ2aWNlLkNsYXNzTmFtZSkgdGhlbiBjb250aW51ZSBlbmQNCgkJc2VsZjpNdWx0aUNvbm5lY3QoU2VydmljZTpHZXREZXNjZW5kYW50cygpKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TG9hZEhvb2tzKEFjdG9yQ29kZTogc3RyaW5nLCBDaGFubmVsSWQ6IG51bWJlcikNCglzZWxmOkxvYWRNZXRhSG9va3MoQWN0b3JDb2RlLCBDaGFubmVsSWQpDQoJc2VsZjpMb2FkUmVjZWl2ZUhvb2tzKCkNCmVuZA0KDQpyZXR1cm4gSG9vaw0K]]
},Flags={'base64',
[[dHlwZSBGbGFnVmFsdWUgPSBib29sZWFufG51bWJlcnxhbnkNCnR5cGUgRmxhZyA9IHsNCiAgICBWYWx1ZTogRmxhZ1ZhbHVlLA0KICAgIExhYmVsOiBzdHJpbmcsDQogICAgQ2F0ZWdvcnk6IHN0cmluZw0KfQ0KdHlwZSBGbGFncyA9IHsNCiAgICBbc3RyaW5nXTogRmxhZw0KfQ0KdHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCmxvY2FsIE1vZHVsZSA9IHsNCiAgICBGbGFncyA9IHsNCiAgICAgICAgLS0gUHJldmVudFJlbmFtaW5nID0gew0KICAgICAgICAtLSAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgLS0gICAgIExhYmVsID0gIk5vIHJlbmFtaW5nIiwNCiAgICAgICAgLS0gfSwNCiAgICAgICAgLS0gUHJldmVudFBhcmVudGluZyA9IHsNCiAgICAgICAgLS0gICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgIC0tICAgICBMYWJlbCA9ICJObyBwYXJlbnRpbmciLA0KICAgICAgICAtLSB9LA0KICAgICAgICBOb0NvbW1lbnRzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIGNvbW1lbnRzIiwNCiAgICAgICAgfSwNCiAgICAgICAgU2VsZWN0TmV3ZXN0ID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIkF1dG8gc2VsZWN0IG5ld2VzdCIsDQogICAgICAgIH0sDQogICAgICAgIERlY29tcGlsZVBvcG91dCA9IHsgLS0gTG92cmUgU0hVU0gNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJQb3Atb3V0IGRlY29tcGlsZXMiLA0KICAgICAgICB9LA0KICAgICAgICBJZ25vcmVOaWwgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJJZ25vcmUgbmlsIHBhcmVudHMiLA0KICAgICAgICB9LA0KICAgICAgICBMb2dFeHBsb2l0ID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTG9nIGV4cGxvaXQgY2FsbHMiLA0KICAgICAgICB9LA0KICAgICAgICBMb2dSZWNpdmVzID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTG9nIHJlY2VpdmVzIiwNCiAgICAgICAgfSwNCiAgICAgICAgUGF1c2VkID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlBhdXNlZCIsDQogICAgICAgICAgICBLZXliaW5kID0gRW51bS5LZXlDb2RlLlENCiAgICAgICAgfSwNCiAgICAgICAgS2V5YmluZHNFbmFibGVkID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiS2V5YmluZHMgRW5hYmxlZCINCiAgICAgICAgfSwNCiAgICAgICAgRmluZFN0cmluZ0Zvck5hbWUgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJGaW5kIGFyZyBmb3IgbmFtZSINCiAgICAgICAgfSwNCiAgICAgICAgVWlWaXNpYmxlID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiVUkgVmlzaWJsZSIsDQogICAgICAgICAgICBLZXliaW5kID0gRW51bS5LZXlDb2RlLlANCiAgICAgICAgfSwNCiAgICAgICAgTm9UcmVlTm9kZXMgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTm8gZ3JvdXBpbmciDQogICAgICAgIH0sDQogICAgICAgIFRhYmxlQXJncyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJUYWJsZSBhcmdzIg0KICAgICAgICB9LA0KICAgICAgICBOb1ZhcmlhYmxlcyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBjb21wcmVzc2lvbiINCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWdWYWx1ZShOYW1lOiBzdHJpbmcpOiBGbGFnVmFsdWUNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgcmV0dXJuIEZsYWcuVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2V0RmxhZ1ZhbHVlKE5hbWU6IHN0cmluZywgVmFsdWU6IEZsYWdWYWx1ZSkNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgRmxhZy5WYWx1ZSA9IFZhbHVlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldEZsYWdDYWxsYmFjayhOYW1lOiBzdHJpbmcsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkpDQogICAgbG9jYWwgRmxhZyA9IHNlbGY6R2V0RmxhZyhOYW1lKQ0KICAgIEZsYWcuQ2FsbGJhY2sgPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRGbGFnQ2FsbGJhY2tzKERpY3Q6IHt9KQ0KICAgIGZvciBOYW1lLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55IGluIG5leHQsIERpY3QgZG8gDQogICAgICAgIHNlbGY6U2V0RmxhZ0NhbGxiYWNrKE5hbWUsIENhbGxiYWNrKQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpHZXRGbGFnKE5hbWU6IHN0cmluZyk6IEZsYWcNCiAgICBsb2NhbCBBbGxGbGFncyA9IHNlbGY6R2V0RmxhZ3MoKQ0KICAgIGxvY2FsIEZsYWcgPSBBbGxGbGFnc1tOYW1lXQ0KICAgIGFzc2VydChGbGFnLCAiRmxhZyBkb2VzIG5vdCBleGlzdCEiKQ0KICAgIHJldHVybiBGbGFnDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZEZsYWcoTmFtZTogc3RyaW5nLCBGbGFnOiBGbGFnKQ0KICAgIGxvY2FsIEFsbEZsYWdzID0gc2VsZjpHZXRGbGFncygpDQogICAgQWxsRmxhZ3NbTmFtZV0gPSBGbGFnDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWdzKCk6IEZsYWdzDQogICAgcmV0dXJuIHNlbGYuRmxhZ3MNCmVuZA0KDQpyZXR1cm4gTW9kdWxl]]
},Ui={'base64',
[[bG9jYWwgVWkgPSB7DQoJRGVmYXVsdEVkaXRvckNvbnRlbnQgPSAiLS0gSmVzdXMgbG92ZXMgeW91IiwNCglMb2dMaW1pdCA9IDEwMCwNCiAgICBTZWFzb25MYWJlbHMgPSB7IA0KICAgICAgICBKYW51YXJ5ID0gIuKbhCAlcyDim4QiLCANCiAgICAgICAgRmVicnVhcnkgPSAi8J+MqO+4jyAlcyDwn4+CIiwgDQogICAgICAgIE1hcmNoID0gIvCfjLkgJXPwn4y6ICIsIA0KICAgICAgICBBcHJpbCA9ICLwn5CjICVzIOKcne+4jyIsIA0KICAgICAgICBNYXkgPSAi8J+QnSAlcyDwn4yeIiwgDQogICAgICAgIEp1bmUgPSAi8J+MsiAlcyDwn6WVIiwgDQogICAgICAgIEp1bHkgPSAi8J+MiiAlcyDwn4yFIiwgDQogICAgICAgIEF1Z3VzdCA9ICLimIDvuI8gJXMg8J+MniIsIA0KICAgICAgICBTZXB0ZW1iZXIgPSAi8J+NgSAlcyDwn42BIiwgDQogICAgICAgIE9jdG9iZXIgPSAi8J+OgyAlcyDwn46DIiwgDQogICAgICAgIE5vdmVtYmVyID0gIvCfjYIgJXMg8J+NgiIsIA0KICAgICAgICBEZWNlbWJlciA9ICLwn46EICVzIPCfjoEiDQogICAgfSwNCglTY2FsZXMgPSB7DQoJCVsiTW9iaWxlIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDQ4MCwgMjgwKSwNCgkJWyJEZXNrdG9wIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDYwMCwgNDAwKSwNCgl9LA0KICAgIEJhc2VDb25maWcgPSB7DQogICAgICAgIFRoZW1lID0gIlNpZ21hU3B5IiwNCgkJVGl0bGUgPSAiU2lnbWEgU3B5IEJFVEEgfCBDcmVhdGVkIGJ5IGRlcHNvIiwNCiAgICAgICAgTm9TY3JvbGwgPSB0cnVlLA0KICAgIH0sDQoJT3B0aW9uVHlwZXMgPSB7DQoJCWJvb2xlYW4gPSAiQ2hlY2tib3giLA0KCX0sDQoJRGlzcGxheVJlbW90ZUluZm8gPSB7DQoJCSJNZXRhTWV0aG9kIiwNCgkJIk1ldGhvZCIsDQoJCSJSZW1vdGUiLA0KCQkiQ2FsbGluZ1NjcmlwdCIsDQoJCSJJc0FjdG9yIiwNCgkJIklkIg0KCX0sDQoNCiAgICBXaW5kb3cgPSBuaWwsDQogICAgUmFuZG9tU2VlZCA9IFJhbmRvbS5uZXcodGljaygpKSwNCglMb2dzID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gImsifSksDQoJTG9nUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCn0gDQoNCnR5cGUgdGFibGUgPSB7DQoJW2FueV06IGFueQ0KfQ0KDQp0eXBlIExvZyA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCU1ldGhvZDogc3RyaW5nLA0KCUFyZ3M6IHRhYmxlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJTWV0YU1ldGhvZDogc3RyaW5nPywNCglPcmlnbmFsRnVuYzogKCguLi5hbnkpIC0+IC4uLmFueSk/LA0KCUNhbGxpbmdTY3JpcHQ6IEluc3RhbmNlPywNCglDYWxsaW5nRnVuY3Rpb246ICgoLi4uYW55KSAtPiAuLi5hbnkpPywNCglDbGFzc0RhdGE6IHRhYmxlPywNCglSZXR1cm5WYWx1ZXM6IHRhYmxlPywNCglSZW1vdGVEYXRhOiB0YWJsZT8sDQoJSWQ6IHN0cmluZywNCglTZWxlY3RhYmxlOiB0YWJsZSwNCglIZWFkZXJEYXRhOiB0YWJsZSwNCglWYWx1ZVN3YXBzOiB0YWJsZSwNCglUaW1lc3RhbXA6IG51bWJlciwNCglJc0V4cGxvaXQ6IGJvb2xlYW4NCn0NCg0KLS0vLyBDb21wYXRpYmlsaXR5DQpsb2NhbCBTZXRDbGlwYm9hcmQgPSBzZXRjbGlwYm9hcmQgb3IgdG9jbGlwYm9hcmQgb3Igc2V0X2NsaXBib2FyZA0KDQotLS8vIExpYnJhcmllcw0KbG9jYWwgUmVHdWkgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9naXRodWIuY29tL2RlcHRoc28vRGVhci1SZUd1aS9yYXcvcmVmcy9oZWFkcy9tYWluL1JlR3VpLmx1YScpLCAiUmVHdWkiKSgpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgRmxhZ3MNCmxvY2FsIEdlbmVyYXRpb24NCmxvY2FsIFByb2Nlc3MNCmxvY2FsIEhvb2sgDQpsb2NhbCBDb25maWcNCmxvY2FsIENvbW11bmljYXRpb24NCmxvY2FsIEZpbGVzDQoNCmxvY2FsIEFjdGl2ZURhdGEgPSBuaWwNCmxvY2FsIFJlbW90ZXNDb3VudCA9IDANCg0KbG9jYWwgVGV4dEZvbnQgPSBGb250LmZyb21FbnVtKEVudW0uRm9udC5Db2RlKQ0KbG9jYWwgRm9udFN1Y2Nlc3MgPSBmYWxzZQ0KbG9jYWwgQ29tbUNoYW5uZWwNCg0KZnVuY3Rpb24gVWk6SW5pdChEYXRhKQ0KICAgIGxvY2FsIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCg0KCS0tLy8gTW9kdWxlcw0KCUZsYWdzID0gTW9kdWxlcy5GbGFncw0KCUdlbmVyYXRpb24gPSBNb2R1bGVzLkdlbmVyYXRpb24NCglQcm9jZXNzID0gTW9kdWxlcy5Qcm9jZXNzDQoJSG9vayA9IE1vZHVsZXMuSG9vaw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnDQoJQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbg0KCUZpbGVzID0gTW9kdWxlcy5GaWxlcw0KDQoJLS0vLyBSZUd1aQ0KCXNlbGY6TG9hZEZvbnQoKQ0KCXNlbGY6TG9hZFJlR3VpKCkNCglzZWxmOkNoZWNrU2NhbGUoKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldENvbW1DaGFubmVsKE5ld0NvbW1DaGFubmVsOiBCaW5kYWJsZUV2ZW50KQ0KCUNvbW1DaGFubmVsID0gTmV3Q29tbUNoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBVaTpDaGVja1NjYWxlKCkNCglsb2NhbCBCYXNlQ29uZmlnID0gc2VsZi5CYXNlQ29uZmlnDQoJbG9jYWwgU2NhbGVzID0gc2VsZi5TY2FsZXMNCg0KCWxvY2FsIElzTW9iaWxlID0gUmVHdWk6SXNNb2JpbGVEZXZpY2UoKQ0KCWxvY2FsIERldmljZSA9IElzTW9iaWxlIGFuZCAiTW9iaWxlIiBvciAiRGVza3RvcCINCg0KCUJhc2VDb25maWcuU2l6ZSA9IFNjYWxlc1tEZXZpY2VdDQplbmQNCg0KZnVuY3Rpb24gVWk6U2V0Q2xpcGJvYXJkKENvbnRlbnQ6IHN0cmluZykNCglTZXRDbGlwYm9hcmQoQ29udGVudCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpUdXJuU2Vhc29uYWwoVGV4dDogc3RyaW5nKTogc3RyaW5nDQogICAgbG9jYWwgU2Vhc29uTGFiZWxzID0gc2VsZi5TZWFzb25MYWJlbHMNCiAgICBsb2NhbCBNb250aCA9IG9zLmRhdGUoIiVCIikNCiAgICBsb2NhbCBCYXNlID0gU2Vhc29uTGFiZWxzW01vbnRoXQ0KDQogICAgcmV0dXJuIEJhc2U6Zm9ybWF0KFRleHQpDQplbmQNCg0KZnVuY3Rpb24gVWk6TG9hZEZvbnQoKQ0KCWxvY2FsIEZvbnRGaWxlID0gc2VsZi5Gb250SnNvbkZpbGUNCg0KCS0tLy8gR2V0IEZvbnRGYWNlIEFzc2V0SWQNCglsb2NhbCBBc3NldElkID0gRmlsZXM6TG9hZEN1c3RvbWFzc2V0KEZvbnRGaWxlKQ0KCWlmIG5vdCBBc3NldElkIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBDcmVhdGUgY3VzdG9tIEZvbnRGYWNlDQoJbG9jYWwgTmV3Rm9udCA9IEZvbnQubmV3KEFzc2V0SWQpDQoJVGV4dEZvbnQgPSBOZXdGb250DQoJRm9udFN1Y2Nlc3MgPSB0cnVlDQplbmQNCg0KZnVuY3Rpb24gVWk6U2V0Rm9udEZpbGUoRm9udEZpbGU6IHN0cmluZykNCglzZWxmLkZvbnRKc29uRmlsZSA9IEZvbnRGaWxlDQplbmQNCg0KZnVuY3Rpb24gVWk6Rm9udFdhc1N1Y2Nlc3NmdWwoKQ0KCWlmIEZvbnRTdWNjZXNzIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBFcnJvciBtZXNzYWdlDQoJc2VsZjpTaG93TW9kYWwoew0KCQkiVW5mb3J0dW5hdGVseSB5b3VyIGV4ZWN1dG9yIHdhcyB1bmFibGUgdG8gZG93bmxvYWQgdGhlIGZvbnQgYW5kIHRoZXJlZm9yZSBzd2l0Y2hlZCB0byB0aGUgRGFyayB0aGVtZSIsDQoJCSJcbklmIHlvdSB3b3VsZCBsaWtlIHRvIHVzZSB0aGUgSW1HdWkgdGhlbWUsIFxucGxlYXNlIGRvd25sb2FkIHRoZSBmb250IChhc3NldHMvUHJvZ2d5Q2xlYW4udHRmKSIsDQoJCSJhbmQgcHV0IHB1dCBpdCBpbiB5b3VyIHdvcmtzcGFjZSBmb2xkZXJcbihTaWdtYSBTcHkvYXNzZXRzKSINCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkxvYWRSZUd1aSgpDQoJbG9jYWwgVGhlbWVDb25maWcgPSBDb25maWcuVGhlbWVDb25maWcNCglUaGVtZUNvbmZpZy5UZXh0Rm9udCA9IFRleHRGb250DQoNCgktLS8vIFJlR3VpDQoJUmVHdWk6RGVmaW5lVGhlbWUoIlNpZ21hU3B5IiwgVGhlbWVDb25maWcpDQplbmQNCg0KdHlwZSBDcmVhdGVCdXR0b25zID0gew0KCUJhc2U6IHRhYmxlPywNCglCdXR0b25zOiB0YWJsZSwNCglOb1RhYmxlOiBib29sZWFuPw0KfQ0KZnVuY3Rpb24gVWk6Q3JlYXRlQnV0dG9ucyhQYXJlbnQsIERhdGE6IENyZWF0ZUJ1dHRvbnMpDQoJbG9jYWwgQmFzZSA9IERhdGEuQmFzZSBvciB7fQ0KCWxvY2FsIEJ1dHRvbnMgPSBEYXRhLkJ1dHRvbnMNCglsb2NhbCBOb1RhYmxlID0gRGF0YS5Ob1RhYmxlDQoNCgktLS8vIENyZWF0ZSB0YWJsZSBsYXlvdXQNCglpZiBub3QgTm9UYWJsZSB0aGVuDQoJCVBhcmVudCA9IFBhcmVudDpUYWJsZSh7DQoJCQlNYXhDb2x1bW5zID0gMw0KCQl9KTpOZXh0Um93KCkNCgllbmQNCg0KCS0tLy8gQ3JlYXRlIGJ1dHRvbnMNCglmb3IgXywgQnV0dG9uIGluIG5leHQsIEJ1dHRvbnMgZG8NCgkJbG9jYWwgQ29udGFpbmVyID0gUGFyZW50DQoJCWlmIG5vdCBOb1RhYmxlIHRoZW4NCgkJCUNvbnRhaW5lciA9IFBhcmVudDpOZXh0Q29sdW1uKCkNCgkJZW5kDQoNCgkJUmVHdWk6Q2hlY2tDb25maWcoQnV0dG9uLCBCYXNlKQ0KCQlDb250YWluZXI6QnV0dG9uKEJ1dHRvbikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVXaW5kb3coKQ0KICAgIGxvY2FsIEJhc2VDb25maWcgPSBzZWxmLkJhc2VDb25maWcNCglsb2NhbCBDb25maWcgPSBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKEJhc2VDb25maWcpDQoJbG9jYWwgU2Vhc29uYWwgPSBzZWxmOlR1cm5TZWFzb25hbChDb25maWcuVGl0bGUpDQoJQ29uZmlnLlRpdGxlID0gU2Vhc29uYWwNCg0KCS0tLy8gQ3JlYXRlIFdpbmRvdw0KCWxvY2FsIFdpbmRvdyA9IFJlR3VpOldpbmRvdyhDb25maWcpDQoNCgktLS8vIFN3aXRjaCB0byBEYXJrVGhlbWUgaW5zdGVhZCBvZiB0aGUgSW1HdWkgdGhlbWUgaWYgdGhlIGZvbnQgY2Fubm90IGJlIGxvYWRlZA0KCWlmIG5vdCBGb250U3VjY2VzcyB0aGVuIA0KCQlXaW5kb3c6U2V0VGhlbWUoIkRhcmtUaGVtZSIpDQoJZW5kDQoJDQoJLS0vLyBDcmVhdGUgV2luZG93DQoJcmV0dXJuIFdpbmRvdw0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNyZWF0ZU1haW5XaW5kb3coKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KCkNCglzZWxmLldpbmRvdyA9IFdpbmRvdw0KDQoJLS0vLyBDaGVjayBpZiB0aGUgZm9udCB3YXMgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQNCglzZWxmOkZvbnRXYXNTdWNjZXNzZnVsKCkNCgktLXNlbGY6QXVyYUNvdW50ZXJTZXJ2aWNlKCkNCg0KCS0tLy8gVWlWaXNpYmxlIGZsYWcgY2FsbGJhY2sNCglGbGFnczpTZXRGbGFnQ2FsbGJhY2soIlVpVmlzaWJsZSIsIGZ1bmN0aW9uKHNlbGYsIFZpc2libGUpDQoJCVdpbmRvdzpTZXRWaXNpYmxlKFZpc2libGUpDQoJZW5kKQ0KDQoJcmV0dXJuIFdpbmRvdw0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dNb2RhbChMaW5lczogdGFibGUpDQoJbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCglsb2NhbCBNZXNzYWdlID0gdGFibGUuY29uY2F0KExpbmVzLCAiXG4iKQ0KDQoJLS0vLyBNb2RhbCBXaW5kb3cNCglsb2NhbCBNb2RhbFdpbmRvdyA9IFdpbmRvdzpQb3B1cE1vZGFsKHsNCgkJVGl0bGUgPSAiU2lnbWEgU3B5Ig0KCX0pDQoJTW9kYWxXaW5kb3c6TGFiZWwoew0KCQlUZXh0ID0gTWVzc2FnZSwNCgkJUmljaFRleHQgPSB0cnVlLA0KCQlUZXh0V3JhcHBlZCA9IHRydWUNCgl9KQ0KCU1vZGFsV2luZG93OkJ1dHRvbih7DQoJCVRleHQgPSAiT2theSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJTW9kYWxXaW5kb3c6Q2xvc2VQb3B1cCgpDQoJCWVuZCwNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dVbnN1cHBvcnRlZEV4ZWN1dG9yKE5hbWU6IHN0cmluZykNCglVaTpTaG93TW9kYWwoew0KCQkiVW5mb3J0dW5hdGVseSBTaWdtYSBTcHkgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIGV4ZWN1dG9yIiwNCgkJIlRoZSBiZXN0IGZyZWUgb3B0aW9uIGlzIFN3aWZ0IChkaXNjb3JkLmdnL2dldHN3aWZ0Z2cpIiwNCgkJYFxuWW91ciBleGVjdXRvcjoge05hbWV9YA0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6U2hvd1Vuc3VwcG9ydGVkKEZ1bmNOYW1lOiBzdHJpbmcpDQoJVWk6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgU2lnbWEgU3B5IGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBleGVjdXRvciIsDQoJCWBcbk1pc3NpbmcgZnVuY3Rpb246IHtGdW5jTmFtZX1gDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVPcHRpb25zRm9yRGljdChQYXJlbnQsIERpY3Q6IHRhYmxlLCBDYWxsYmFjaykNCglsb2NhbCBPcHRpb25zID0ge30NCg0KCS0tLy8gRGljdG9uYXJ5IHdyYXANCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBEaWN0IGRvDQoJCU9wdGlvbnNbS2V5XSA9IHsNCgkJCVZhbHVlID0gVmFsdWUsDQoJCQlMYWJlbCA9IEtleSwNCgkJCUNhbGxiYWNrID0gZnVuY3Rpb24oXywgVmFsdWUpDQoJCQkJRGljdFtLZXldID0gVmFsdWUNCg0KCQkJCS0tLy8gSW52b2tlIGNhbGxiYWNrDQoJCQkJaWYgbm90IENhbGxiYWNrIHRoZW4gcmV0dXJuIGVuZA0KCQkJCUNhbGxiYWNrKCkNCgkJCWVuZA0KCQl9DQoJZW5kDQoNCgktLS8vIENyZWF0ZSBlbGVtZW50cw0KCXNlbGY6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleUNvZGU6IEVudW0uS2V5Q29kZSwgQ2FsbGJhY2spDQoJaWYgbm90IEtleUNvZGUgdGhlbiByZXR1cm4gQ29udGFpbmVyIGVuZA0KDQoJLS0vLyBDcmVhdGUgUm93IGxheW91dA0KCUNvbnRhaW5lciA9IENvbnRhaW5lcjpSb3coew0KCQlIb3Jpem9udGFsRmxleCA9IEVudW0uVUlGbGV4QWxpZ25tZW50LlNwYWNlQmV0d2Vlbg0KCX0pDQoNCgktLS8vIEFkZCBLZXliaW5kIGVsZW1lbnQNCglDb250YWluZXI6S2V5YmluZCh7DQoJCUxhYmVsID0gIiIsDQoJCVZhbHVlID0gS2V5Q29kZSwNCgkJTGF5b3V0T3JkZXIgPSAyLA0KCQlJZ25vcmVHYW1lUHJvY2Vzc2VkID0gZmFsc2UsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJLS0vLyBDaGVjayBpZiBrZXliaW5kcyBhcmUgZW5hYmxlZA0KCQkJbG9jYWwgRW5hYmxlZCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiS2V5YmluZHNFbmFibGVkIikNCgkJCWlmIG5vdCBFbmFibGVkIHRoZW4gcmV0dXJuIGVuZA0KDQoJCQktLS8vIEludm9rZSBjYWxsYmFjaw0KCQkJQ2FsbGJhY2soKQ0KCQllbmQsDQoJfSkNCg0KCXJldHVybiBDb250YWluZXINCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVFbGVtZW50cyhQYXJlbnQsIE9wdGlvbnMpDQoJbG9jYWwgT3B0aW9uVHlwZXMgPSBzZWxmLk9wdGlvblR5cGVzDQoJDQoJLS0vLyBDcmVhdGUgdGFibGUgbGF5b3V0DQoJbG9jYWwgVGFibGUgPSBQYXJlbnQ6VGFibGUoew0KCQlNYXhDb2x1bW5zID0gMw0KCX0pOk5leHRSb3coKQ0KDQoJZm9yIE5hbWUsIERhdGEgaW4gT3B0aW9ucyBkbw0KCQlsb2NhbCBWYWx1ZSA9IERhdGEuVmFsdWUNCgkJbG9jYWwgVHlwZSA9IHR5cGVvZihWYWx1ZSkNCg0KCQktLS8vIEFkZCBtaXNzaW5nIHZhbHVlcyBpbnRvIG9wdGlvbnMgdGFibGUNCgkJUmVHdWk6Q2hlY2tDb25maWcoRGF0YSwgew0KCQkJQ2xhc3MgPSBPcHRpb25UeXBlc1tUeXBlXSwNCgkJCUxhYmVsID0gTmFtZSwNCgkJfSkNCgkJDQoJCS0tLy8gQ2hlY2sgaWYgYSBlbGVtZW50IHR5cGUgZXhpc3RzIGZvciB2YWx1ZSB0eXBlDQoJCWxvY2FsIENsYXNzID0gRGF0YS5DbGFzcw0KCQlhc3NlcnQoQ2xhc3MsIGBObyB7VHlwZX0gdHlwZSBleGlzdHMgZm9yIG9wdGlvbmApDQoNCgkJbG9jYWwgQ29udGFpbmVyID0gVGFibGU6TmV4dENvbHVtbigpDQoJCWxvY2FsIENoZWNrYm94ID0gbmlsDQoNCgkJLS0vLyBDaGVjayBmb3IgYSBrZXliaW5kIGxheW91dA0KCQlsb2NhbCBLZXliaW5kID0gRGF0YS5LZXliaW5kDQoJCUNvbnRhaW5lciA9IHNlbGY6Q2hlY2tLZXliaW5kTGF5b3V0KENvbnRhaW5lciwgS2V5YmluZCwgZnVuY3Rpb24oKQ0KCQkJQ2hlY2tib3g6VG9nZ2xlKCkNCgkJZW5kKQ0KCQkNCgkJLS0vLyBDcmVhdGUgY29sdW1uIGFuZCBlbGVtZW50DQoJCUNoZWNrYm94ID0gQ29udGFpbmVyW0NsYXNzXShDb250YWluZXIsIERhdGEpDQoJZW5kDQplbmQNCg0KLS0vLyBCb2lpaWkgd2hhdCBkaWQgeW91IHNheSBhYm91dCBTaWdtYSBTcHkg8J+SgPCfkoANCmZ1bmN0aW9uIFVpOkRpc3BsYXlBdXJhKCkNCiAgICBsb2NhbCBXaW5kb3cgPSBzZWxmLldpbmRvdw0KICAgIGxvY2FsIFJhbmQgPSBzZWxmLlJhbmRvbVNlZWQNCg0KCS0tLy8gQXVyYSAoYm9paWlpaSkNCiAgICBsb2NhbCBBVVJBID0gUmFuZDpOZXh0SW50ZWdlcigxLCA5OTk5OTk5KQ0KICAgIGxvY2FsIEFVUkFERUxBWSA9IFJhbmQ6TmV4dEludGVnZXIoMSwgNSkNCg0KCS0tLy8gVGl0bGUNCglsb2NhbCBUaXRsZSA9IGBTaWdtYSBTcHkgLSBEZXBzbyB8IEFVUkE6IHtBVVJBfWANCglsb2NhbCBTZWFzb25hbCA9IHNlbGY6VHVyblNlYXNvbmFsKFRpdGxlKQ0KICAgIFdpbmRvdzpTZXRUaXRsZShTZWFzb25hbCkNCg0KICAgIHdhaXQoQVVSQURFTEFZKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkF1cmFDb3VudGVyU2VydmljZSgpDQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgICAgIHNlbGY6RGlzcGxheUF1cmEoKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlV2luZG93Q29udGVudChXaW5kb3cpDQogICAgLS0vLyBXaW5kb3cgZ3JvdXANCiAgICBsb2NhbCBMYXlvdXQgPSBXaW5kb3c6TGlzdCh7DQogICAgICAgIFVpUGFkZGluZyA9IDIsDQogICAgICAgIEhvcml6b250YWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgVmVydGljYWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5WZXJ0aWNhbCwNCiAgICAgICAgRmlsbCA9IHRydWUNCiAgICB9KQ0KDQoJLS0vLyBSZW1vdGVzIGxpc3QNCiAgICBzZWxmLlJlbW90ZXNMaXN0ID0gTGF5b3V0OkNhbnZhcyh7DQogICAgICAgIFNjcm9sbCA9IHRydWUsDQogICAgICAgIFVpUGFkZGluZyA9IDUsDQogICAgICAgIEF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuTm9uZSwNCiAgICAgICAgRmxleE1vZGUgPSBFbnVtLlVJRmxleE1vZGUuTm9uZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMzAsIDEsIDApDQogICAgfSkNCg0KCS0tLy8gVGFiIGJveA0KCWxvY2FsIEluZm9TZWxlY3RvciA9IExheW91dDpUYWJTZWxlY3Rvcih7DQogICAgICAgIE5vQW5pbWF0aW9uID0gdHJ1ZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTMwLCAwLjQsIDApLA0KICAgIH0pDQoNCglzZWxmLkluZm9TZWxlY3RvciA9IEluZm9TZWxlY3Rvcg0KCXNlbGYuQ2FudmFzTGF5b3V0ID0gTGF5b3V0DQoNCgktLS8vIE1ha2UgdGFicw0KCXNlbGY6TWFrZUVkaXRvclRhYihJbmZvU2VsZWN0b3IpDQoJc2VsZjpNYWtlT3B0aW9uc1RhYihJbmZvU2VsZWN0b3IpDQoJDQoJaWYgQ29uZmlnLkRlYnVnIHRoZW4NCgkJc2VsZjpDb25zb2xlVGFiKEluZm9TZWxlY3RvcikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpDb25zb2xlVGFiKEluZm9TZWxlY3RvcikNCglsb2NhbCBUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9ICJDb25zb2xlIg0KCX0pDQoNCglsb2NhbCBDb25zb2xlDQoJbG9jYWwgQnV0dG9uc1JvdyA9IFRhYjpSb3coKQ0KDQoJQnV0dG9uc1JvdzpCdXR0b24oew0KCQlUZXh0ID0gIkNsZWFyIiwNCgkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQlDb25zb2xlOkNsZWFyKCkNCgkJZW5kDQoJfSkNCglCdXR0b25zUm93OkJ1dHRvbih7DQoJCVRleHQgPSAiQ29weSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJbG9jYWwgQ29udGVudCA9IENvbnNvbGU6R2V0VmFsdWUoKQ0KCQkJdG9jbGlwYm9hcmQoQ29udGVudCkNCgkJZW5kDQoJfSkNCglCdXR0b25zUm93OkJ1dHRvbih7DQoJCVRleHQgPSAiUGF1c2UiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKHNlbGYpDQoJCQlsb2NhbCBFbmFibGVkID0gbm90IENvbnNvbGUuRW5hYmxlZA0KCQkJbG9jYWwgVGV4dCA9IEVuYWJsZWQgYW5kICJQYXVzZSIgb3IgIlBhdXNlZCINCgkJCXNlbGYuVGV4dCA9IFRleHQNCg0KCQkJLS0vLyBVcGRhdGUgY29uc29sZQ0KCQkJQ29uc29sZS5FbmFibGVkID0gRW5hYmxlZA0KCQllbmQsDQoJfSkNCglCdXR0b25zUm93OkV4cGFuZCgpDQoNCgktLS8vIENyZWF0ZSBjb25zb2xlDQoJQ29uc29sZSA9IFRhYjpDb25zb2xlKHsNCgkJVGV4dCA9ICItLSBDcmVhdGVkIGJ5IGRlcHNvIiwNCgkJUmVhZE9ubHkgPSB0cnVlLA0KCQlCb3JkZXIgPSBmYWxzZSwNCgkJRmlsbCA9IHRydWUsDQoJCUVuYWJsZWQgPSB0cnVlLA0KCQlBdXRvU2Nyb2xsID0gdHJ1ZSwNCgkJUmljaFRleHQgPSB0cnVlLA0KCQlNYXhMaW5lcyA9IDUwDQoJfSkNCg0KCXNlbGYuQ29uc29sZSA9IENvbnNvbGUNCmVuZA0KDQpmdW5jdGlvbiBVaTpDb25zb2xlTG9nKC4uLjogc3RyaW5nPykNCglsb2NhbCBDb25zb2xlID0gc2VsZi5Db25zb2xlDQoJaWYgbm90IENvbnNvbGUgdGhlbiByZXR1cm4gZW5kDQoNCglDb25zb2xlOkFwcGVuZFRleHQoLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOk1ha2VPcHRpb25zVGFiKEluZm9TZWxlY3RvcikNCglsb2NhbCBUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9ICJPcHRpb25zIg0KCX0pDQoNCgktLS8vIEFkZCBnbG9iYWwgb3B0aW9ucw0KCVRhYjpTZXBhcmF0b3Ioe1RleHQ9IkxvZ3MifSkNCglzZWxmOkNyZWF0ZUJ1dHRvbnMoVGFiLCB7DQoJCUJhc2UgPSB7DQoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwNCgkJCUF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwNCgkJfSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGxvZ3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBUYWIgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLlRhYiBvciBuaWwNCg0KCQkJCQktLS8vIFJlbW92ZSB0aGUgUmVtb3RlIHRhYg0KCQkJCQlpZiBUYWIgdGhlbg0KCQkJCQkJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihUYWIpDQoJCQkJCWVuZA0KDQoJCQkJCS0tLy8gQ2xlYXIgYWxsIGxvZyBlbGVtZW50cw0KCQkJCQlBY3RpdmVEYXRhID0gbmlsDQoJCQkJCXNlbGY6Q2xlYXJMb2dzKCkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ2xlYXIgYmxvY2tzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJCbG9ja2VkIiwgZmFsc2UpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGV4Y2x1ZGVzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJFeGNsdWRlZCIsIGZhbHNlKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IERpc2NvcmQiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOlNldENsaXBib2FyZCgiaHR0cHM6Ly9kaXNjb3JkLmdnL3M5bmdtVURXZ2IiKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IEdpdGh1YiIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6U2V0Q2xpcGJvYXJkKCJodHRwczovL2dpdGh1Yi5jb20vZGVwdGhzby9TaWdtYS1TcHkiKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJFZGl0IFNwb29mcyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6RWRpdEZpbGUoIlJldHVybiBzcG9vZnMubHVhIiwgdHJ1ZSwgZnVuY3Rpb24oV2luZG93LCBDb250ZW50OiBzdHJpbmcpDQoJCQkJCQlXaW5kb3c6Q2xvc2UoKQ0KCQkJCQkJQ29tbUNoYW5uZWw6RmlyZSgiVXBkYXRlU3Bvb2ZzIiwgQ29udGVudCkNCgkJCQkJZW5kKQ0KCQkJCWVuZCwNCgkJCX0NCgkJfQ0KCX0pDQoNCgktLS8vIEZsYWcgb3B0aW9ucw0KCVRhYjpTZXBhcmF0b3Ioe1RleHQ9IlNldHRpbmdzIn0pDQoJc2VsZjpDcmVhdGVFbGVtZW50cyhUYWIsIEZsYWdzOkdldEZsYWdzKCkpDQoNCglzZWxmOkFkZERldGFpbHNTZWN0aW9uKFRhYikNCmVuZA0KDQpmdW5jdGlvbiBVaTpBZGREZXRhaWxzU2VjdGlvbihPcHRpb25zVGFiKQ0KCU9wdGlvbnNUYWI6U2VwYXJhdG9yKHtUZXh0PSJJbmZvcm1hdGlvbiJ9KQ0KCU9wdGlvbnNUYWI6QnVsbGV0VGV4dCh7DQoJCVJvd3MgPSB7DQoJCQkiU2lnbWEgc3B5IC0gV3JpdHRlbiBieSBkZXBzbyEiLA0KCQkJIkxpYnJhcmllczogUm9ibG94LVBhcnNlciwgRGVhci1SZUd1aSIsDQoJCQkiVGhhbmsgeW91IHN5bi5sdWEgZm9yIHN1Z2dlc3RpbmcgSSBtYWtlIHRoaXMiDQoJCX0NCgl9KQ0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soTmFtZTogc3RyaW5nKQ0KCXJldHVybiBmdW5jdGlvbiguLi4pDQoJCWlmIG5vdCBBY3RpdmVEYXRhIHRoZW4gcmV0dXJuIGVuZA0KCQlyZXR1cm4gQWN0aXZlRGF0YVtOYW1lXShBY3RpdmVEYXRhLCAuLi4pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZUVkaXRvclRhYihJbmZvU2VsZWN0b3IpDQoJbG9jYWwgRGVmYXVsdCA9IHNlbGYuRGVmYXVsdEVkaXRvckNvbnRlbnQNCglsb2NhbCBTeW50YXhDb2xvcnMgPSBDb25maWcuU3ludGF4Q29sb3JzDQoNCgktLS8vIENyZWF0ZSB0YWINCglsb2NhbCBFZGl0b3JUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9ICJFZGl0b3IiDQoJfSkNCg0KCS0tLy8gSURFDQoJbG9jYWwgQ29kZUVkaXRvciA9IEVkaXRvclRhYjpDb2RlRWRpdG9yKHsNCgkJRmlsbCA9IHRydWUsDQoJCUVkaXRhYmxlID0gdHJ1ZSwNCgkJRm9udFNpemUgPSAxMywNCgkJQ29sb3JzID0gU3ludGF4Q29sb3JzLA0KCQlGb250RmFjZSA9IFRleHRGb250LA0KCQlUZXh0ID0gRGVmYXVsdA0KCX0pDQoNCgktLS8vIEJ1dHRvbnMNCglsb2NhbCBCdXR0b25zUm93ID0gRWRpdG9yVGFiOlJvdygpDQoJc2VsZjpDcmVhdGVCdXR0b25zKEJ1dHRvbnNSb3csIHsNCgkJTm9UYWJsZSA9IHRydWUsDQoJCUJ1dHRvbnMgPSB7DQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJc2VsZjpTZXRDbGlwYm9hcmQoU2NyaXB0KQ0KCQkJCWVuZA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlJ1biIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJCWxvY2FsIEZ1bmMsIEVycm9yID0gbG9hZHN0cmluZyhTY3JpcHQsICJTaWdtYVNweS1VU0VSU0NSSVBUIikNCg0KCQkJCQktLS8vIFN5bnRheCBjaGVjaw0KCQkJCQlpZiBub3QgRnVuYyB0aGVuDQoJCQkJCQlzZWxmOlNob3dNb2RhbCh7IkVycm9yIHJ1bm5pbmcgc2NyaXB0IVxuIiwgRXJyb3J9KQ0KCQkJCQkJcmV0dXJuDQoJCQkJCWVuZA0KDQoJCQkJCUZ1bmMoKQ0KCQkJCWVuZA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkdldCByZXR1cm4iLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiR2V0UmV0dXJuIikNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJTY3JpcHQiLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiU2NyaXB0T3B0aW9ucyIpDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQnVpbGQiLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiQnVpbGRTY3JpcHQiKQ0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlBvcC1vdXQiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCQlsb2NhbCBUaWxlID0gQWN0aXZlRGF0YSBhbmQgQWN0aXZlRGF0YS5UYXNrIG9yICJTaWdtYSBTcHkiDQoJCQkJCXNlbGY6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhTY3JpcHQsIHsNCgkJCQkJCVRpdGxlID0gVGlsZQ0KCQkJCQl9KQ0KCQkJCWVuZA0KCQkJfSwNCgkJfQ0KCX0pDQoJDQoJc2VsZi5Db2RlRWRpdG9yID0gQ29kZUVkaXRvcg0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3VsZEZvY3VzKFRhYik6IGJvb2xlYW4NCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBzZWxmLkluZm9TZWxlY3Rvcg0KCWxvY2FsIEFjdGl2ZVRhYiA9IEluZm9TZWxlY3Rvci5BY3RpdmVUYWINCg0KCS0tLy8gSWYgdGhlcmUgaXMgYW4gZW1wdHkgdGFiDQoJaWYgbm90IEFjdGl2ZVRhYiB0aGVuDQoJCXJldHVybiB0cnVlDQoJZW5kDQoNCglyZXR1cm4gSW5mb1NlbGVjdG9yOkNvbXBhcmVUYWJzKEFjdGl2ZVRhYiwgVGFiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coQ29udGVudDogc3RyaW5nLCBXaW5kb3dDb25maWc6IHRhYmxlKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KFdpbmRvd0NvbmZpZykNCglsb2NhbCBCdXR0b25zID0gV2luZG93Q29uZmlnLkJ1dHRvbnMgb3Ige30NCglsb2NhbCBDb2xvcnMgPSBDb25maWcuU3ludGF4Q29sb3JzDQoNCglsb2NhbCBDb2RlRWRpdG9yID0gV2luZG93OkNvZGVFZGl0b3Ioew0KCQlUZXh0ID0gQ29udGVudCwNCgkJRWRpdGFibGUgPSB0cnVlLA0KCQlGaWxsID0gdHJ1ZSwNCgkJRm9udFNpemUgPSAxMywNCgkJQ29sb3JzID0gQ29sb3JzLA0KCQlGb250RmFjZSA9IFRleHRGb250DQoJfSkNCg0KCS0tLy8gRGVmYXVsdCBidXR0b25zDQoJdGFibGUuaW5zZXJ0KEJ1dHRvbnMsIHsNCgkJVGV4dCA9ICJDb3B5IiwNCgkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJc2VsZjpTZXRDbGlwYm9hcmQoU2NyaXB0KQ0KCQllbmQNCgl9KQ0KDQoJLS0vLyBCdXR0b25zDQoJbG9jYWwgQnV0dG9uc1JvdyA9IFdpbmRvdzpSb3coKQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhCdXR0b25zUm93LCB7DQoJCU5vVGFibGUgPSB0cnVlLA0KCQlCdXR0b25zID0gQnV0dG9ucw0KCX0pDQoNCglXaW5kb3c6Q2VudGVyKCkNCglyZXR1cm4gQ29kZUVkaXRvciwgV2luZG93DQplbmQNCg0KZnVuY3Rpb24gVWk6RWRpdEZpbGUoRmlsZVBhdGg6IHN0cmluZywgSW5Gb2xkZXI6IGJvb2xlYW4sIE9uU2F2ZUZ1bmM6ICgodGFibGUsIHN0cmluZykgLT4gbmlsKT8pDQoJbG9jYWwgRm9sZGVyID0gRmlsZXMuRm9sZGVyTmFtZQ0KCWxvY2FsIENvZGVFZGl0b3IsIFdpbmRvdw0KDQoJLS0vLyBSZWxhdGl2ZSB0byBTaWdtYSBTcHkgZm9sZGVyDQoJaWYgSW5Gb2xkZXIgdGhlbg0KCQlGaWxlUGF0aCA9IGB7Rm9sZGVyfS97RmlsZVBhdGh9YA0KCWVuZA0KDQoJLS0vLyBHZXQgZmlsZSBjb250ZW50DQoJbG9jYWwgQ29udGVudCA9IHJlYWRmaWxlKEZpbGVQYXRoKQ0KCUNvbnRlbnQgPSBDb250ZW50OmdzdWIoIlxyXG4iLCAiXG4iKQ0KCQ0KCWxvY2FsIEJ1dHRvbnMgPSB7DQoJCXsNCgkJCVRleHQgPSAiU2F2ZSIsDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCWxvY2FsIFN1Y2Nlc3MsIEVycm9yID0gbG9hZHN0cmluZyhTY3JpcHQsICJTaWdtYVNweS1FZGl0b3IiKQ0KDQoJCQkJLS0vLyBTeW50YXggY2hlY2sNCgkJCQlpZiBub3QgU3VjY2VzcyB0aGVuDQoJCQkJCXNlbGY6U2hvd01vZGFsKHsiRXJyb3Igc2F2aW5nIGZpbGUhXG4iLCBFcnJvcn0pDQoJCQkJCXJldHVybg0KCQkJCWVuZA0KCQkJCQ0KCQkJCS0tLy8gU2F2ZSBjb250ZW50cw0KCQkJCXdyaXRlZmlsZShGaWxlUGF0aCwgU2NyaXB0KQ0KDQoJCQkJLS0vLyBJbnZva2Ugb24gc2F2ZSBmdW5jdGlvbg0KCQkJCWlmIE9uU2F2ZUZ1bmMgdGhlbg0KCQkJCQlPblNhdmVGdW5jKFdpbmRvdywgU2NyaXB0KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCX0NCgl9DQoNCgktLS8vIENyZWF0ZSBFZGl0b3IgV2luZG93DQoJQ29kZUVkaXRvciwgV2luZG93ID0gc2VsZjpNYWtlRWRpdG9yUG9wb3V0V2luZG93KENvbnRlbnQsIHsNCgkJVGl0bGUgPSBgRWRpdGluZzoge0ZpbGVQYXRofWAsDQoJCUJ1dHRvbnMgPSBCdXR0b25zDQoJfSkNCmVuZA0KDQp0eXBlIE1lbnVPcHRpb25zID0gew0KCVtzdHJpbmddOiAoR3VpQnV0dG9uLCAuLi5hbnkpIC0+IG5pbA0KfQ0KZnVuY3Rpb24gVWk6TWFrZUJ1dHRvbk1lbnUoQnV0dG9uOiBJbnN0YW5jZSwgVW5wYWNrOiB0YWJsZSwgT3B0aW9uczogTWVudU9wdGlvbnMpDQoJbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCglsb2NhbCBQb3B1cCA9IFdpbmRvdzpQb3B1cENhbnZhcyh7DQoJCVJlbGF0aXZlVG8gPSBCdXR0b24sDQoJCU1heFNpemVYID0gNTAwLA0KCX0pDQoNCgktLS8vIENyZWF0ZSBTZWxlY3RhYmxlcyBmb3Igc3RyaW5nLCBmdW5jdGlvbg0KCWZvciBOYW1lLCBGdW5jIGluIE9wdGlvbnMgZG8NCgkJIFBvcHVwOlNlbGVjdGFibGUoew0KCQkJVGV4dCA9IE5hbWUsDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQlGdW5jKFByb2Nlc3M6VW5wYWNrKFVucGFjaykpDQoJCQllbmQsDQoJCX0pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6UmVtb3ZlUHJldmlvdXNUYWIoVGl0bGU6IHN0cmluZyk6IGJvb2xlYW4NCgktLS8vIE5vIHByZXZpb3VzIHRhYnMNCglpZiBub3QgQWN0aXZlRGF0YSB0aGVuIA0KCQlyZXR1cm4gZmFsc2UgDQoJZW5kDQoNCgktLS8vIFRhYlNlbGVjdG9yDQoJbG9jYWwgSW5mb1NlbGVjdG9yID0gc2VsZi5JbmZvU2VsZWN0b3INCg0KCS0tLy8gUHJldmlvdXMgZWxlbWVudHMNCglsb2NhbCBQcmV2aW91c1RhYiA9IEFjdGl2ZURhdGEuVGFiDQoJbG9jYWwgUHJldmlvdXNTZWxlY3RhYmxlID0gQWN0aXZlRGF0YS5TZWxlY3RhYmxlDQoNCgktLS8vIFJlbW92ZSBwcmV2aW91cyB0YWIgYW5kIHNldCBzZWxlY3RhYmxlIGZvY3VzDQoJbG9jYWwgVGFiRm9jdXNlZCA9IHNlbGY6U2hvdWxkRm9jdXMoUHJldmlvdXNUYWIpDQoJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihQcmV2aW91c1RhYikNCglQcmV2aW91c1NlbGVjdGFibGU6U2V0U2VsZWN0ZWQoZmFsc2UpDQoNCgktLS8vIENyZWF0ZSBuZXcgdGFiDQoJcmV0dXJuIFRhYkZvY3VzZWQNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlVGFibGVIZWFkZXJzKFRhYmxlLCBSb3dzOiB0YWJsZSkNCglsb2NhbCBIZWFkZXJSb3cgPSBUYWJsZTpIZWFkZXJSb3coKQ0KCWZvciBfLCBDYXRhZ29yeSBpbiBSb3dzIGRvDQoJCWxvY2FsIENvbHVtbiA9IEhlYWRlclJvdzpOZXh0Q29sdW1uKCkNCgkJQ29sdW1uOkxhYmVsKHtUZXh0PUNhdGFnb3J5fSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpEZWNvbXBpbGUoRWRpdG9yOiB0YWJsZSwgU2NyaXB0OiBTY3JpcHQpDQoJbG9jYWwgSGVhZGVyID0gIi0tQk9PSUlJSSBUSElTIElTIFNPIFRVRkYgRkxJUFBZIFNLSUJJREkgQVVSQSAoU0lHTUEgU1BZKSINCglFZGl0b3I6U2V0VGV4dCgiLS1EZWNvbXBpbGluZy4uLiArOTk5OTk5OSBBVVJBIChtYW5nbyBwaG9uaykiKQ0KDQoJLS0vLyBEZWNvbXBpbGUgc2NyaXB0DQoJbG9jYWwgRGVjb21waWxlZCwgSXNFcnJvciA9IFByb2Nlc3M6RGVjb21waWxlKFNjcmlwdCkNCg0KCS0tLy8gQWRkIGhlYWRlciBmb3Igc3VjY2Vzc2Z1bCBkZWNvbXBpbGF0aW9ucw0KCWlmIG5vdCBJc0Vycm9yIHRoZW4NCgkJRGVjb21waWxlZCA9IGB7SGVhZGVyfVxue0RlY29tcGlsZWR9YA0KCWVuZA0KDQoJRWRpdG9yOlNldFRleHQoRGVjb21waWxlZCkNCmVuZA0KDQp0eXBlIERpc3BsYXlUYWJsZUNvbmZpZyA9IHsNCglSb3dzOiB0YWJsZSwNCglGbGFnczogdGFibGU/LA0KCVRvRGlzcGxheTogdGFibGUsDQoJVGFibGU6IHRhYmxlDQp9DQpmdW5jdGlvbiBVaTpEaXNwbGF5VGFibGUoUGFyZW50LCBDb25maWc6IERpc3BsYXlUYWJsZUNvbmZpZyk6IHRhYmxlDQoJLS0vLyBDb25maWd1cmF0aW9uDQoJbG9jYWwgUm93cyA9IENvbmZpZy5Sb3dzDQoJbG9jYWwgRmxhZ3MgPSBDb25maWcuRmxhZ3MNCglsb2NhbCBEYXRhVGFibGUgPSBDb25maWcuVGFibGUNCglsb2NhbCBUb0Rpc3BsYXkgPSBDb25maWcuVG9EaXNwbGF5DQoNCglGbGFncy5NYXhDb2x1bW5zID0gI1Jvd3MNCg0KCS0tLy8gQ3JlYXRlIHRhYmxlDQoJbG9jYWwgVGFibGUgPSBQYXJlbnQ6VGFibGUoRmxhZ3MpDQoNCgktLS8vIFRhYmxlIGhlYWRlcnMNCglzZWxmOk1ha2VUYWJsZUhlYWRlcnMoVGFibGUsIFJvd3MpDQoNCgktLS8vIFRhYmxlIGxheW91dA0KCWZvciBSb3dJbmRleCwgTmFtZSBpbiBUb0Rpc3BsYXkgZG8NCgkJbG9jYWwgUm93ID0gVGFibGU6Um93KCkNCgkJDQoJCS0tLy8gQ3JlYXRlIENvbHVtbnMNCgkJZm9yIENvdW50LCBDYXRhZ29yeSBpbiBSb3dzIGRvDQoJCQlsb2NhbCBDb2x1bW4gPSBSb3c6TmV4dENvbHVtbigpDQoJCQkNCgkJCS0tLy8gVmFsdWUgdGV4dA0KCQkJbG9jYWwgVmFsdWUgPSBDYXRhZ29yeSA9PSAiTmFtZSIgYW5kIE5hbWUgb3IgRGF0YVRhYmxlW05hbWVdDQoJCQlpZiBub3QgVmFsdWUgdGhlbiBjb250aW51ZSBlbmQNCg0KCQkJLS0vLyBDcmVhdGUgZmlsdGVyZWQgbGFiZWwNCgkJCWxvY2FsIFN0cmluZyA9IHNlbGY6RmlsdGVyTmFtZShge1ZhbHVlfWAsIDE1MCkNCgkJCUNvbHVtbjpMYWJlbCh7VGV4dD1TdHJpbmd9KQ0KCQllbmQNCgllbmQNCg0KCXJldHVybiBUYWJsZQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldEZvY3VzZWRSZW1vdGUoRGF0YSkNCgktLS8vIFVucGFjayByZW1vdGUgZGF0YQ0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCglsb2NhbCBJc1JlY2VpdmUgPSBEYXRhLklzUmVjZWl2ZQ0KCWxvY2FsIFNjcmlwdCA9IERhdGEuQ2FsbGluZ1NjcmlwdA0KCWxvY2FsIENsYXNzRGF0YSA9IERhdGEuQ2xhc3NEYXRhDQoJbG9jYWwgSGVhZGVyRGF0YSA9IERhdGEuSGVhZGVyRGF0YQ0KCWxvY2FsIFZhbHVlU3dhcHMgPSBEYXRhLlZhbHVlU3dhcHMNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoJbG9jYWwgSWQgPSBEYXRhLklkDQoNCgktLS8vIEZsYWdzDQoJbG9jYWwgVGFibGVBcmdzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJUYWJsZUFyZ3MiKQ0KCWxvY2FsIE5vVmFyaWFibGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1ZhcmlhYmxlcyIpDQoNCgktLS8vIFVucGFjayBpbmZvDQoJbG9jYWwgUmVtb3RlRGF0YSA9IFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZCkNCglsb2NhbCBJc1JlbW90ZUZ1bmN0aW9uID0gQ2xhc3NEYXRhLklzUmVtb3RlRnVuY3Rpb24NCglsb2NhbCBSZW1vdGVOYW1lID0gc2VsZjpGaWx0ZXJOYW1lKGB7UmVtb3RlfWAsIDUwKQ0KDQoJLS0vLyBVSSBkYXRhDQoJbG9jYWwgQ29kZUVkaXRvciA9IHNlbGYuQ29kZUVkaXRvcg0KCWxvY2FsIFRvRGlzcGxheSA9IHNlbGYuRGlzcGxheVJlbW90ZUluZm8NCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBzZWxmLkluZm9TZWxlY3Rvcg0KDQoJbG9jYWwgVGFiRm9jdXNlZCA9IHNlbGY6UmVtb3ZlUHJldmlvdXNUYWIoKQ0KCWxvY2FsIFRhYiA9IEluZm9TZWxlY3RvcjpDcmVhdGVUYWIoew0KCQlOYW1lID0gc2VsZjpGaWx0ZXJOYW1lKGBSZW1vdGU6IHtSZW1vdGVOYW1lfWAsIDUwKSwNCgkJRm9jdXNlZCA9IFRhYkZvY3VzZWQNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHBhcnNlcg0KCWxvY2FsIE1vZHVsZSA9IEdlbmVyYXRpb246TmV3UGFyc2VyKHsNCgkJTm9WYXJpYWJsZXMgPSBOb1ZhcmlhYmxlcw0KCX0pDQoJbG9jYWwgUGFyc2VyID0gTW9kdWxlLlBhcnNlcg0KCWxvY2FsIEZvcm1hdHRlciA9IE1vZHVsZS5Gb3JtYXR0ZXINCglGb3JtYXR0ZXI6U2V0VmFsdWVTd2FwcyhWYWx1ZVN3YXBzKQ0KDQoJLS0vLyBTZXQgdGhpcyBsb2cgdG8gYmUgc2VsZWN0ZWQNCglBY3RpdmVEYXRhID0gRGF0YQ0KCURhdGEuVGFiID0gVGFiDQoJRGF0YS5TZWxlY3RhYmxlOlNldFNlbGVjdGVkKHRydWUpDQoNCglsb2NhbCBmdW5jdGlvbiBTZXRJREVUZXh0KENvbnRlbnQ6IHN0cmluZywgVGFzazogc3RyaW5nPykNCgkJRGF0YS5UYXNrID0gVGFzayBvciAiU2lnbWEgU3B5Ig0KCQlDb2RlRWRpdG9yOlNldFRleHQoQ29udGVudCkNCgllbmQNCglsb2NhbCBmdW5jdGlvbiBEYXRhQ29ubmVjdGlvbihOYW1lLCAuLi4pDQoJCWxvY2FsIEFyZ3MgPSB7Li4ufQ0KCQlyZXR1cm4gZnVuY3Rpb24oKQ0KCQkJcmV0dXJuIERhdGFbTmFtZV0oRGF0YSwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVuZA0KCWVuZA0KCWxvY2FsIGZ1bmN0aW9uIFNjcmlwdENoZWNrKFNjcmlwdCwgTm9NaXNzaW5nQ2hlY2s6IGJvb2xlYW4pOiBib29sZWFuPw0KCQktLS8vIFJlamVjdCBjbGllbnQgZXZlbnRzDQoJCWlmIElzUmVjZWl2ZSB0aGVuIA0KCQkJVWk6U2hvd01vZGFsKHsNCgkJCQkiUmVjaWV2ZXMgZG8gbm90IGhhdmUgYSBzY3JpcHQgYmVjYXVzZSBpdCdzIGEgQ29ubmVjdGlvbiINCgkJCX0pDQoJCQlyZXR1cm4gDQoJCWVuZA0KDQoJCS0tLy8gQ2hlY2sgaWYgc2NyaXB0IGV4aXN0cw0KCQlpZiBub3QgU2NyaXB0IGFuZCBub3QgTm9NaXNzaW5nQ2hlY2sgdGhlbiANCgkJCVVpOlNob3dNb2RhbCh7IlRoZSBTY3JpcHQgaGFzIGJlZW4gZGVzdHJveWVkIGJ5IHRoZSBnYW1lICgtOTk5OTk5OSBBVVJBKSJ9KQ0KCQkJcmV0dXJuDQoJCWVuZA0KDQoJCXJldHVybiB0cnVlDQoJZW5kDQoNCgktLS8vIEZ1bmN0aW9ucw0KCWZ1bmN0aW9uIERhdGE6U2NyaXB0T3B0aW9ucyhCdXR0b246IEd1aUJ1dHRvbikNCgkJVWk6TWFrZUJ1dHRvbk1lbnUoQnV0dG9uLCB7c2VsZn0sIHsNCgkJCVsiQ2FsbGVyIEluZm8iXSA9IERhdGFDb25uZWN0aW9uKCJHZW5lcmF0ZUluZm8iKSwNCgkJCVsiRGVjb21waWxlIl0gPSBEYXRhQ29ubmVjdGlvbigiRGVjb21waWxlIiwgIlNvdXJjZVNjcmlwdCIpLA0KCQkJWyJEZWNvbXBpbGUgQ2FsbGluZyJdID0gRGF0YUNvbm5lY3Rpb24oIkRlY29tcGlsZSIsICJDYWxsaW5nU2NyaXB0IiksDQoJCQlbIlJlcGVhdCBDYWxsIl0gPSBEYXRhQ29ubmVjdGlvbigiUmVwZWF0Q2FsbCIpLA0KCQkJWyJTYXZlIEJ5dGVjb2RlIl0gPSBEYXRhQ29ubmVjdGlvbigiU2F2ZUJ5dGVjb2RlIiksDQoJCX0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpCdWlsZFNjcmlwdChCdXR0b246IEd1aUJ1dHRvbikNCgkJVWk6TWFrZUJ1dHRvbk1lbnUoQnV0dG9uLCB7c2VsZn0sIHsNCgkJCVsiQ2FsbCBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlJlbW90ZSIpLA0KCQkJWyJCbG9jayBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIkJsb2NrIiksDQoJCQlbIlJlcGVhdCBGb3IiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlJlcGVhdCIpLA0KCQkJWyJTcGFtIFJlbW90ZSJdID0gRGF0YUNvbm5lY3Rpb24oIk1ha2VTY3JpcHQiLCAiU3BhbSIpDQoJCX0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpTYXZlQnl0ZWNvZGUoKQ0KCQktLS8vIFByb2JsZW0gY2hlY2sNCgkJaWYgbm90IFNjcmlwdENoZWNrKFNjcmlwdCwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJLS0vLyBnZXRzY3JpcHRieXRlY29kZQ0KICAgIAlsb2NhbCBTdWNjZXNzLCBCeXRlY29kZSA9IHBjYWxsKGdldHNjcmlwdGJ5dGVjb2RlLCBTY3JpcHQpDQoJCWlmIG5vdCBTdWNjZXNzIHRoZW4NCgkJCVVpOlNob3dNb2RhbCh7IkZhaWxlZCB0byBnZXQgU2NyaXB0ZSBieXRlY29kZSAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCg0KCQktLS8vIFNhdmUgZmlsZQ0KCQlsb2NhbCBQYXRoQmFzZSA9IGB7U2NyaXB0fSAlcy50eHRgDQoJCWxvY2FsIEZpbGVQYXRoID0gR2VuZXJhdGlvbjpUaW1lU3RhbXBGaWxlKFBhdGhCYXNlKQ0KCQl3cml0ZWZpbGUoRmlsZVBhdGgsIEJ5dGVjb2RlKQ0KDQoJCVVpOlNob3dNb2RhbCh7IlNhdmVkIGJ5dGVjb2RlIHRvIiwgRmlsZVBhdGh9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6TWFrZVNjcmlwdChTY3JpcHRUeXBlOiBzdHJpbmcpDQoJCWxvY2FsIFNjcmlwdCA9IEdlbmVyYXRpb246UmVtb3RlU2NyaXB0KE1vZHVsZSwgc2VsZiwgU2NyaXB0VHlwZSkNCgkJU2V0SURFVGV4dChTY3JpcHQsIGBFZGl0aW5nOiB7UmVtb3RlTmFtZX0ubHVhYCkNCgllbmQNCglmdW5jdGlvbiBEYXRhOlJlcGVhdENhbGwoKQ0KCQlsb2NhbCBTaWduYWwgPSBIb29rOkluZGV4KFJlbW90ZSwgTWV0aG9kKQ0KDQoJCWlmIElzUmVjZWl2ZSB0aGVuDQoJCQlmaXJlc2lnbmFsKFNpZ25hbCwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVsc2UNCgkJCVNpZ25hbChSZW1vdGUsIFByb2Nlc3M6VW5wYWNrKEFyZ3MpKQ0KCQllbmQNCgllbmQNCglmdW5jdGlvbiBEYXRhOkdldFJldHVybigpDQoJCWxvY2FsIFJldHVyblZhbHVlcyA9IHNlbGYuUmV0dXJuVmFsdWVzDQoNCgkJLS0vLyBFcnJvciBtZXNzYWdlcw0KCQlpZiBub3QgSXNSZW1vdGVGdW5jdGlvbiB0aGVuDQoJCQlVaTpTaG93TW9kYWwoeyJUaGUgUmVtb3RlIGlzIG5vdCBhIFJlbW90ZSBGdW5jdGlvbiAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCgkJaWYgbm90IFJldHVyblZhbHVlcyB0aGVuDQoJCQlVaTpTaG93TW9kYWwoeyJObyByZXR1cm4gdmFsdWVzICgtOTk5OTk5OSBBVVJBKSJ9KQ0KCQkJcmV0dXJuDQoJCWVuZA0KDQoJCS0tLy8gR2VuZXJhdGUgc2NyaXB0DQoJCWxvY2FsIFNjcmlwdCA9IEdlbmVyYXRpb246VGFibGVTY3JpcHQoTW9kdWxlLCBSZXR1cm5WYWx1ZXMpDQoJCVNldElERVRleHQoU2NyaXB0LCBgUmV0dXJuIFZhbHVlcyBmb3I6IHtSZW1vdGVOYW1lfWApDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpHZW5lcmF0ZUluZm8oKQ0KCQktLS8vIFByb2JsZW0gY2hlY2sNCgkJaWYgbm90IFNjcmlwdENoZWNrKG5pbCwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpBZHZhbmNlZEluZm8oTW9kdWxlLCBzZWxmKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYEFkdmFuY2VkIEluZm8gZm9yOiB7UmVtb3RlTmFtZX1gKQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6RGVjb21waWxlKFdoaWNoU2NyaXB0OiBzdHJpbmcpDQoJCWxvY2FsIERlY29tcGlsZVBvcG91dCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiRGVjb21waWxlUG9wb3V0IikNCgkJbG9jYWwgVG9EZWNvbXBpbGUgPSBEYXRhW1doaWNoU2NyaXB0XQ0KCQlsb2NhbCBFZGl0b3IgPSBDb2RlRWRpdG9yDQoNCgkJLS0vLyBQcm9ibGVtIGNoZWNrDQoJCWlmIG5vdCBTY3JpcHRDaGVjayhUb0RlY29tcGlsZSwgdHJ1ZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJbG9jYWwgVGFzayA9IFVpOkZpbHRlck5hbWUoYFZpZXdpbmc6IHtUb0RlY29tcGlsZX0ubHVhYCwgMjAwKQ0KCQkNCgkJLS0vLyBBdXRvbWF0aWNhbGx5IFBvcC1vdXQgdGhlIGVkaXRvciBmb3IgZGVjb21waWxpbmcgaWYgZW5hYmxlZA0KCQlpZiBEZWNvbXBpbGVQb3BvdXQgdGhlbg0KCQkJRWRpdG9yID0gVWk6TWFrZUVkaXRvclBvcG91dFdpbmRvdygiIiwgew0KCQkJCVRpdGxlID0gVGFzaw0KCQkJfSkNCgkJZW5kDQoNCgkJVWk6RGVjb21waWxlKEVkaXRvciwgVG9EZWNvbXBpbGUpDQoJZW5kDQoJDQoJLS0vLyBSZW1vdGVPcHRpb25zDQoJc2VsZjpDcmVhdGVPcHRpb25zRm9yRGljdChUYWIsIFJlbW90ZURhdGEsIGZ1bmN0aW9uKCkNCgkJUHJvY2VzczpVcGRhdGVSZW1vdGVEYXRhKElkLCBSZW1vdGVEYXRhKQ0KCWVuZCkNCg0KCS0tLy8gSW5zdGFuY2Ugb3B0aW9ucw0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhUYWIsIHsNCgkJQmFzZSA9IHsNCgkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApLA0KCQkJQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZLA0KCQl9LA0KCQlCdXR0b25zID0gew0KCQkJew0KCQkJCVRleHQgPSAiQ29weSBzY3JpcHQgcGF0aCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVNldENsaXBib2FyZChQYXJzZXI6TWFrZVBhdGhTdHJpbmcoew0KCQkJCQkJT2JqZWN0ID0gU2NyaXB0LA0KCQkJCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCQkJCX0pKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IHJlbW90ZSBwYXRoIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJU2V0Q2xpcGJvYXJkKFBhcnNlcjpNYWtlUGF0aFN0cmluZyh7DQoJCQkJCQlPYmplY3QgPSBSZW1vdGUsDQoJCQkJCQlOb1ZhcmlhYmxlcyA9IHRydWUNCgkJCQkJfSkpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlJlbW92ZSBsb2ciLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlJbmZvU2VsZWN0b3I6UmVtb3ZlVGFiKFRhYikNCgkJCQkJRGF0YS5TZWxlY3RhYmxlOlJlbW92ZSgpDQoJCQkJCUhlYWRlckRhdGE6UmVtb3ZlKCkNCgkJCQkJQWN0aXZlRGF0YSA9IG5pbA0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJEdW1wIGxvZ3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBMb2dzID0gSGVhZGVyRGF0YS5FbnRyaWVzDQoJCQkJCWxvY2FsIEZpbGVQYXRoID0gR2VuZXJhdGlvbjpEdW1wTG9ncyhMb2dzKQ0KCQkJCQlzZWxmOlNob3dNb2RhbCh7IlNhdmVkIGR1bXAgdG8iLCBGaWxlUGF0aH0pDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlZpZXcgQ29ubmVjdGlvbnMiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBNZXRob2QgPSBDbGFzc0RhdGEuUmVjZWl2ZVsxXQ0KCQkJCQlsb2NhbCBTaWduYWwgPSBSZW1vdGVbTWV0aG9kXQ0KCQkJCQlzZWxmOlZpZXdDb25uZWN0aW9ucyhSZW1vdGVOYW1lLCBTaWduYWwpDQoJCQkJZW5kLA0KCQkJfQ0KCQl9DQoJfSkNCg0KCS0tLy8gUmVtb3RlIGluZm9ybWF0aW9uIHRhYmxlDQoJc2VsZjpEaXNwbGF5VGFibGUoVGFiLCB7DQoJCVJvd3MgPSB7Ik5hbWUiLCAiVmFsdWUifSwNCgkJVGFibGUgPSBEYXRhLA0KCQlUb0Rpc3BsYXkgPSBUb0Rpc3BsYXksDQoJCUZsYWdzID0gew0KCQkJQm9yZGVyID0gdHJ1ZSwNCgkJCVJvd0JhY2tncm91bmQgPSB0cnVlLA0KCQkJTWF4Q29sdW1ucyA9IDINCgkJfQ0KCX0pDQoJDQoJLS0vLyBBcmd1bWVudHMgdGFibGUgc2NyaXB0DQoJaWYgVGFibGVBcmdzIHRoZW4NCgkJbG9jYWwgUGFyc2VkID0gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIEFyZ3MpDQoJCVNldElERVRleHQoUGFyc2VkLCBgQXJndW1lbnRzIGZvciB7UmVtb3RlTmFtZX1gKQ0KCQlyZXR1cm4NCgllbmQNCg0KCS0tLy8gUmVtb3RlIGNhbGwgc2NyaXB0DQoJRGF0YTpNYWtlU2NyaXB0KCJSZW1vdGUiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlZpZXdDb25uZWN0aW9ucyhSZW1vdGVOYW1lOiBzdHJpbmcsIFNpZ25hbDogUkJYU2NyaXB0Q29ubmVjdGlvbikNCglsb2NhbCBXaW5kb3cgPSBzZWxmOkNyZWF0ZVdpbmRvdyh7DQoJCVRpdGxlID0gYENvbm5lY3Rpb25zIGZvcjoge1JlbW90ZU5hbWV9YCwNCgkJU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNDUwLCAyNTApDQoJfSkNCg0KCWxvY2FsIFRvRGlzcGxheSA9IHsNCgkJIkVuYWJsZWQiLA0KCQkiTHVhQ29ubmVjdGlvbiIsDQoJCSJTY3JpcHQiDQoJfQ0KDQoJLS0vLyBHZXQgRmlsdGVyZWQgY29ubmVjdGlvbnMNCglsb2NhbCBDb25uZWN0aW9ucyA9IFByb2Nlc3M6RmlsdGVyQ29ubmVjdGlvbnMoU2lnbmFsLCBUb0Rpc3BsYXkpDQoNCgktLS8vIFRhYmxlDQoJbG9jYWwgVGFibGUgPSBXaW5kb3c6VGFibGUoew0KCQlCb3JkZXIgPSB0cnVlLA0KCQlSb3dCYWNrZ3JvdW5kID0gdHJ1ZSwNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KQ0KDQoJbG9jYWwgQnV0dG9uc0ZvclZhbHVlcyA9IHsNCgkJWyJTY3JpcHQiXSA9IGZ1bmN0aW9uKFJvdywgVmFsdWUpDQoJCQlSb3c6QnV0dG9uKHsNCgkJCQlUZXh0ID0gIkRlY29tcGlsZSIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFRhc2sgPSBzZWxmOkZpbHRlck5hbWUoYFZpZXdpbmc6IHtWYWx1ZX0ubHVhYCwgMjAwKQ0KCQkJCQlsb2NhbCBFZGl0b3IgPSBzZWxmOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3cobmlsLCB7DQoJCQkJCQlUaXRsZSA9IFRhc2sNCgkJCQkJfSkNCgkJCQkJc2VsZjpEZWNvbXBpbGUoRWRpdG9yLCBWYWx1ZSkNCgkJCQllbmQNCgkJCX0pDQoJCWVuZCwNCgkJWyJFbmFibGVkIl0gPSBmdW5jdGlvbihSb3csIEVuYWJsZWQsIENvbm5lY3Rpb24pDQoJCQlSb3c6QnV0dG9uKHsNCgkJCQlUZXh0ID0gRW5hYmxlZCBhbmQgIkRpc2FibGUiIG9yICJFbmFibGUiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oc2VsZikNCgkJCQkJRW5hYmxlZCA9IG5vdCBFbmFibGVkDQoJCQkJCXNlbGYuVGV4dCA9IEVuYWJsZWQgYW5kICJEaXNhYmxlIiBvciAiRW5hYmxlIg0KDQoJCQkJCS0tLy8gRW5hYmxlIG9yIGRpc2FibGUgdGhlIGNvbm5lY3Rpb24NCgkJCQkJaWYgRW5hYmxlZCB0aGVuDQoJCQkJCQlDb25uZWN0aW9uOkVuYWJsZSgpDQoJCQkJCWVsc2UNCgkJCQkJCUNvbm5lY3Rpb246RGlzYWJsZSgpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJfSkNCgkJZW5kDQoJfQ0KDQoJLS0vLyBNYWtlIGhlYWRlcnMgb24gdGhlIHRhYmxlDQoJc2VsZjpNYWtlVGFibGVIZWFkZXJzKFRhYmxlLCBUb0Rpc3BsYXkpDQoNCglmb3IgXywgQ29ubmVjdGlvbiBpbiBDb25uZWN0aW9ucyBkbw0KCQlsb2NhbCBSb3cgPSBUYWJsZTpSb3coKQ0KDQoJCWZvciBfLCBQcm9wZXJ0eSBpbiBUb0Rpc3BsYXkgZG8NCgkJCWxvY2FsIENvbHVtbiA9IFJvdzpOZXh0Q29sdW1uKCkNCgkJCWxvY2FsIENvbHVtblJvdyA9IENvbHVtbjpSb3coKQ0KDQoJCQlsb2NhbCBWYWx1ZSA9IENvbm5lY3Rpb25bUHJvcGVydHldDQoJCQlsb2NhbCBDYWxsYmFjayA9IEJ1dHRvbnNGb3JWYWx1ZXNbUHJvcGVydHldDQoNCgkJCS0tLy8gVmFsdWUgbGFiZWwNCgkJCUNvbHVtblJvdzpMYWJlbCh7VGV4dD1ge1ZhbHVlfWB9KQ0KDQoJCQktLS8vIEFkZCBidXR0b25zDQoJCQlpZiBDYWxsYmFjayB0aGVuDQoJCQkJQ2FsbGJhY2soQ29sdW1uUm93LCBWYWx1ZSwgQ29ubmVjdGlvbikNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCS0tLy8gQ2VudGVyIFdpbmRvdw0KCVdpbmRvdzpDZW50ZXIoKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkdldFJlbW90ZUhlYWRlcihEYXRhOiBMb2cpDQoJbG9jYWwgTG9nTGltaXQgPSBzZWxmLkxvZ0xpbWl0DQoJbG9jYWwgTG9ncyA9IHNlbGYuTG9ncw0KCWxvY2FsIFJlbW90ZXNMaXN0ID0gc2VsZi5SZW1vdGVzTGlzdA0KDQoJLS0vLyBSZW1vdGUgaW5mbw0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgUmVtb3RlTmFtZSA9IHNlbGY6RmlsdGVyTmFtZShge1JlbW90ZX1gLCAzMCkNCg0KCS0tLy8gTm9UcmVlTm9kZXMNCglsb2NhbCBOb1RyZWVOb2RlcyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTm9UcmVlTm9kZXMiKQ0KDQoJLS0vLyBDaGVjayBmb3IgZXhpc3RpbmcgVHJlZU5vZGUNCglsb2NhbCBFeGlzdGluZyA9IExvZ3NbSWRdDQoJaWYgRXhpc3RpbmcgdGhlbiByZXR1cm4gRXhpc3RpbmcgZW5kDQoNCgktLS8vIEhlYWRlciBkYXRhDQoJbG9jYWwgSGVhZGVyRGF0YSA9IHsJDQoJCUxvZ0NvdW50ID0gMCwNCgkJRGF0YSA9IERhdGEsDQoJCUVudHJpZXMgPSB7fQ0KCX0NCg0KCS0tLy8gSW5jcmVtZW50IHRyZWVub2RlIGNvdW50DQoJUmVtb3Rlc0NvdW50ICs9IDENCg0KCS0tLy8gQ3JlYXRlIG5ldyB0cmVlbm9kZSBlbGVtZW50DQoJaWYgbm90IE5vVHJlZU5vZGVzIHRoZW4NCgkJSGVhZGVyRGF0YS5UcmVlTm9kZSA9IFJlbW90ZXNMaXN0OlRyZWVOb2RlKHsNCgkJCUxheW91dE9yZGVyID0gLTEgKiBSZW1vdGVzQ291bnQsDQoJCQlUaXRsZSA9IFJlbW90ZU5hbWUNCgkJfSkNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6Q2hlY2tMaW1pdCgpDQoJCWxvY2FsIEVudHJpZXMgPSBzZWxmLkVudHJpZXMNCgkJaWYgI0VudHJpZXMgPCBMb2dMaW1pdCB0aGVuIHJldHVybiBlbmQNCgkJCQ0KCQktLS8vIEdldCBhbmQgcmVtb3ZlIGxhc3QgZWxlbWVudA0KCQlsb2NhbCBMb2cgPSB0YWJsZS5yZW1vdmUoRW50cmllcywgMSkNCgkJTG9nLlNlbGVjdGFibGU6UmVtb3ZlKCkNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6TG9nQWRkZWQoRGF0YSkNCgkJLS0vLyBJbmNyZW1lbnQgbG9nIGNvdW50DQoJCXNlbGYuTG9nQ291bnQgKz0gMQ0KCQlzZWxmOkNoZWNrTGltaXQoKQ0KDQoJCS0tLy8gQWRkIGVudHJ5DQoJCWxvY2FsIEVudHJpZXMgPSBzZWxmLkVudHJpZXMNCgkJdGFibGUuaW5zZXJ0KEVudHJpZXMsIERhdGEpDQoJCQ0KCQlyZXR1cm4gc2VsZg0KCWVuZA0KDQoJZnVuY3Rpb24gSGVhZGVyRGF0YTpSZW1vdmUoKQ0KCQktLS8vIFJlbW92ZSBUcmVlTm9kZQ0KCQlsb2NhbCBUcmVlTm9kZSA9IHNlbGYuVHJlZU5vZGUNCgkJaWYgVHJlZU5vZGUgdGhlbg0KCQkJVHJlZU5vZGU6UmVtb3ZlKCkNCgkJZW5kDQoNCgkJLS0vLyBDbGVhciB0YWJsZXMgZnJvbSBtZW1vcnkNCgkJTG9nc1tJZF0gPSBuaWwNCgkJdGFibGUuY2xlYXIoSGVhZGVyRGF0YSkNCgllbmQNCg0KCUxvZ3NbSWRdID0gSGVhZGVyRGF0YQ0KCXJldHVybiBIZWFkZXJEYXRhDQplbmQNCg0KZnVuY3Rpb24gVWk6Q2xlYXJMb2dzKCkNCglsb2NhbCBMb2dzID0gc2VsZi5Mb2dzDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCgktLS8vIENsZWFyIGFsbCBlbGVtZW50cw0KCVJlbW90ZXNDb3VudCA9IDANCglSZW1vdGVzTGlzdDpDbGVhckNoaWxkRWxlbWVudHMoKQ0KDQoJLS0vLyBDbGVhciBsb2dzIGZyb20gbWVtb3J5DQoJdGFibGUuY2xlYXIoTG9ncykNCmVuZA0KDQpmdW5jdGlvbiBVaTpRdWV1ZUxvZyhEYXRhKQ0KCWxvY2FsIExvZ1F1ZXVlID0gc2VsZi5Mb2dRdWV1ZQ0KICAgIHRhYmxlLmluc2VydChMb2dRdWV1ZSwgRGF0YSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpQcm9jZXNzTG9nUXVldWUoKQ0KCWxvY2FsIFF1ZXVlID0gc2VsZi5Mb2dRdWV1ZQ0KICAgIGlmICNRdWV1ZSA8PSAwIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBDcmVhdGUgYSBsb2cgZWxlbWVudCBmb3IgZWFjaCBpbiB0aGUgUXVldWUNCiAgICBmb3IgSW5kZXgsIERhdGEgaW4gbmV4dCwgUXVldWUgZG8NCiAgICAgICAgc2VsZjpDcmVhdGVMb2coRGF0YSkNCiAgICAgICAgdGFibGUucmVtb3ZlKFF1ZXVlLCBJbmRleCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpCZWdpbkxvZ1NlcnZpY2UoKQ0KCWNvcm91dGluZS53cmFwKGZ1bmN0aW9uKCkNCgkJd2hpbGUgdHJ1ZSBkbw0KCQkJc2VsZjpQcm9jZXNzTG9nUXVldWUoKQ0KCQkJdGFzay53YWl0KCkNCgkJZW5kDQoJZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gVWk6RmlsdGVyTmFtZShOYW1lOiBzdHJpbmcsIENoYXJhY3RlckxpbWl0OiBudW1iZXI/KTogc3RyaW5nDQoJbG9jYWwgVHJpbW1lZCA9IE5hbWU6c3ViKDEsIENoYXJhY3RlckxpbWl0IG9yIDIwKQ0KCWxvY2FsIEZpbHRyZWQgPSBUcmltbWVkOmdzdWIoIltcblxyXSIsICIiKQ0KCUZpbHRyZWQgPSBHZW5lcmF0aW9uOk1ha2VQcmludGFibGUoRmlsdHJlZCkNCg0KCXJldHVybiBGaWx0cmVkDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlTG9nKERhdGE6IExvZykNCgktLS8vIFVucGFjayBsb2cgZGF0YQ0KICAgIGxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQogICAgbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBJZCA9IERhdGEuSWQNCglsb2NhbCBUaW1lc3RhbXAgPSBEYXRhLlRpbWVzdGFtcA0KCWxvY2FsIElzRXhwbG9pdCA9IERhdGEuSXNFeHBsb2l0DQoJDQoJbG9jYWwgSXNOaWxQYXJlbnQgPSBIb29rOkluZGV4KFJlbW90ZSwgIlBhcmVudCIpID09IG5pbA0KCWxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQoNCgktLS8vIFBhdXNlZA0KCWxvY2FsIFBhdXNlZCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiUGF1c2VkIikNCglpZiBQYXVzZWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENoZWNrIGNhbGxlciAoSWdub3JlIGV4cGxvaXQgY2FsbHMpDQoJbG9jYWwgTG9nRXhwbG9pdCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTG9nRXhwbG9pdCIpDQoJaWYgbm90IExvZ0V4cGxvaXQgYW5kIElzRXhwbG9pdCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gSWdub3JlTmlsDQoJbG9jYWwgSWdub3JlTmlsID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJJZ25vcmVOaWwiKQ0KCWlmIElnbm9yZU5pbCBhbmQgSXNOaWxQYXJlbnQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIExvZ1JlY2l2ZXMgY2hlY2sNCglsb2NhbCBMb2dSZWNpdmVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJMb2dSZWNpdmVzIikNCglpZiBub3QgTG9nUmVjaXZlcyBhbmQgSXNSZWNlaXZlIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgU2VsZWN0TmV3ZXN0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJTZWxlY3ROZXdlc3QiKQ0KCWxvY2FsIE5vVHJlZU5vZGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1RyZWVOb2RlcyIpDQoNCiAgICAtLS8vIEV4Y2x1ZGVkIGNoZWNrDQogICAgaWYgUmVtb3RlRGF0YS5FeGNsdWRlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gRGVzZXJpYWxpemUgYXJndW1lbnRzDQoJQXJncyA9IENvbW11bmljYXRpb246RGVzZXJpYWxpemVUYWJsZShBcmdzKQ0KDQoJLS0vLyBEZWVwIGNsb25lIGRhdGENCglsb2NhbCBDbG9uZWRBcmdzID0gUHJvY2VzczpEZWVwQ2xvbmVUYWJsZShBcmdzKQ0KCURhdGEuQXJncyA9IENsb25lZEFyZ3MNCglEYXRhLlZhbHVlU3dhcHMgPSBHZW5lcmF0aW9uOk1ha2VWYWx1ZVN3YXBzVGFibGUoVGltZXN0YW1wKQ0KDQoJLS0vLyBHZW5lcmF0ZSBsb2cgdGl0bGUNCglsb2NhbCBDb2xvciA9IENvbmZpZy5NZXRob2RDb2xvcnNbTWV0aG9kOmxvd2VyKCldDQoJbG9jYWwgVGV4dCA9IE5vVHJlZU5vZGVzIGFuZCBge1JlbW90ZX0gfCB7TWV0aG9kfWAgb3IgTWV0aG9kDQoNCgktLS8vIEZpbmRTdHJpbmdGb3JOYW1lIGNoZWNrDQoJbG9jYWwgRmluZFN0cmluZyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiRmluZFN0cmluZ0Zvck5hbWUiKQ0KCWlmIEZpbmRTdHJpbmcgdGhlbg0KCQlmb3IgXywgQXJnIGluIG5leHQsIENsb25lZEFyZ3MgZG8NCgkJCWlmIHR5cGVvZihBcmcpID09ICJzdHJpbmciIHRoZW4NCgkJCQlsb2NhbCBGaWx0cmVkID0gc2VsZjpGaWx0ZXJOYW1lKEFyZykNCgkJCQlUZXh0ID0gYHtGaWx0cmVkfSB8IHtUZXh0fWANCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBGZXRjaCBIZWFkZXJEYXRhIGJ5IHRoZSBSZW1vdGVJRCB1c2VkIGZvciBzdGFja2luZw0KCWxvY2FsIEhlYWRlciA9IHNlbGY6R2V0UmVtb3RlSGVhZGVyKERhdGEpDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCglsb2NhbCBMb2dDb3VudCA9IEhlYWRlci5Mb2dDb3VudA0KCWxvY2FsIFRyZWVOb2RlID0gSGVhZGVyLlRyZWVOb2RlIA0KCWxvY2FsIFBhcmVudCA9IFRyZWVOb2RlIG9yIFJlbW90ZXNMaXN0DQoNCgktLS8vIEluY3JlYXNlIGxvZyBjb3VudCAtIFRyZWVOb2RlcyBhcmUgaW4gR2V0UmVtb3RlSGVhZGVyIGZ1bmN0aW9uDQoJaWYgTm9UcmVlTm9kZXMgdGhlbg0KCQlSZW1vdGVzQ291bnQgKz0gMQ0KCQlMb2dDb3VudCA9IFJlbW90ZXNDb3VudA0KCWVuZA0KDQogICAgLS0vLyBDcmVhdGUgZm9jdXMgYnV0dG9uDQoJRGF0YS5IZWFkZXJEYXRhID0gSGVhZGVyDQoJRGF0YS5TZWxlY3RhYmxlID0gUGFyZW50OlNlbGVjdGFibGUoew0KCQlUZXh0ID0gVGV4dCwNCiAgICAgICAgTGF5b3V0T3JkZXIgPSAtMSAqIExvZ0NvdW50LA0KCQlUZXh0Q29sb3IzID0gQ29sb3IsDQoJCVRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0LA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCXNlbGY6U2V0Rm9jdXNlZFJlbW90ZShEYXRhKQ0KCQllbmQsDQogICAgfSkNCg0KCUhlYWRlcjpMb2dBZGRlZChEYXRhKQ0KDQoJLS0vLyBBdXRvIHNlbGVjdCBjaGVjaw0KCWxvY2FsIEdyb3VwU2VsZWN0ZWQgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLkhlYWRlckRhdGEgPT0gSGVhZGVyDQoJaWYgU2VsZWN0TmV3ZXN0IGFuZCBHcm91cFNlbGVjdGVkIHRoZW4NCgkJc2VsZjpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJZW5kDQplbmQNCg0KcmV0dXJuIFVp]]
},Generation={'base64',
[[dHlwZSB0YWJsZSA9IHsNCglbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJTWV0YU1ldGhvZDogc3RyaW5nLA0KCUFyZ3M6IHRhYmxlLA0KCU1ldGhvZDogc3RyaW5nLA0KICAgIFRyYW5zZmVyVHlwZTogc3RyaW5nLA0KCVZhbHVlUmVwbGFjZW1lbnRzOiB0YWJsZSwNCglOb1ZhcmlhYmxlczogYm9vbGVhbj8NCn0NCg0KLS0vLyBNb2R1bGUNCmxvY2FsIEdlbmVyYXRpb24gPSB7DQoJRHVtcEJhc2VOYW1lID0gIlNpZ21hU3B5LUR1bXAgJXMubHVhIiwgLS0gIi0tIEdlbmVyYXRlZCB3aXRoIHNpZ21hIHNweSBCT0lJSUlJSUlJSSAoKzk5OTk5OTkgQVVSQSlcbiINCglIZWFkZXIgPSAiLS0gR2VuZXJhdGVkIHdpdGggU2lnbWEgU3B5IEdpdGh1YjogaHR0cHM6Ly9naXRodWIuY29tL2RlcHRoc28vU2lnbWEtU3B5XG4iLA0KCVNjcmlwdFRlbXBsYXRlcyA9IHsNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCXsiJVJlbW90ZUNhbGwlIn0NCgkJfSwNCgkJWyJTcGFtIl0gPSB7DQoJCQl7IndoaWxlIHdhaXQoKSBkbyJ9LA0KCQkJeyIlUmVtb3RlQ2FsbCUiLCAyfSwNCgkJCXsiZW5kIn0NCgkJfSwNCgkJWyJSZXBlYXQiXSA9IHsNCgkJCXsiZm9yIEluZGV4ID0gMSwgMTAgZG8ifSwNCgkJCXsiJVJlbW90ZUNhbGwlIiwgMn0sDQoJCQl7ImVuZCJ9DQoJCX0sDQoJCVsiQmxvY2siXSA9IHsNCgkJCVsiX19pbmRleCJdID0gew0KCQkJCXsibG9jYWwgT2xkOyBPbGQgPSBob29rZnVuY3Rpb24oJVNpZ25hbCUsIGZ1bmN0aW9uKHNlbGYsIC4uLikifSwNCgkJCQl7ImlmIHNlbGYgPT0gJVJlbW90ZSUgdGhlbiIsIDJ9LA0KCQkJCXsicmV0dXJuIiwgM30sDQoJCQkJeyJlbmQiLCAyfSwNCgkJCQl7InJldHVybiBPbGQoc2VsZiwgLi4uKSIsIDJ9LA0KCQkJCXsiZW5kKSJ9DQoJCQl9LA0KCQkJWyJfX25hbWVjYWxsIl0gPSB7DQoJCQkJeyJsb2NhbCBPbGQ7IE9sZCA9IGhvb2ttZXRhbWV0aG9kKGdhbWUsIFwiX19uYW1lY2FsbFwiLCBmdW5jdGlvbihzZWxmLCAuLi4pIn0sDQoJCQkJeyJsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpIiwgMn0sDQoJCQkJeyJpZiBzZWxmID09ICVSZW1vdGUlIGFuZCBNZXRob2QgPT0gXCIlTWV0aG9kJVwiIHRoZW4iLCAyfSwNCgkJCQl7InJldHVybiIsIDN9LA0KCQkJCXsiZW5kIiwgMn0sDQoJCQkJeyJyZXR1cm4gT2xkKHNlbGYsIC4uLikiLCAyfSwNCgkJCQl7ImVuZCkifQ0KCQkJfSwNCgkJCVsiQ29ubmVjdCJdID0gew0KCQkJCXsiZm9yIF8sIENvbm5lY3Rpb24gaW4gZ2V0Y29ubmVjdGlvbnMoJVNpZ25hbCUpIGRvIn0sDQoJCQkJeyJDb25uZWN0aW9uOkRpc2FibGUoKSIsIDJ9LA0KCQkJCXsiZW5kIn0NCgkJCX0NCgkJfQ0KCX0NCn0NCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBDb25maWcNCmxvY2FsIEhvb2sNCmxvY2FsIFBhcnNlck1vZHVsZQ0KbG9jYWwgRmxhZ3MNCmxvY2FsIFRoaXNTY3JpcHQgPSBzY3JpcHQNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGU/KQ0KCWlmIG5vdCBOZXcgdGhlbiByZXR1cm4gZW5kDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpJbml0KERhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCglsb2NhbCBDb25maWd1cmF0aW9uID0gTW9kdWxlcy5Db25maWd1cmF0aW9uDQoNCgktLS8vIE1vZHVsZXMNCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KCUhvb2sgPSBNb2R1bGVzLkhvb2sNCglGbGFncyA9IE1vZHVsZXMuRmxhZ3MNCgkNCgktLS8vIEltcG9ydCBwYXJzZXINCglsb2NhbCBQYXJzZXJVcmwgPSBDb25maWd1cmF0aW9uLlBhcnNlclVybA0KCXNlbGY6TG9hZFBhcnNlcihQYXJzZXJVcmwpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlUHJpbnRhYmxlKFN0cmluZzogc3RyaW5nKTogc3RyaW5nDQoJbG9jYWwgRm9ybWF0dGVyID0gUGFyc2VyTW9kdWxlLk1vZHVsZXMuRm9ybWF0dGVyDQoJcmV0dXJuIEZvcm1hdHRlcjpNYWtlUHJpbnRhYmxlKFN0cmluZykNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlRpbWVTdGFtcEZpbGUoRmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZw0KCWxvY2FsIFRpbWVTdGFtcCA9IG9zLmRhdGUoIiVZLSVtLSVkXyVILSVNLSVTIikNCglsb2NhbCBGb3JtYXR0ZWQgPSBGaWxlUGF0aDpmb3JtYXQoVGltZVN0YW1wKQ0KCXJldHVybiBGb3JtYXR0ZWQNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOldyaXRlRHVtcChDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcNCglsb2NhbCBEdW1wQmFzZU5hbWUgPSBzZWxmLkR1bXBCYXNlTmFtZQ0KCWxvY2FsIEZpbGVQYXRoID0gc2VsZjpUaW1lU3RhbXBGaWxlKER1bXBCYXNlTmFtZSkNCg0KCS0tLy8gV3JpdGUgdG8gZmlsZQ0KCXdyaXRlZmlsZShGaWxlUGF0aCwgQ29udGVudCkNCg0KCXJldHVybiBGaWxlUGF0aA0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TG9hZFBhcnNlcihNb2R1bGVVcmw6IHN0cmluZykNCglQYXJzZXJNb2R1bGUgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldChNb2R1bGVVcmwpLCAiUGFyc2VyIikoKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZVZhbHVlU3dhcHNUYWJsZSgpOiB0YWJsZQ0KCWxvY2FsIEZvcm1hdHRlciA9IFBhcnNlck1vZHVsZS5Nb2R1bGVzLkZvcm1hdHRlcg0KCXJldHVybiBGb3JtYXR0ZXI6TWFrZVJlcGxhY2VtZW50cygpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpTZXRTd2Fwc0NhbGxiYWNrKENhbGxiYWNrOiAoSW50ZXJmYWNlOiB0YWJsZSkgLT4gKCkpDQoJc2VsZi5Td2Fwc0NhbGxiYWNrID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkdldEJhc2UoTW9kdWxlKTogKHN0cmluZywgYm9vbGVhbikNCglsb2NhbCBOb0NvbW1lbnRzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb0NvbW1lbnRzIikNCglsb2NhbCBIZWFkZXIgPSBzZWxmLkhlYWRlcg0KDQoJbG9jYWwgQ29kZSA9IE5vQ29tbWVudHMgYW5kICIiIG9yIEhlYWRlcg0KDQoJLS0vLyBHZW5lcmF0ZSB2YXJpYWJsZXMgY29kZQ0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5QYXJzZXI6TWFrZVZhcmlhYmxlQ29kZSh7DQoJCSJTZXJ2aWNlcyIsICJSZW1vdGUiLCAiVmFyaWFibGVzIg0KCX0sIE5vQ29tbWVudHMpDQoNCglsb2NhbCBOb1ZhcmlhYmxlcyA9IFZhcmlhYmxlcyA9PSAiIg0KCUNvZGUgLi49IFZhcmlhYmxlcw0KDQoJcmV0dXJuIENvZGUsIE5vVmFyaWFibGVzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpHZXRTd2FwcygpDQoJbG9jYWwgRnVuYyA9IHNlbGYuU3dhcHNDYWxsYmFjaw0KCWxvY2FsIFN3YXBzID0ge30NCg0KCWxvY2FsIEludGVyZmFjZSA9IHt9DQoJZnVuY3Rpb24gSW50ZXJmYWNlOkFkZFN3YXAoT2JqZWN0OiBJbnN0YW5jZSwgRGF0YTogdGFibGUpDQoJCWlmIG5vdCBPYmplY3QgdGhlbiByZXR1cm4gZW5kDQoJCVN3YXBzW09iamVjdF0gPSBEYXRhDQoJZW5kDQoNCgktLS8vIEludm9rZSBHZXRTd2FwcyBmdW5jdGlvbg0KCUZ1bmMoSW50ZXJmYWNlKQ0KDQoJcmV0dXJuIFN3YXBzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpQaWNrVmFyaWFibGVOYW1lKCk6IHN0cmluZw0KCWxvY2FsIE5hbWVzID0gQ29uZmlnLlZhcmlhYmxlTmFtZXMNCglyZXR1cm4gTmFtZXNbbWF0aC5yYW5kb20oMSwgI05hbWVzKV0NCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk5ld1BhcnNlcihFeHRyYTogdGFibGU/KQ0KCWxvY2FsIFZhcmlhYmxlTmFtZSA9IHNlbGY6UGlja1ZhcmlhYmxlTmFtZSgpDQoJbG9jYWwgU3dhcHMgPSBzZWxmOkdldFN3YXBzKCkNCg0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSB7DQoJCVZhcmlhYmxlQmFzZSA9IFZhcmlhYmxlTmFtZSwNCgkJU3dhcHMgPSBTd2FwcywNCgkJSW5kZXhGdW5jID0gZnVuY3Rpb24oLi4uKQ0KCQkJcmV0dXJuIEhvb2s6SW5kZXgoLi4uKQ0KCQllbmQsDQoJfQ0KDQoJLS0vLyBNZXJnZSBleHRyYSBjb25maWd1cmF0aW9uDQoJTWVyZ2UoQ29uZmlndXJhdGlvbiwgRXh0cmEpDQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyIGluc3RhbmNlDQoJcmV0dXJuIFBhcnNlck1vZHVsZTpOZXcoQ29uZmlndXJhdGlvbikNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluZGVudChJbmRlbnRTdHJpbmc6IHN0cmluZywgTGluZTogc3RyaW5nKQ0KCXJldHVybiBge0luZGVudFN0cmluZ317TGluZX1gDQplbmQNCg0KdHlwZSBDYWxsSW5mbyA9IHsNCglBcmd1bWVudHM6IHRhYmxlLA0KCUluZGVudDogbnVtYmVyLA0KCVJlbW90ZVZhcmlhYmxlOiBzdHJpbmcsDQoJTW9kdWxlOiB0YWJsZQ0KfQ0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDYWxsUmVtb3RlU2NyaXB0KERhdGEsIEluZm86IENhbGxJbmZvKTogc3RyaW5nDQoJbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCg0KCWxvY2FsIFJlbW90ZVZhcmlhYmxlID0gSW5mby5SZW1vdGVWYXJpYWJsZQ0KCWxvY2FsIEluZGVudCA9IEluZm8uSW5kZW50IG9yIDANCglsb2NhbCBNb2R1bGUgPSBJbmZvLk1vZHVsZQ0KDQoJbG9jYWwgVmFyaWFibGVzID0gTW9kdWxlLlZhcmlhYmxlcw0KCWxvY2FsIFBhcnNlciA9IE1vZHVsZS5QYXJzZXINCglsb2NhbCBOb1ZhcmlhYmxlcyA9IERhdGEuTm9WYXJpYWJsZXMNCg0KCWxvY2FsIEluZGVudFN0cmluZyA9IHNlbGY6TWFrZUluZGVudChJbmRlbnQpDQoNCgktLS8vIFBhcnNlIGFyZ3VtZW50cw0KCWxvY2FsIFBhcnNlZEFyZ3MsIEl0ZW1zQ291bnQsIElzQXJyYXkgPSBQYXJzZXI6UGFyc2VUYWJsZUludG9TdHJpbmcoew0KCQlOb0JyYWNrZXRzID0gdHJ1ZSwNCgkJTm9WYXJpYWJsZXMgPSBOb1ZhcmlhYmxlcywNCgkJVGFibGUgPSBBcmdzLA0KCQlJbmRlbnQgPSBJbmRlbnQNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgdGFibGUgdmFyaWFibGUgaWYgbm90IGFuIGFycmF5DQoJaWYgbm90IElzQXJyYXkgb3IgTm9WYXJpYWJsZXMgdGhlbg0KCQlQYXJzZWRBcmdzID0gVmFyaWFibGVzOk1ha2VWYXJpYWJsZSh7DQoJCQlWYWx1ZSA9ICgieyVzfSIpOmZvcm1hdChQYXJzZWRBcmdzKSwNCgkJCUNvbW1lbnQgPSBub3QgSXNBcnJheSBhbmQgIkFyZ3VtZW50cyBhcmVuJ3Qgb3JkZXJlZCIgb3IgbmlsLA0KCQkJTmFtZSA9ICJSZW1vdGVBcmdzIiwNCgkJCUNsYXNzID0gIlJlbW90ZSINCgkJfSkNCgllbmQNCg0KCS0tLy8gV3JhcCBpbiBhIHVucGFjayBpZiB0aGUgdGFibGUgaXMgYSBkaWN0DQoJaWYgSXRlbXNDb3VudCA+IDAgYW5kIG5vdCBJc0FycmF5IHRoZW4NCgkJUGFyc2VkQXJncyA9IGB1bnBhY2soe1BhcnNlZEFyZ3N9LCAxLCB0YWJsZS5tYXhuKHtQYXJzZWRBcmdzfSkpYA0KCWVuZA0KDQoJLS0vLyBGaXJlc2lnbmFsIHNjcmlwdCBmb3IgY2xpZW50IHJlY2lldmVzDQoJaWYgSXNSZWNlaXZlIHRoZW4NCgkJbG9jYWwgU2Vjb25kID0gSXRlbXNDb3VudCA8PSAwIGFuZCAiIiBvciBgLCB7UGFyc2VkQXJnc31gDQoJCWxvY2FsIFNpZ25hbCA9IGB7UmVtb3RlVmFyaWFibGV9LntNZXRob2R9YA0KDQoJCWxvY2FsIENvZGUgPSBgLS0gVGhpcyBkYXRhIHdhcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJgDQoJCVBhcnNlZEFyZ3MgPSBzZWxmOkluZGVudChJbmRlbnRTdHJpbmcsIENvZGUpDQoJCUNvZGUgLi49IGBcbntJbmRlbnRTdHJpbmd9ZmlyZXNpZ25hbCh7U2lnbmFsfXtTZWNvbmR9KWANCgkJDQoJCXJldHVybiBDb2RlDQoJZW5kDQoJDQoJLS0vLyBSZW1vdGUgaW52b2tlIHNjcmlwdA0KCXJldHVybiBge1JlbW90ZVZhcmlhYmxlfTp7TWV0aG9kfSh7UGFyc2VkQXJnc30pYA0KZW5kDQoNCi0tLy8gVmFyaWFibGVzOiAlVmFyaWFibGVOYW1lJQ0KZnVuY3Rpb24gR2VuZXJhdGlvbjpBcHBseVZhcmlhYmxlcyhTdHJpbmc6IHN0cmluZywgVmFyaWFibGVzOiB0YWJsZSwgLi4uKTogc3RyaW5nDQoJZm9yIFZhcmlhYmxlLCBWYWx1ZSBpbiBWYXJpYWJsZXMgZG8NCgkJLS0vLyBJbnZva2UgdmFsdWUgZnVuY3Rpb24NCgkJaWYgdHlwZW9mKFZhbHVlKSA9PSAiZnVuY3Rpb24iIHRoZW4NCgkJCVZhbHVlID0gVmFsdWUoLi4uKQ0KCQllbmQNCg0KCQlTdHJpbmcgPSBTdHJpbmc6Z3N1YihgJSV7VmFyaWFibGV9JSVgLCBmdW5jdGlvbigpDQoJCQlyZXR1cm4gVmFsdWUNCgkJZW5kKQ0KCWVuZA0KCXJldHVybiBTdHJpbmcNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VJbmRlbnQoSW5kZW50OiBudW1iZXIpDQoJcmV0dXJuIHN0cmluZy5yZXAoIgkiLCBJbmRlbnQpDQplbmQNCg0KdHlwZSBTY3JpcHREYXRhID0gew0KCVZhcmlhYmxlczogdGFibGUsDQoJTWV0YU1ldGhvZDogc3RyaW5nDQp9DQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VDYWxsQ29kZShTY3JpcHRUeXBlOiBzdHJpbmcsIERhdGE6IFNjcmlwdERhdGEpOiBzdHJpbmcNCglsb2NhbCBTY3JpcHRUZW1wbGF0ZXMgPSBzZWxmLlNjcmlwdFRlbXBsYXRlcw0KCWxvY2FsIFRlbXBsYXRlID0gU2NyaXB0VGVtcGxhdGVzW1NjcmlwdFR5cGVdDQoNCglhc3NlcnQoVGVtcGxhdGUsIGB7U2NyaXB0VHlwZX0gaXMgbm90IGEgdmFsaWQgc2NyaXB0IHR5cGUhYCkNCg0KCWxvY2FsIFZhcmlhYmxlcyA9IERhdGEuVmFyaWFibGVzDQoJbG9jYWwgTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZA0KCWxvY2FsIE1ldGFNZXRob2RzID0geyJfX2luZGV4IiwgIl9fbmFtZWNhbGwiLCAiQ29ubmVjdCJ9DQoNCglsb2NhbCBmdW5jdGlvbiBDb21waWxlKFRlbXBsYXRlOiB0YWJsZSk6IHN0cmluZw0KCQlsb2NhbCBPdXQgPSAiIg0KDQoJCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRlbXBsYXRlIGRvDQoJCQktLS8vIE1ldGFNZXRob2QgY2hlY2sNCgkJCWxvY2FsIElzTWV0YVR5cGVPbmx5ID0gdGFibGUuZmluZChNZXRhTWV0aG9kcywgS2V5KQ0KCQkJaWYgSXNNZXRhVHlwZU9ubHkgdGhlbg0KCQkJCWlmIEtleSA9PSBNZXRhTWV0aG9kIHRoZW4NCgkJCQkJbG9jYWwgTGluZSA9IENvbXBpbGUoVmFsdWUpDQoJCQkJCU91dCAuLj0gTGluZQ0KCQkJCWVuZA0KCQkJCWNvbnRpbnVlDQoJCQllbmQNCg0KCQkJLS0vLyBJbmZvcm1hdGlvbg0KCQkJbG9jYWwgQ29udGVudCwgSW5kZW50ID0gVmFsdWVbMV0sIFZhbHVlWzJdIG9yIDANCgkJCUluZGVudCA9IG1hdGguY2xhbXAoSW5kZW50LTEsIDAsIDk5OTkpDQoNCgkJCS0tLy8gTWFrZSBsaW5lDQoJCQlsb2NhbCBMaW5lID0gc2VsZjpBcHBseVZhcmlhYmxlcyhDb250ZW50LCBWYXJpYWJsZXMsIEluZGVudCkNCgkJCWxvY2FsIEluZGVudFN0cmluZyA9IHNlbGY6TWFrZUluZGVudChJbmRlbnQpDQoNCgkJCS0tLy8gQXBwZW5kIHRvIGNvZGUNCgkJCU91dCAuLj0gYHtJbmRlbnRTdHJpbmd9e0xpbmV9XG5gDQoJCWVuZA0KDQoJCXJldHVybiBPdXQNCgllbmQNCgkNCglyZXR1cm4gQ29tcGlsZShUZW1wbGF0ZSkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlJlbW90ZVNjcmlwdChNb2R1bGUsIERhdGE6IFJlbW90ZURhdGEsIFNjcmlwdFR5cGU6IHN0cmluZyk6IHN0cmluZw0KCS0tLy8gVW5wYWNrIGRhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIE1ldGFNZXRob2QgPSBEYXRhLk1ldGFNZXRob2QNCg0KCS0tLy8gUmVtb3RlIGluZm8NCglsb2NhbCBDbGFzc05hbWUgPSBIb29rOkluZGV4KFJlbW90ZSwgIkNsYXNzTmFtZSIpDQoJbG9jYWwgSXNOaWxQYXJlbnQgPSBIb29rOkluZGV4KFJlbW90ZSwgIlBhcmVudCIpID09IG5pbA0KCQ0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5WYXJpYWJsZXMNCglsb2NhbCBGb3JtYXR0ZXIgPSBNb2R1bGUuRm9ybWF0dGVyDQoJDQoJLS0vLyBQcmUtcmVuZGVyIHZhcmlhYmxlcw0KCVZhcmlhYmxlczpQcmVyZW5kZXJWYXJpYWJsZXMoQXJncywgeyJJbnN0YW5jZSJ9KQ0KDQoJLS0vLyBDcmVhdGUgcmVtb3RlIHZhcmlhYmxlDQoJbG9jYWwgUmVtb3RlVmFyaWFibGUgPSBWYXJpYWJsZXM6TWFrZVZhcmlhYmxlKHsNCgkJVmFsdWUgPSBGb3JtYXR0ZXI6Rm9ybWF0KFJlbW90ZSwgew0KCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCX0pLA0KCQlDb21tZW50ID0gYHtDbGFzc05hbWV9IHtJc05pbFBhcmVudCBhbmQgInwgUmVtb3RlIHBhcmVudCBpcyBuaWwiIG9yICIifWAsDQoJCU5hbWUgPSBGb3JtYXR0ZXI6TWFrZU5hbWUoUmVtb3RlKSwNCgkJTG9va3VwID0gUmVtb3RlLA0KCQlDbGFzcyA9ICJSZW1vdGUiDQoJfSkNCg0KCS0tLy8gR2VuZXJhdGUgY2FsbCBzY3JpcHQNCglsb2NhbCBDYWxsQ29kZSA9IHNlbGY6TWFrZUNhbGxDb2RlKFNjcmlwdFR5cGUsIHsNCgkJVmFyaWFibGVzID0gew0KCQkJWyJSZW1vdGVDYWxsIl0gPSBmdW5jdGlvbihJbmRlbnQ6IG51bWJlcikNCgkJCQlyZXR1cm4gc2VsZjpDYWxsUmVtb3RlU2NyaXB0KERhdGEsIHsNCgkJCQkJUmVtb3RlVmFyaWFibGUgPSBSZW1vdGVWYXJpYWJsZSwNCgkJCQkJSW5kZW50ID0gSW5kZW50LA0KCQkJCQlNb2R1bGUgPSBNb2R1bGUNCgkJCQl9KQ0KCQkJZW5kLA0KCQkJWyJSZW1vdGUiXSA9IFJlbW90ZVZhcmlhYmxlLA0KCQkJWyJNZXRob2QiXSA9IE1ldGhvZCwNCgkJCVsiU2lnbmFsIl0gPSBge1JlbW90ZVZhcmlhYmxlfS57TWV0aG9kfWANCgkJfSwNCgkJTWV0YU1ldGhvZCA9IE1ldGFNZXRob2QNCgl9KQ0KCQ0KCS0tLy8gTWFrZSBjb2RlDQoJbG9jYWwgQ29kZSA9IHNlbGY6R2V0QmFzZShNb2R1bGUpDQoJcmV0dXJuIGB7Q29kZX1cbntDYWxsQ29kZX1gDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDb25uZWN0aW9uc1RhYmxlKFNpZ25hbDogUkJYU2NyaXB0U2lnbmFsKTogdGFibGUNCglsb2NhbCBDb25uZWN0aW9ucyA9IGdldGNvbm5lY3Rpb25zKFNpZ25hbCkNCglsb2NhbCBEYXRhQXJyYXkgPSB7fQ0KDQoJZm9yIF8sIENvbm5lY3Rpb24gaW4gbmV4dCwgQ29ubmVjdGlvbnMgZG8NCgkJbG9jYWwgRnVuY3Rpb24gPSBDb25uZWN0aW9uLkZ1bmN0aW9uDQoJCWxvY2FsIFNjcmlwdCA9IHJhd2dldChnZXRmZW52KEZ1bmN0aW9uKSwgInNjcmlwdCIpDQoNCgkJLS0vLyBTa2lwIGlmIHNlbGYNCgkJaWYgU2NyaXB0ID09IFRoaXNTY3JpcHQgdGhlbiBjb250aW51ZSBlbmQNCg0KCQktLS8vIENvbm5lY3Rpb24gZGF0YQ0KCQlsb2NhbCBEYXRhID0gew0KCQkJRnVuY3Rpb24gPSBGdW5jdGlvbiwNCgkJCVN0YXRlID0gQ29ubmVjdGlvbi5TdGF0ZSwNCgkJCVNjcmlwdCA9IFNjcmlwdA0KCQl9DQoNCgkJdGFibGUuaW5zZXJ0KERhdGFBcnJheSwgRGF0YSkNCgllbmQNCg0KCXJldHVybiBEYXRhQXJyYXkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlRhYmxlU2NyaXB0KE1vZHVsZSwgVGFibGU6IHRhYmxlKTogc3RyaW5nDQoJLS0vLyBQcmUtcmVuZGVyIHZhcmlhYmxlcw0KCU1vZHVsZS5WYXJpYWJsZXM6UHJlcmVuZGVyVmFyaWFibGVzKFRhYmxlLCB7Ikluc3RhbmNlIn0pDQoNCgktLS8vIFBhcnNlIGFyZ3VtZW50cw0KCWxvY2FsIFBhcnNlZFRhYmxlID0gTW9kdWxlLlBhcnNlcjpQYXJzZVRhYmxlSW50b1N0cmluZyh7DQoJCVRhYmxlID0gVGFibGUNCgl9KQ0KDQoJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCglsb2NhbCBDb2RlLCBOb1ZhcmlhYmxlcyA9IHNlbGY6R2V0QmFzZShNb2R1bGUpDQoJbG9jYWwgU2VwZXJhdG9yID0gTm9WYXJpYWJsZXMgYW5kICIiIG9yICJcbiINCglDb2RlIC4uPSBge1NlcGVyYXRvcn1yZXR1cm4ge1BhcnNlZFRhYmxlfWANCg0KCXJldHVybiBDb2RlDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlVHlwZXNUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KCWxvY2FsIFR5cGVzID0ge30NCg0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRhYmxlIGRvDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoJCWlmIFR5cGUgPT0gInRhYmxlIiB0aGVuDQoJCQlUeXBlID0gc2VsZjpNYWtlVHlwZXNUYWJsZShWYWx1ZSkNCgkJZW5kDQoNCgkJVHlwZXNbS2V5XSA9IFR5cGUNCgllbmQNCg0KCXJldHVybiBUeXBlcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246Q29ubmVjdGlvbkluZm8oUmVtb3RlOiBJbnN0YW5jZSwgQ2xhc3NEYXRhOiB0YWJsZSk6IHRhYmxlPw0KCWxvY2FsIFJlY2VpdmVNZXRob2RzID0gQ2xhc3NEYXRhLlJlY2VpdmUNCglpZiBub3QgUmVjZWl2ZU1ldGhvZHMgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBDb25uZWN0aW9ucyA9IHt9DQoJZm9yIF8sIE1ldGhvZDogc3RyaW5nIGluIG5leHQsIFJlY2VpdmVNZXRob2RzIGRvDQoJCXBjYWxsKGZ1bmN0aW9uKCkgLS0gVE9ETzogR0VUQ0FMTEJBQ0tWQUxVRQ0KCQkJbG9jYWwgU2lnbmFsID0gSG9vazpJbmRleChSZW1vdGUsIE1ldGhvZCkNCgkJCUNvbm5lY3Rpb25zW01ldGhvZF0gPSBzZWxmOkNvbm5lY3Rpb25zVGFibGUoU2lnbmFsKQ0KCQllbmQpDQoJZW5kDQoNCglyZXR1cm4gQ29ubmVjdGlvbnMNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkFkdmFuY2VkSW5mbyhNb2R1bGUsIERhdGE6IHRhYmxlKTogc3RyaW5nDQoJLS0vLyBVbnBhY2sgcmVtb3RlIGRhdGENCglsb2NhbCBGdW5jdGlvbiA9IERhdGEuQ2FsbGluZ0Z1bmN0aW9uDQoJbG9jYWwgQ2xhc3NEYXRhID0gRGF0YS5DbGFzc0RhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCgkNCgktLS8vIEFkdmFuY2VkIGluZm8gdGFibGUgYmFzZQ0KCWxvY2FsIEZ1bmN0aW9uSW5mbyA9IHsNCgkJWyJDYWxsZXIiXSA9IHsNCgkJCVsiU291cmNlU2NyaXB0Il0gPSBEYXRhLlNvdXJjZVNjcmlwdCwNCgkJCVsiQ2FsbGluZ1NjcmlwdCJdID0gRGF0YS5DYWxsaW5nU2NyaXB0LA0KCQkJWyJDYWxsaW5nRnVuY3Rpb24iXSA9IEZ1bmN0aW9uDQoJCX0sDQoJCVsiUmVtb3RlIl0gPSB7DQoJCQlbIlJlbW90ZSJdID0gUmVtb3RlLA0KCQkJWyJSZW1vdGVJRCJdID0gRGF0YS5JZCwNCgkJCVsiTWV0aG9kIl0gPSBEYXRhLk1ldGhvZCwNCgkJCVsiQ29ubmVjdGlvbnMiXSA9IHNlbGY6Q29ubmVjdGlvbkluZm8oUmVtb3RlLCBDbGFzc0RhdGEpDQoJCX0sDQoJCVsiQXJndW1lbnRzIl0gPSB7DQoJCQlbIkxlbmd0aCJdID0gI0FyZ3MsDQoJCQlbIlR5cGVzIl0gPSBzZWxmOk1ha2VUeXBlc1RhYmxlKEFyZ3MpLA0KCQl9LA0KCQlbIk1ldGFNZXRob2QiXSA9IERhdGEuTWV0YU1ldGhvZCwNCgkJWyJJc0FjdG9yIl0gPSBEYXRhLklzQWN0b3IsDQoJfQ0KDQoJLS0vLyBTb21lIGNsb3N1cmVzIG1heSBub3QgYmUgbHVhDQoJaWYgRnVuY3Rpb24gYW5kIGlzbGNsb3N1cmUoRnVuY3Rpb24pIHRoZW4NCgkJRnVuY3Rpb25JbmZvWyJVcFZhbHVlcyJdID0gZGVidWcuZ2V0dXB2YWx1ZXMoRnVuY3Rpb24pDQoJCUZ1bmN0aW9uSW5mb1siQ29uc3RhbnRzIl0gPSBkZWJ1Zy5nZXRjb25zdGFudHMoRnVuY3Rpb24pDQoJZW5kDQoNCgktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCXJldHVybiBzZWxmOlRhYmxlU2NyaXB0KE1vZHVsZSwgRnVuY3Rpb25JbmZvKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246RHVtcExvZ3MoTG9nczogdGFibGUpOiBzdHJpbmcNCglsb2NhbCBCYXNlRGF0YQ0KCWxvY2FsIFBhcnNlZCA9IHsNCgkJUmVtb3RlID0gbmlsLA0KCQlDYWxscyA9IHt9DQoJfQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHBhcnNlciBpbnN0YW5jZQ0KCWxvY2FsIE1vZHVsZSA9IEdlbmVyYXRpb246TmV3UGFyc2VyKCkNCg0KCWZvciBfLCBEYXRhIGluIExvZ3MgZG8NCgkJbG9jYWwgQ2FsbHMgPSBQYXJzZWQuQ2FsbHMNCgkJbG9jYWwgVGFibGUgPSB7DQoJCQlBcmdzID0gRGF0YS5BcmdzLA0KCQkJVGltZXN0YW1wID0gRGF0YS5UaW1lc3RhbXAsDQoJCQlSZXR1cm5WYWx1ZXMgPSBEYXRhLlJldHVyblZhbHVlcywNCgkJCU1ldGhvZCA9IERhdGEuTWV0aG9kLA0KCQkJTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZCwNCgkJCUNhbGxpbmdTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQsDQoJCX0NCg0KCQktLS8vIEFwcGVuZA0KCQl0YWJsZS5pbnNlcnQoQ2FsbHMsIFRhYmxlKQ0KDQoJCS0tLy8gU2V0IEJhc2VEYXRhDQoJCWlmIG5vdCBCYXNlRGF0YSB0aGVuDQoJCQlCYXNlRGF0YSA9IERhdGENCgkJZW5kDQoJZW5kDQoNCgktLS8vIEJhc2VkYXRhIG1lcmdlDQoJUGFyc2VkLlJlbW90ZSA9IEJhc2VEYXRhLlJlbW90ZQ0KDQoJLS0vLyBDb21waWxlIGFuZCBzYXZlDQoJbG9jYWwgT3V0cHV0ID0gc2VsZjpUYWJsZVNjcmlwdChNb2R1bGUsIFBhcnNlZCkNCglsb2NhbCBGaWxlUGF0aCA9IHNlbGY6V3JpdGVEdW1wKE91dHB1dCkNCgkNCglyZXR1cm4gRmlsZVBhdGgNCmVuZA0KDQpyZXR1cm4gR2VuZXJhdGlvbg0K]]
},Communication={'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBNb2R1bGUgPSB7DQogICAgQ29tbUNhbGxiYWNrcyA9IHt9DQp9DQoNCmxvY2FsIENvbW1XcmFwcGVyID0ge30NCkNvbW1XcmFwcGVyLl9faW5kZXggPSBDb21tV3JhcHBlcg0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBDb3JlR3VpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBQcm9jZXNzDQoNCmZ1bmN0aW9uIE1vZHVsZTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KICAgIGxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIFByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCiAgICBDb3JlR3VpID0gU2VydmljZXMuQ29yZUd1aQ0KZW5kDQoNCmZ1bmN0aW9uIENvbW1XcmFwcGVyOkZpcmUoLi4uKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KICAgIHRhYmxlLmluc2VydChRdWV1ZSwgey4uLn0pDQplbmQNCg0KZnVuY3Rpb24gQ29tbVdyYXBwZXI6UHJvY2Vzc0FyZ3VtZW50cyhBcmd1bWVudHMpIA0KICAgIGxvY2FsIENoYW5uZWwgPSBzZWxmLkNoYW5uZWwNCiAgICBDaGFubmVsOkZpcmUoUHJvY2VzczpVbnBhY2soQXJndW1lbnRzKSkNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpQcm9jZXNzUXVldWUoKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KDQogICAgZm9yIEluZGV4ID0gMSwgI1F1ZXVlIGRvDQogICAgICAgIGxvY2FsIEFyZ3VtZW50cyA9IHRhYmxlLnJlbW92ZShRdWV1ZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc2VsZjpQcm9jZXNzQXJndW1lbnRzKEFyZ3VtZW50cykgDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpCZWdpblF1ZXVlU2VydmljZSgpDQogICAgY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB3YWl0KCkgZG8NCiAgICAgICAgICAgIHNlbGY6UHJvY2Vzc1F1ZXVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk5ld0NvbW1XcmFwKENoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQogICAgbG9jYWwgQmFzZSA9IHsNCiAgICAgICAgUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCiAgICAgICAgQ2hhbm5lbCA9IENoYW5uZWwsDQogICAgICAgIEV2ZW50ID0gQ2hhbm5lbC5FdmVudA0KICAgIH0NCg0KICAgIC0tLy8gQ3JlYXRlIG5ldyB3cmFwcGVyIGNsYXNzDQogICAgbG9jYWwgV3JhcHBlZCA9IHNldG1ldGF0YWJsZShCYXNlLCBDb21tV3JhcHBlcikNCiAgICBXcmFwcGVkOkJlZ2luUXVldWVTZXJ2aWNlKCkNCg0KICAgIHJldHVybiBXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpOiBCaW5kYWJsZUZ1bmN0aW9uDQogICAgLS0vLyBVc2luZyBCaW5kYWJsZUZ1bmN0aW9uIGFzIGl0IGRvZXMgbm90IHJlcXVpcmUgYSB0aHJlYWQgcGVybWlzc2lvbiBjaGFuZ2UNCiAgICBsb2NhbCBSZW1vdGUgPSBJbnN0YW5jZS5uZXcoIkJpbmRhYmxlRnVuY3Rpb24iKQ0KICAgIGZ1bmN0aW9uIFJlbW90ZS5Pbkludm9rZShPYmplY3Q6IEluc3RhbmNlKTogc3RyaW5nDQogICAgICAgIHJldHVybiBPYmplY3Q6R2V0RGVidWdJZCgpDQogICAgZW5kDQoNCiAgICBzZWxmLkRlYnVnSWRSZW1vdGUgPSBSZW1vdGUNCiAgICBzZWxmLkRlYnVnSWRJbnZva2UgPSBSZW1vdGUuSW52b2tlDQoNCiAgICByZXR1cm4gUmVtb3RlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldERlYnVnSWQoT2JqZWN0OiBJbnN0YW5jZSk6IHN0cmluZw0KICAgIGxvY2FsIEludm9rZSA9IHNlbGYuRGVidWdJZEludm9rZQ0KICAgIGxvY2FsIFJlbW90ZSA9IHNlbGYuRGVidWdJZFJlbW90ZQ0KCXJldHVybiBJbnZva2UoUmVtb3RlLCBPYmplY3QpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEhpZGRlblBhcmVudCgpOiBJbnN0YW5jZQ0KICAgIC0tLy8gVXNlIGdldGh1aSBpZiBpdCBleGlzdHMNCiAgICBpZiBnZXRodWkgdGhlbiByZXR1cm4gZ2V0aHVpKCkgZW5kDQogICAgcmV0dXJuIENvcmVHdWkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ29tbUNoYW5uZWwoKTogKG51bWJlciwgQmluZGFibGVFdmVudCkNCiAgICAtLS8vIFVzZSBuYXRpdmUgaWYgaXQgZXhpc3RzDQogICAgbG9jYWwgRm9yY2UgPSBDb25maWcuRm9yY2VVc2VDdXN0b21Db21tDQogICAgaWYgY3JlYXRlX2NvbW1fY2hhbm5lbCBhbmQgbm90IEZvcmNlIHRoZW4NCiAgICAgICAgcmV0dXJuIGNyZWF0ZV9jb21tX2NoYW5uZWwoKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWxJZCA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDAwKQ0KDQogICAgLS0vLyBCaW5kYWJsZUV2ZW50DQogICAgbG9jYWwgQ2hhbm5lbCA9IEluc3RhbmNlLm5ldygiQmluZGFibGVFdmVudCIsIFBhcmVudCkNCiAgICBDaGFubmVsLk5hbWUgPSBDaGFubmVsSWQNCg0KICAgIHJldHVybiBDaGFubmVsSWQsIENoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkOiBudW1iZXIpOiBCaW5kYWJsZUV2ZW50Pw0KICAgIC0tLy8gVXNlIG5hdGl2ZSBpZiBpdCBleGlzdHMNCiAgICBsb2NhbCBGb3JjZSA9IENvbmZpZy5Gb3JjZVVzZUN1c3RvbUNvbW0NCiAgICBpZiBnZXRfY29tbV9jaGFubmVsIGFuZCBub3QgRm9yY2UgdGhlbg0KICAgICAgICBsb2NhbCBDaGFubmVsID0gZ2V0X2NvbW1fY2hhbm5lbChDaGFubmVsSWQpDQogICAgICAgIHJldHVybiBDaGFubmVsLCBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWwgPSBQYXJlbnQ6RmluZEZpcnN0Q2hpbGQoQ2hhbm5lbElkKQ0KDQogICAgLS0vLyBXcmFwIHRoZSBjaGFubmVsIChQcmV2ZW50cyB0aHJlYWQgcGVybWlzc2lvbiBlcnJvcnMpDQogICAgbG9jYWwgV3JhcHBlZCA9IHNlbGY6TmV3Q29tbVdyYXAoQ2hhbm5lbCkNCiAgICByZXR1cm4gV3JhcHBlZCwgdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGVja1ZhbHVlKFZhbHVlLCBJbmJvdW5kOiBib29sZWFuPykNCiAgICAgLS0vLyBObyBzZXJpYWxpemluZyAgbmVlZGVkDQogICAgaWYgdHlwZW9mKFZhbHVlKSB+PSAidGFibGUiIHRoZW4gDQogICAgICAgIHJldHVybiBWYWx1ZSANCiAgICBlbmQNCiAgIA0KICAgIC0tLy8gRGVzZXJpYWxpemUNCiAgICBpZiBJbmJvdW5kIHRoZW4NCiAgICAgICAgcmV0dXJuIHNlbGY6RGVzZXJpYWxpemVUYWJsZShWYWx1ZSkNCiAgICBlbmQNCg0KICAgIC0tLy8gU2VyaWFsaXplDQogICAgcmV0dXJuIHNlbGY6U2VyaWFsaXplVGFibGUoVmFsdWUpDQplbmQNCg0KbG9jYWwgVGljayA9IDANCmZ1bmN0aW9uIE1vZHVsZTpXYWl0Q2hlY2soKQ0KICAgIFRpY2sgKz0gMQ0KICAgIGlmIFRpY2sgPiAyMCB0aGVuDQogICAgICAgIFRpY2sgPSAwDQogICAgICAgIHdhaXQoKQ0KICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBNb2R1bGU6TWFrZVBhY2tldChJbmRleCwgVmFsdWUpOiB0YWJsZQ0KICAgIHNlbGY6V2FpdENoZWNrKCkNCiAgICByZXR1cm4gew0KICAgICAgICBJbmRleCA9IHNlbGY6Q2hlY2tWYWx1ZShJbmRleCksIA0KICAgICAgICBWYWx1ZSA9IHNlbGY6Q2hlY2tWYWx1ZShWYWx1ZSkNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlJlYWRQYWNrZXQoUGFja2V0OiB0YWJsZSk6IChhbnksIGFueSkNCiAgICBsb2NhbCBLZXkgPSBzZWxmOkNoZWNrVmFsdWUoUGFja2V0LkluZGV4LCB0cnVlKQ0KICAgIGxvY2FsIFZhbHVlID0gc2VsZjpDaGVja1ZhbHVlKFBhY2tldC5WYWx1ZSwgdHJ1ZSkNCiAgICBzZWxmOldhaXRDaGVjaygpDQogICAgcmV0dXJuIEtleSwgVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2VyaWFsaXplVGFibGUoVGFibGU6IHRhYmxlKTogdGFibGUNCiAgICBsb2NhbCBTZXJpYWxpemVkID0ge30NCiAgICBmb3IgSW5kZXgsIFZhbHVlIGluIG5leHQsIFRhYmxlIGRvDQogICAgICAgIGxvY2FsIFBhY2tldCA9IHNlbGY6TWFrZVBhY2tldChJbmRleCwgVmFsdWUpDQogICAgICAgIHRhYmxlLmluc2VydChTZXJpYWxpemVkLCBQYWNrZXQpDQogICAgZW5kDQogICAgcmV0dXJuIFNlcmlhbGl6ZWQNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6RGVzZXJpYWxpemVUYWJsZShTZXJpYWxpemVkOiB0YWJsZSk6IHRhYmxlDQogICAgbG9jYWwgVGFibGUgPSB7fQ0KICAgIGZvciBfLCBQYWNrZXQgaW4gbmV4dCwgU2VyaWFsaXplZCBkbw0KICAgICAgICBsb2NhbCBJbmRleCwgVmFsdWUgPSBzZWxmOlJlYWRQYWNrZXQoUGFja2V0KQ0KICAgICAgICBpZiBub3QgSW5kZXggdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICBUYWJsZVtJbmRleF0gPSBWYWx1ZQ0KICAgIGVuZA0KICAgIHJldHVybiBUYWJsZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRDaGFubmVsKE5ld0NoYW5uZWw6IG51bWJlcikNCiAgICBDaGFubmVsID0gTmV3Q2hhbm5lbA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDb25zb2xlUHJpbnQoLi4uKQ0KICAgIHNlbGY6Q29tbXVuaWNhdGUoIlByaW50IiwgLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpRdWV1ZUxvZyhEYXRhKQ0KICAgIHNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgU2VyaWFsaXplZEFyZ3MgPSBzZWxmOlNlcmlhbGl6ZVRhYmxlKERhdGEuQXJncykNCiAgICAgICAgRGF0YS5BcmdzID0gU2VyaWFsaXplZEFyZ3MNCg0KICAgICAgICBzZWxmOkNvbW11bmljYXRlKCJRdWV1ZUxvZyIsIERhdGEpDQogICAgZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb21tQ2FsbGJhY2soVHlwZTogc3RyaW5nLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICBDb21tQ2FsbGJhY2tzW1R5cGVdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNhbGxiYWNrKFR5cGU6IHN0cmluZyk6ICguLi5hbnkpIC0+IC4uLmFueQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICByZXR1cm4gQ29tbUNhbGxiYWNrc1tUeXBlXQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgUHJvcGVydHk6IHN0cmluZykNCiAgICBpZiB0eXBlb2YoQ2hhbm5lbCkgPT0gIkluc3RhbmNlIiB0aGVuDQogICAgICAgIHJldHVybiBIb29rOkluZGV4KENoYW5uZWwsIFByb3BlcnR5KQ0KICAgIGVuZA0KDQogICAgLS0vLyBTb21lIGV4ZWN1dG9ycyByZXR1cm4gYSBVc2VyRGF0YSB0eXBlDQogICAgcmV0dXJuIENoYW5uZWxbUHJvcGVydHldDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbW11bmljYXRlKC4uLikNCiAgICBsb2NhbCBGaXJlID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkZpcmUiKQ0KICAgIEZpcmUoQ2hhbm5lbCwgLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb25uZWN0aW9uKENhbGxiYWNrKTogUkJYU2NyaXB0Q29ubmVjdGlvbg0KICAgIGxvY2FsIEV2ZW50ID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkV2ZW50IikNCiAgICByZXR1cm4gRXZlbnQ6Q29ubmVjdChDYWxsYmFjaykNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrKFR5cGU6IHN0cmluZywgQ2FsbGJhY2spOiBSQlhTY3JpcHRDb25uZWN0aW9uDQogICAgbG9jYWwgRXZlbnQgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRXZlbnQiKQ0KICAgIHJldHVybiBFdmVudDpDb25uZWN0KGZ1bmN0aW9uKFJlY2l2ZWRUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgaWYgUmVjaXZlZFR5cGUgfj0gVHlwZSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgQ2FsbGJhY2soLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrcyhUeXBlczogdGFibGUpDQogICAgZm9yIFR5cGU6IHN0cmluZywgQ2FsbGJhY2sgaW4gbmV4dCwgVHlwZXMgZG8NCiAgICAgICAgc2VsZjpBZGRUeXBlQ2FsbGJhY2soVHlwZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNyZWF0ZUNoYW5uZWwoKTogbnVtYmVyDQogICAgbG9jYWwgQ2hhbm5lbElELCBFdmVudCA9IHNlbGY6Q3JlYXRlQ29tbUNoYW5uZWwoKQ0KDQogICAgLS0vLyBDb25uZWN0IEdldENvbW1DYWxsYmFjayBmdW5jdGlvbg0KICAgIEV2ZW50LkV2ZW50OkNvbm5lY3QoZnVuY3Rpb24oVHlwZTogc3RyaW5nLCAuLi4pDQogICAgICAgIGxvY2FsIENhbGxiYWNrID0gc2VsZjpHZXRDb21tQ2FsbGJhY2soVHlwZSkNCiAgICAgICAgaWYgQ2FsbGJhY2sgdGhlbg0KICAgICAgICAgICAgQ2FsbGJhY2soLi4uKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQoNCiAgICByZXR1cm4gQ2hhbm5lbElELCBFdmVudA0KZW5kDQoNCk1vZHVsZTpNYWtlRGVidWdJZEhhbmRsZXIoKQ0KDQpyZXR1cm4gTW9kdWxl]]
}},d.Players local i=e:LoadLibraries(g)local j,k,l,m,n,o,p=i.Process,i.Hook,i.Ui
,i.Generation,i.Communication,i.Config,e:GetAsset('ProggyClean.ttf',true)local q
=e:CreateFont('ProggyClean',p)l:SetFontFile(q)j:CheckConfig(o)e:LoadModules(i,{
Modules=i,Services=d})local r,s=l:CreateMainWindow(),j:CheckIsSupported()if not
s then r:Close()return end local t,u=n:CreateChannel()n:AddCommCallback(
'QueueLog',function(...)l:QueueLog(...)end)n:AddCommCallback('Print',function(
...)l:ConsoleLog(...)end)local v=h.LocalPlayer m:SetSwapsCallback(function(w)w:
AddSwap(v,{String='LocalPlayer'})w:AddSwap(v.Character,{String='Character',
NextParent=v})end)l:CreateWindowContent(r)l:SetCommChannel(u)l:BeginLogService()
local w=e:MakeActorScript(g,t)k:LoadHooks(w,t)
--[[
	⣿⣿⣿⣿⣿ SIGMA SPY ⣿⣿⣿⣿⣿
	⣿⣿⣯⡉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉
	⠉⠻⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠈⠻⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠙⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠀⠀⣉⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⣠⣾⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⢀⣴⣿⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣀⣴⣿⣿⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣿⣿⣟⣁⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀
	⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿

	@author depso (depthso)
	@repo https://github.com/depthso
	@license MIT
	@description Sigma Remote Spy for Roblox
    
	This file is COMPILED, check /src folder for the source
	Build scripts are available in /build
]]

local a,b={UseWorkspace=false,NoActors=false,RepoUrl=
[[https://raw.githubusercontent.com/depthso/Sigma-Spy/refs/heads/main]],
ParserUrl=
[[https://raw.githubusercontent.com/depthso/Roblox-parser/refs/heads/main]]},{
...}local c=b[1]if typeof(c)=='table'then for d,e in c do a[d]=e end end local d
=setmetatable({},{__index=function(d,e)local f=game:GetService(e)return
cloneref(f)end})local e=(function()local e,f={UseWorkspace=false,Folder=
'Sigma spy',RepoUrl=nil,FolderStructure={['Sigma Spy']={'assets'}}}function e:
Init(g)local h,i=self.FolderStructure,g.Services f=i.HttpService self:
CheckFolders(h)end function e:PushConfig(g)for h,i in next,g do self[h]=i end
end function e:UrlFetch(g)local h={Url=g:gsub(' ','%%20'),Method='GET'}local i,j
=pcall(request,h)if not i then warn'[!] HTTP request error! Check console (F9)'
warn('> Url:',g)error(j)return''end local k,l=j.Body,j.StatusCode if l==404 then
warn'[!] The file requested has moved or been deleted.'warn(' >',g)return''end
return k,j end function e:MakePath(g)local h=self.Folder return`{h}/{g}`end
function e:LoadCustomasset(g)if not getcustomasset then return end local h,i=
pcall(getcustomasset,g)if not h then return end if not i or i==''then return end
return i end function e:GetFile(g,h)local i,j,k,l=self.RepoUrl,self.UseWorkspace
,self:MakePath(g),''if j then l=readfile(k)else l=self:UrlFetch(`{i}/{g}`)end if
h then self:FileCheck(k,function()return l end)return self:LoadCustomasset(k)end
return l end function e:GetTemplate(g)return self:GetFile(`templates/{g}.lua`)
end function e:FileCheck(g,h)if isfile(g)then return end local i=h()writefile(g,
i)end function e:FolderCheck(g)if isfolder(g)then return end makefolder(g)end
function e:CheckPath(g,h)return g and`{g}/{h}`or h end function e:CheckFolders(g
,h)for i,j in next,g do if typeof(j)=='table'then local k=self:CheckPath(h,i)
self:FolderCheck(k)self:CheckFolders(j,k)continue end local k=self:CheckPath(h,j
)self:FolderCheck(k)end end function e:TemplateCheck(g,h)self:FileCheck(g,
function()return self:GetTemplate(h)end)end function e:GetAsset(g,h)return self:
GetFile(`assets/{g}`,h)end function e:GetModule(g,h)local i=`{g}.lua`if h then
self:TemplateCheck(i,h)return readfile(i)end return self:GetFile(i)end function
e:LoadLibraries(g,...)local h={}for i,j in next,g do local k=typeof(j)=='table'
and j[1]=='base64'j=k and j[2]or j if typeof(j)~='string'and not k then h[i]=j
continue end if k then j=crypt.base64decode(j)g[i]=j end local l=loadstring(j,i)
assert(l,`Failed to load {i}`)h[i]=l(...)end return h end function e:LoadModules
(g,h)for i,j in next,g do local k=j.Init if not k then continue end j:Init(h)end
end function e:CreateFont(g,h)if not h then return end local i=`assets/{g}.json`
local j,k=self:MakePath(i),{name=g,faces={{name='Regular',weight=400,style=
'Normal',assetId=h}}}local l=f:JSONEncode(k)writefile(j,l)return j end function
e:CompileModule(g)local h='local Libraries = {'for i,j in g do if typeof(j)~=
'string'then continue end h..=`\t{i} = (function()\n{j}\nend)(),\n`end h..='}'
return h end function e:MakeActorScript(g,h)local i=e:CompileModule(g)i..=
'\r\n\tlocal ExtraData = {\r\n\t\tIsActor = true\r\n\t}\r\n\t'i..=`Libraries.Hook:BeginService(Libraries, ExtraData, {
h})`return i end return e end)()e:PushConfig(a)e:Init{Services=d}local f,g={
Config=e:GetModule('Sigma Spy/Config','Config'),ReturnSpoofs=e:GetModule(
'Sigma Spy/Return spoofs','Return Spoofs'),Configuration=a,Files=e,Process={
'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJQXJnczogdGFibGUsDQogICAgSWQ6IHN0cmluZywNCglNZXRob2Q6IHN0cmluZywNCiAgICBUcmFuc2ZlclR5cGU6IHN0cmluZywNCglWYWx1ZVJlcGxhY2VtZW50czogdGFibGUsDQogICAgUmV0dXJuVmFsdWVzOiB0YWJsZSwNCiAgICBPcmlnaW5hbEZ1bmM6IChJbnN0YW5jZSwgLi4uYW55KSAtPiAuLi5hbnkNCn0NCg0KLS0vLyBNb2R1bGUNCmxvY2FsIFByb2Nlc3MgPSB7DQogICAgLS0vLyBSZW1vdGUgY2xhc3Nlcw0KICAgIFJlbW90ZUNsYXNzRGF0YSA9IHsNCiAgICAgICAgWyJSZW1vdGVFdmVudCJdID0gew0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50RXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIlJlbW90ZUZ1bmN0aW9uIl0gPSB7DQogICAgICAgICAgICBJc1JlbW90ZUZ1bmN0aW9uID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImludm9rZVNlcnZlciIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiT25DbGllbnRJbnZva2UiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIlVucmVsaWFibGVSZW1vdGVFdmVudCJdID0gew0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50RXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIkJpbmRhYmxlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmUiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC0tIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAtLSAgICAgIkV2ZW50IiwNCiAgICAgICAgICAgIC0tIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJCaW5kYWJsZUZ1bmN0aW9uIl0gPSB7DQogICAgICAgICAgICBJc1JlbW90ZUZ1bmN0aW9uID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLS0gUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgIC0tICAgICAiT25JbnZva2UiLA0KICAgICAgICAgICAgLS0gfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBSZW1vdGVPcHRpb25zID0ge30sDQogICAgTG9vcGluZ1JlbW90ZXMgPSB7fSwNCiAgICBDb25maWdPdmVyd3JpdGVzID0gew0KICAgICAgICBbeyJzaXJodXJ0IiwgInBvdGFzc2l1bSIsICJ3YXZlIn1dID0gew0KICAgICAgICAgICAgRm9yY2VVc2VDdXN0b21Db21tID0gdHJ1ZQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIEhvb2sNCmxvY2FsIENvbW11bmljYXRpb24NCmxvY2FsIFJldHVyblNwb29mcw0KbG9jYWwgVWkNCg0KLS0vLyBDb21tdW5pY2F0aW9uIGNoYW5uZWwNCmxvY2FsIENoYW5uZWwNCmxvY2FsIENoYW5uZWxXcmFwcGVkID0gZmFsc2UNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGUpDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQogICAgLS0vLyBNb2R1bGVzDQogICAgVWkgPSBNb2R1bGVzLlVpDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIENvbW11bmljYXRpb24gPSBNb2R1bGVzLkNvbW11bmljYXRpb24NCiAgICBSZXR1cm5TcG9vZnMgPSBNb2R1bGVzLlJldHVyblNwb29mcw0KZW5kDQoNCi0tLy8gQ29tbXVuaWNhdGlvbg0KZnVuY3Rpb24gUHJvY2VzczpTZXRDaGFubmVsKE5ld0NoYW5uZWw6IEJpbmRhYmxlRXZlbnQsIElzV3JhcHBlZDogYm9vbGVhbikNCiAgICBDaGFubmVsID0gTmV3Q2hhbm5lbA0KICAgIENoYW5uZWxXcmFwcGVkID0gSXNXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRDb25maWdPdmVyd3JpdGVzKE5hbWU6IHN0cmluZykNCiAgICBsb2NhbCBDb25maWdPdmVyd3JpdGVzID0gc2VsZi5Db25maWdPdmVyd3JpdGVzDQoNCiAgICBmb3IgTGlzdCwgT3ZlcndyaXRlcyBpbiBuZXh0LCBDb25maWdPdmVyd3JpdGVzIGRvDQogICAgICAgIGlmIG5vdCB0YWJsZS5maW5kKExpc3QsIE5hbWUpIHRoZW4gY29udGludWUgZW5kDQogICAgICAgIHJldHVybiBPdmVyd3JpdGVzDQogICAgZW5kDQogICAgcmV0dXJuDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0NvbmZpZyhDb25maWc6IHRhYmxlKQ0KICAgIGxvY2FsIE5hbWUgPSBpZGVudGlmeWV4ZWN1dG9yKCk6bG93ZXIoKQ0KDQogICAgLS0vLyBGb3JjZSBjb25maWd1cmF0aW9uIG92ZXJ3cml0ZXMgZm9yIHNwZWNpZmljIGV4ZWN1dG9ycw0KICAgIGxvY2FsIE92ZXJ3cml0ZXMgPSBzZWxmOkdldENvbmZpZ092ZXJ3cml0ZXMoTmFtZSkNCiAgICBpZiBub3QgT3ZlcndyaXRlcyB0aGVuIHJldHVybiBlbmQNCg0KICAgIE1lcmdlKENvbmZpZywgT3ZlcndyaXRlcykNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNsZWFuQ0Vycm9yKEVycm9yOiBzdHJpbmcpOiBzdHJpbmcNCiAgICBFcnJvciA9IEVycm9yOmdzdWIoIjolZCs6ICIsICIiKQ0KICAgIEVycm9yID0gRXJyb3I6Z3N1YigiLCBnb3QgJWErIiwgIiIpDQogICAgRXJyb3IgPSBFcnJvcjpnc3ViKCJpbnZhbGlkIGFyZ3VtZW50IiwgIm1pc3NpbmcgYXJndW1lbnQiKQ0KICAgIHJldHVybiBFcnJvcg0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RGVlcENsb25lVGFibGUoVGFibGUsIElnbm9yZTogdGFibGU/KQ0KCWxvY2FsIE5ldyA9IHt9DQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgdmFsdWUgaXMgaWdub3JlZA0KICAgICAgICBpZiBJZ25vcmUgYW5kIHRhYmxlLmZpbmQoSWdub3JlLCBWYWx1ZSkgdGhlbiBjb250aW51ZSBlbmQNCg0KCQlOZXdbS2V5XSA9IHR5cGVvZihWYWx1ZSkgPT0gInRhYmxlIiBhbmQgc2VsZjpEZWVwQ2xvbmVUYWJsZShWYWx1ZSkgb3IgVmFsdWUNCgllbmQNCglyZXR1cm4gTmV3DQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpVbnBhY2soVGFibGU6IHRhYmxlKQ0KCWxvY2FsIExlbmd0aCA9IHRhYmxlLm1heG4oVGFibGUpDQoJcmV0dXJuIHVucGFjayhUYWJsZSwgMSwgTGVuZ3RoKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6UHVzaENvbmZpZyhPdmVyd3JpdGVzKQ0KICAgIE1lcmdlKHNlbGYsIE92ZXJ3cml0ZXMpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpGdW5jRXhpc3RzKE5hbWU6IHN0cmluZykNCglyZXR1cm4gZ2V0ZmVudigxKVtOYW1lXQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tFeGVjdXRvcigpOiBib29sZWFuDQogICAgbG9jYWwgQmxhY2tsaXN0ZWQgPSB7DQogICAgICAgICJ4ZW5vIiwNCiAgICAgICAgInNvbGFyYSIsDQogICAgICAgICJqanNwbG9pdCINCiAgICB9DQoNCiAgICBsb2NhbCBOYW1lID0gaWRlbnRpZnlleGVjdXRvcigpOmxvd2VyKCkNCiAgICBsb2NhbCBJc0JsYWNrbGlzdGVkID0gdGFibGUuZmluZChCbGFja2xpc3RlZCwgTmFtZSkNCg0KICAgIC0tLy8gU29tZSBleGVjdXRvcnMgaGF2ZSBicm9rZW4gZnVuY3Rpb25hbGl0eQ0KICAgIGlmIElzQmxhY2tsaXN0ZWQgdGhlbg0KICAgICAgICBVaTpTaG93VW5zdXBwb3J0ZWRFeGVjdXRvcihOYW1lKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0Z1bmN0aW9ucygpOiBib29sZWFuDQogICAgbG9jYWwgQ29yZUZ1bmN0aW9ucyA9IHsNCiAgICAgICAgImhvb2ttZXRhbWV0aG9kIiwNCiAgICAgICAgImhvb2tmdW5jdGlvbiIsDQogICAgICAgICJnZXRyYXdtZXRhdGFibGUiLA0KICAgICAgICAic2V0cmVhZG9ubHkiDQogICAgfQ0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgZnVuY3Rpb25zIGV4aXN0IGluIHRoZSBFTlYNCiAgICBmb3IgXywgTmFtZSBpbiBDb3JlRnVuY3Rpb25zIGRvDQogICAgICAgIGxvY2FsIEZ1bmMgPSBzZWxmOkZ1bmNFeGlzdHMoTmFtZSkNCiAgICAgICAgaWYgRnVuYyB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIC0tLy8gRnVuY3Rpb24gbWlzc2luZyENCiAgICAgICAgVWk6U2hvd1Vuc3VwcG9ydGVkKE5hbWUpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrSXNTdXBwb3J0ZWQoKTogYm9vbGVhbg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGV4ZWN1dG9yIGlzIGJsYWNrbGlzdGVkDQogICAgbG9jYWwgRXhlY3V0b3JTdXBwb3J0ZWQgPSBzZWxmOkNoZWNrRXhlY3V0b3IoKQ0KICAgIGlmIG5vdCBFeGVjdXRvclN1cHBvcnRlZCB0aGVuDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgY29yZSBmdW5jdGlvbnMgZXhpc3QNCiAgICBsb2NhbCBGdW5jdGlvbnNTdXBwb3J0ZWQgPSBzZWxmOkNoZWNrRnVuY3Rpb25zKCkNCiAgICBpZiBub3QgRnVuY3Rpb25zU3VwcG9ydGVkIHRoZW4NCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0Q2xhc3NEYXRhKFJlbW90ZTogSW5zdGFuY2UpOiB0YWJsZT8NCiAgICBsb2NhbCBSZW1vdGVDbGFzc0RhdGEgPSBzZWxmLlJlbW90ZUNsYXNzRGF0YQ0KICAgIGxvY2FsIENsYXNzTmFtZSA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiQ2xhc3NOYW1lIikNCg0KICAgIHJldHVybiBSZW1vdGVDbGFzc0RhdGFbQ2xhc3NOYW1lXQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6SXNQcm90ZWN0ZWRSZW1vdGUoUmVtb3RlOiBJbnN0YW5jZSk6IGJvb2xlYW4NCiAgICBsb2NhbCBJc0RlYnVnID0gUmVtb3RlID09IENvbW11bmljYXRpb24uRGVidWdJZFJlbW90ZQ0KICAgIGxvY2FsIElzQ2hhbm5lbCA9IFJlbW90ZSA9PSAoQ2hhbm5lbFdyYXBwZWQgYW5kIENoYW5uZWwuQ2hhbm5lbCBvciBDaGFubmVsKQ0KDQogICAgcmV0dXJuIElzRGVidWcgb3IgSXNDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpSZW1vdGVBbGxvd2VkKFJlbW90ZTogSW5zdGFuY2UsIFRyYW5zZmVyVHlwZTogc3RyaW5nLCBNZXRob2Q6IHN0cmluZz8pOiBib29sZWFuPw0KICAgIGlmIHR5cGVvZihSZW1vdGUpIH49ICdJbnN0YW5jZScgdGhlbiByZXR1cm4gZW5kDQogICAgDQogICAgLS0vLyBDaGVjayBpZiB0aGUgUmVtb3RlIGlzIHByb3RlY3RlZA0KICAgIGlmIHNlbGY6SXNQcm90ZWN0ZWRSZW1vdGUoUmVtb3RlKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gRmV0Y2ggY2xhc3MgdGFibGUNCglsb2NhbCBDbGFzc0RhdGEgPSBzZWxmOkdldENsYXNzRGF0YShSZW1vdGUpDQoJaWYgbm90IENsYXNzRGF0YSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHRyYW5zZmVyIHR5cGUgaGFzIGRhdGENCglsb2NhbCBBbGxvd2VkID0gQ2xhc3NEYXRhW1RyYW5zZmVyVHlwZV0NCglpZiBub3QgQWxsb3dlZCB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIG1ldGhvZCBpcyBhbGxvd2VkDQoJaWYgTWV0aG9kIHRoZW4NCgkJcmV0dXJuIHRhYmxlLmZpbmQoQWxsb3dlZCwgTWV0aG9kKSB+PSBuaWwNCgllbmQNCg0KCXJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpTZXRFeHRyYURhdGEoRGF0YTogdGFibGUpDQogICAgaWYgbm90IERhdGEgdGhlbiByZXR1cm4gZW5kDQogICAgc2VsZi5FeHRyYURhdGEgPSBEYXRhDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRSZW1vdGVTcG9vZihSZW1vdGU6IEluc3RhbmNlLCBNZXRob2Q6IHN0cmluZywgLi4uKQ0KICAgIGxvY2FsIFNwb29mID0gUmV0dXJuU3Bvb2ZzW1JlbW90ZV0NCg0KICAgIGlmIG5vdCBTcG9vZiB0aGVuIHJldHVybiBlbmQNCiAgICBpZiBTcG9vZi5NZXRob2Qgfj0gTWV0aG9kIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gU3Bvb2YuUmV0dXJuDQoNCiAgICAtLS8vIENhbGwgdGhlIFJldHVyblZhbHVlcyBmdW5jdGlvbiB0eXBlDQogICAgaWYgdHlwZW9mKFJldHVyblZhbHVlcykgPT0gImZ1bmN0aW9uIiB0aGVuDQogICAgICAgIFJldHVyblZhbHVlcyA9IFJldHVyblZhbHVlcyguLi4pDQogICAgZW5kDQoNCglDb21tdW5pY2F0aW9uOldhcm4oIlNwb29mZWQiLCBNZXRob2QpDQoJcmV0dXJuIFJldHVyblZhbHVlcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RmluZENhbGxpbmdMQ2xvc3VyZShPZmZzZXQ6IG51bWJlcikNCiAgICBPZmZzZXQgKz0gMQ0KDQogICAgd2hpbGUgdHJ1ZSBkbw0KICAgICAgICBPZmZzZXQgKz0gMQ0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHN0YWNrIGxldmVsIGlzIHZhbGlkDQogICAgICAgIGxvY2FsIElzVmFsaWQgPSBkZWJ1Zy5pbmZvKE9mZnNldCwgImwiKSB+PSAtMQ0KICAgICAgICBpZiBub3QgSXNWYWxpZCB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGZ1bmN0aW9uIGlzIHZhbHVkDQogICAgICAgIGxvY2FsIEZ1bmN0aW9uID0gZGVidWcuaW5mbyhPZmZzZXQsICJmIikNCiAgICAgICAgaWYgbm90IEZ1bmN0aW9uIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgICAgIHJldHVybiBGdW5jdGlvbg0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2FsbGJhY2soRGF0YTogUmVtb3RlRGF0YSwgLi4uKTogdGFibGU/DQogICAgLS0vLyBVbnBhY2sgRGF0YQ0KICAgIGxvY2FsIE9yaWdpbmFsRnVuYyA9IERhdGEuT3JpZ2luYWxGdW5jDQogICAgbG9jYWwgSWQgPSBEYXRhLklkDQogICAgbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KDQogICAgbG9jYWwgUmVtb3RlRGF0YSA9IHNlbGY6R2V0UmVtb3RlRGF0YShJZCkNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIFJlbW90ZSBpcyBCbG9ja2VkDQogICAgaWYgUmVtb3RlRGF0YS5CbG9ja2VkIHRoZW4gcmV0dXJuIHt9IGVuZA0KDQogICAgLS0vLyBDaGVjayBmb3IgYSBzcG9vZg0KICAgIGxvY2FsIFNwb29mID0gc2VsZjpHZXRSZW1vdGVTcG9vZihSZW1vdGUsIE1ldGhvZCwgT3JpZ2luYWxGdW5jLCAuLi4pDQogICAgaWYgU3Bvb2YgdGhlbiByZXR1cm4gU3Bvb2YgZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBvcmlnbmFsIGZ1bmN0aW9uIHdhcyBwYXNzZWQNCiAgICBpZiBub3QgT3JpZ2luYWxGdW5jIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBJbnZva2Ugb3JpZ25hbCBmdW5jdGlvbg0KICAgIHJldHVybiB7DQogICAgICAgIE9yaWdpbmFsRnVuYyhSZW1vdGUsIC4uLikNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpQcm9jZXNzUmVtb3RlKERhdGE6IFJlbW90ZURhdGEsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCiAgICBsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQogICAgbG9jYWwgVHJhbnNmZXJUeXBlID0gRGF0YS5UcmFuc2ZlclR5cGUNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIHRyYW5zZmVydHlwZSBtZXRob2QgaXMgYWxsb3dlZA0KCWlmIFRyYW5zZmVyVHlwZSBhbmQgbm90IHNlbGY6UmVtb3RlQWxsb3dlZChSZW1vdGUsIFRyYW5zZmVyVHlwZSwgTWV0aG9kKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gRmV0Y2ggZGV0YWlscw0KICAgIGxvY2FsIElkID0gQ29tbXVuaWNhdGlvbjpHZXREZWJ1Z0lkKFJlbW90ZSkNCiAgICBsb2NhbCBDbGFzc0RhdGEgPSBzZWxmOkdldENsYXNzRGF0YShSZW1vdGUpDQogICAgbG9jYWwgVGltZXN0YW1wID0gdGljaygpDQoNCiAgICAtLS8vIEFkZCBleHRyYSBkYXRhIGludG8gdGhlIGxvZyBpZiBuZWVkZWQNCiAgICBsb2NhbCBFeHRyYURhdGEgPSBzZWxmLkV4dHJhRGF0YQ0KICAgIGlmIEV4dHJhRGF0YSB0aGVuDQogICAgICAgIE1lcmdlKERhdGEsIEV4dHJhRGF0YSkNCiAgICBlbmQNCg0KICAgIC0tLy8gR2V0IGNhbGxlciBpbmZvcm1hdGlvbg0KICAgIGxvY2FsIENhbGxpbmdGdW5jdGlvbiA9IHNlbGY6RmluZENhbGxpbmdMQ2xvc3VyZSg2KQ0KICAgIGxvY2FsIFNvdXJjZVNjcmlwdA0KICAgIGlmIENhbGxpbmdGdW5jdGlvbiB0aGVuDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IHJhd2dldChnZXRmZW52KENhbGxpbmdGdW5jdGlvbiksICJzY3JpcHQiKQ0KICAgIGVuZA0KDQogICAgLS0vLyBBZGQgdG8gcXVldWUNCiAgICBNZXJnZShEYXRhLCB7DQoJCUNhbGxpbmdTY3JpcHQgPSBnZXRjYWxsaW5nc2NyaXB0KCksDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IFNvdXJjZVNjcmlwdCwNCgkJQ2FsbGluZ0Z1bmN0aW9uID0gQ2FsbGluZ0Z1bmN0aW9uLA0KICAgICAgICBJZCA9IElkLA0KCQlDbGFzc0RhdGEgPSBDbGFzc0RhdGEsDQogICAgICAgIFRpbWVzdGFtcCA9IFRpbWVzdGFtcCwNCiAgICAgICAgQXJncyA9IENvbW11bmljYXRpb246U2VyaWFsaXplVGFibGUoey4uLn0pDQogICAgfSkNCg0KICAgIC0tLy8gSW52b2tlIHRoZSBSZW1vdGUgYW5kIGxvZyByZXR1cm4gdmFsdWVzDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gc2VsZjpDYWxsYmFjayhEYXRhLCAuLi4pDQogICAgRGF0YS5SZXR1cm5WYWx1ZXMgPSBSZXR1cm5WYWx1ZXMNCg0KICAgIC0tLy8gUXVldWUgbG9nDQogICAgQ29tbXVuaWNhdGlvbjpRdWV1ZUxvZyhEYXRhKQ0KDQogICAgcmV0dXJuIFJldHVyblZhbHVlcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0QWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KCWZvciBSZW1vdGVJRCwgRGF0YSBpbiBuZXh0LCBSZW1vdGVPcHRpb25zIGRvDQoJCURhdGFbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KDQogICAgLS0vLyBDaGVjayBmb3IgZXhpc3RpbmcgcmVtb3RlIGRhdGENCglsb2NhbCBFeGlzdGluZyA9IFJlbW90ZU9wdGlvbnNbSWRdDQoJaWYgRXhpc3RpbmcgdGhlbiByZXR1cm4gRXhpc3RpbmcgZW5kDQoJDQogICAgLS0vLyBCYXNlIHJlbW90ZSBkYXRhDQoJbG9jYWwgRGF0YSA9IHsNCgkJRXhjbHVkZWQgPSBmYWxzZSwNCgkJQmxvY2tlZCA9IGZhbHNlDQoJfQ0KDQoJUmVtb3RlT3B0aW9uc1tJZF0gPSBEYXRhDQoJcmV0dXJuIERhdGENCmVuZA0KDQotLS8vIFRoZSBjb21tdW5pY2F0aW9uIGNyZWF0ZXMgYSBkaWZmZXJlbnQgdGFibGUgYWRkcmVzcw0KLS0vLyBSZWNpdmVkIHRhYmxlcyB3aWxsIG5vdCBiZSB0aGUgc2FtZQ0KZnVuY3Rpb24gUHJvY2VzczpTZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcsIFJlbW90ZURhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCiAgICBSZW1vdGVPcHRpb25zW0lkXSA9IFJlbW90ZURhdGENCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlVwZGF0ZVJlbW90ZURhdGEoSWQ6IHN0cmluZywgUmVtb3RlRGF0YTogdGFibGUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiUmVtb3RlRGF0YSIsIElkLCBSZW1vdGVEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VXBkYXRlQWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiQWxsUmVtb3RlRGF0YSIsIEtleSwgVmFsdWUpDQplbmQNCg0KcmV0dXJuIFByb2Nlc3M=]]
},Hook={'base64',
[[bG9jYWwgSG9vayA9IHsNCglPcmlnbmFsTmFtZWNhbGwgPSBuaWwsDQoJT3JpZ25hbEluZGV4ID0gbmlsLA0KfQ0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBNZXRhQ2FsbGJhY2sgPSAoSW5zdGFuY2UsIC4uLmFueSkgLT4gLi4uYW55DQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgTW9kdWxlcw0KbG9jYWwgUHJvY2Vzcw0KbG9jYWwgQ29uZmlndXJhdGlvbg0KbG9jYWwgQ29uZmlnDQoNCmxvY2FsIEV4ZUVOViA9IGdldGZlbnYoMSkNCg0KZnVuY3Rpb24gSG9vazpJbml0KERhdGEpDQogICAgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQoJUHJvY2VzcyA9IE1vZHVsZXMuUHJvY2Vzcw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnIG9yIENvbmZpZw0KCUNvbmZpZ3VyYXRpb24gPSBNb2R1bGVzLkNvbmZpZ3VyYXRpb24gb3IgQ29uZmlndXJhdGlvbg0KZW5kDQoNCi0tLy8gVGhlIGNhbGxiYWNrIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhIG5pbCB2YWx1ZSBzb21ldGltZXMgd2hpY2ggc2hvdWxkIGJlIGluZ29yZWQNCmxvY2FsIEhvb2tNaWRkbGUgPSBuZXdjY2xvc3VyZShmdW5jdGlvbihPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJLS0vLyBJbnZva2UgY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBhIHJlcG9uY2Ugb3RoZXJ3aXNlIGlnbm9yZWQNCglsb2NhbCBSZXR1cm5WYWx1ZXMgPSBDYWxsYmFjayguLi4pDQoJaWYgUmV0dXJuVmFsdWVzIHRoZW4NCgkJcmV0dXJuIFByb2Nlc3M6VW5wYWNrKFJldHVyblZhbHVlcykNCgllbmQNCg0KCS0tLy8gSW52b2tlIG9yaWduYWwgZnVuY3Rpb24NCglyZXR1cm4gT3JpZ2luYWxGdW5jKC4uLikNCmVuZCkNCg0KLS0vLyBnZXRyYXdtZXRhdGFibGUNCmZ1bmN0aW9uIEhvb2s6UmVwbGFjZU1ldGFNZXRob2QoT2JqZWN0OiBJbnN0YW5jZSwgQ2FsbDogc3RyaW5nLCBDYWxsYmFjazogTWV0YUNhbGxiYWNrKTogTWV0YUNhbGxiYWNrDQoJbG9jYWwgTWV0YXRhYmxlID0gZ2V0cmF3bWV0YXRhYmxlKE9iamVjdCkNCglsb2NhbCBPcmlnaW5hbEZ1bmMgPSByYXdnZXQoTWV0YXRhYmxlLCBDYWxsKQ0KCQ0KCS0tLy8gUmVwbGFjZSBmdW5jdGlvbg0KCXNldHJlYWRvbmx5KE1ldGF0YWJsZSwgZmFsc2UpDQoJcmF3c2V0KE1ldGF0YWJsZSwgQ2FsbCwgbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJZW5kKSkNCglzZXRyZWFkb25seShNZXRhdGFibGUsIHRydWUpDQoNCglyZXR1cm4gT3JpZ2luYWxGdW5jDQplbmQNCg0KLS0vLyBob29rZnVuY3Rpb24NCmZ1bmN0aW9uIEhvb2s6SG9va0Z1bmN0aW9uKEZ1bmM6ICguLi5hbnkpIC0+IC4uLmFueSwgQ2FsbGJhY2s6ICguLi5hbnkpIC0+IC4uLmFueSkNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglPcmlnaW5hbEZ1bmMgPSBob29rZnVuY3Rpb24oRnVuYywgZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJZW5kKQ0KCXJldHVybiBPcmlnaW5hbEZ1bmMNCmVuZA0KDQotLS8vIGhvb2ttZXRhbWV0aG9kDQpmdW5jdGlvbiBIb29rOkhvb2tNZXRhQ2FsbChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhQ2FsbGJhY2spOiBNZXRhQ2FsbGJhY2sNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglPcmlnaW5hbEZ1bmMgPSBob29rbWV0YW1ldGhvZChPYmplY3QsIENhbGwsIG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgLi4uKQ0KCWVuZCkpDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFNZXRob2QoT2JqZWN0OiBJbnN0YW5jZSwgQ2FsbDogc3RyaW5nLCBDYWxsYmFjazogTWV0YUNhbGxiYWNrKTogTWV0YUNhbGxiYWNrDQoJLS0vLyBHZXRyYXdtZXRhdGFibGUNCglpZiBDb25maWcuUmVwbGFjZU1ldGFDYWxsRnVuYyB0aGVuDQoJCXJldHVybiBzZWxmOlJlcGxhY2VNZXRhTWV0aG9kKE9iamVjdCwgQ2FsbCwgQ2FsbGJhY2spDQoJZW5kDQoJDQoJLS0vLyBIb29rbWV0YW1ldGhvZA0KCXJldHVybiBzZWxmOkhvb2tNZXRhQ2FsbChPYmplY3QsIENhbGwsIENhbGxiYWNrKQ0KZW5kDQoNCi0tLy8gVGhpcyBpbmNsdWRlcyBhIGZldyBwYXRjaGVzIGZvciBleGVjdXRvciBmdW5jdGlvbnMgdGhhdCByZXN1bHQgaW4gZGV0ZWN0aW9uDQotLS8vIFRoaXMgaXNuJ3QgYnVsbGV0cHJvb2Ygc2luY2Ugc29tZSBmdW5jdGlvbnMgbGlrZSBob29rZnVuY3Rpb24gSSBjYW4ndCBwYXRjaA0KZnVuY3Rpb24gSG9vazpQYXRjaEZ1bmN0aW9ucygpDQoJLS0vLyBDaGVjayBpZiB0aGlzIGZ1bmN0aW9uIGlzIGRpc2FibGVkIGluIHRoZSBjb25maWd1cmF0aW9uDQoJaWYgQ29uZmlnLk5vRnVuY3Rpb25QYXRjaGluZyB0aGVuIHJldHVybiBlbmQNCg0KCWxvY2FsIFBhdGNoZXMgPSB7DQoJCS0tLy8gRXJyb3IgZGV0ZWN0aW9uIHBhdGNoDQoJCS0tLy8gaG9va2Z1bmN0aW9uIG1heSBzdGlsbCBiZSBkZXRlY3RlZCBkZXBlbmRpbmcgb24gdGhlIGV4ZWN1dG9yDQoJCVtwY2FsbF0gPSAgZnVuY3Rpb24oT2xkRnVuYywgRnVuYywgLi4uKQ0KCQkJbG9jYWwgUmVzcG9uY2UgPSB7T2xkRnVuYyhGdW5jLCAuLi4pfQ0KCQkJbG9jYWwgU3VjY2VzcywgRXJyb3IgPSBSZXNwb25jZVsxXSwgUmVzcG9uY2VbMl0NCg0KCQkJLS0vLyBQYXRjaCBjLWNsb3N1cmUgZXJyb3IgZGV0ZWN0aW9uDQoJCQlpZiBub3QgU3VjY2VzcyBhbmQgaXNjY2xvc3VyZShGdW5jKSB0aGVuDQoJCQkJbG9jYWwgTmV3RXJyb3IgPSBQcm9jZXNzOkNsZWFuQ0Vycm9yKEVycm9yKQ0KCQkJCVJlc3BvbmNlWzJdID0gTmV3RXJyb3INCgkJCWVuZA0KDQoJCQlyZXR1cm4gUHJvY2VzczpVbnBhY2soUmVzcG9uY2UpDQoJCWVuZCwNCgkJW2dldGZlbnZdID0gZnVuY3Rpb24oT2xkRnVuYywgTGV2ZWw6IG51bWJlciwgLi4uKQ0KCQkJbG9jYWwgUmVzcG9uY2UgPSB7T2xkRnVuYyhMZXZlbCwgLi4uKX0NCgkJCWxvY2FsIEVOViA9IFJlc3BvbmNlWzFdDQoNCgkJCS0tLy8gX190b3N0cmluZyBFTlYgZGV0ZWN0aW9uIHBhdGNoDQoJCQlpZiBub3QgY2hlY2tjYWxsZXIoKSBhbmQgRU5WID09IEV4ZUVOViB0aGVuDQoJCQkJcmV0dXJuIE9sZEZ1bmMoOTk5OTksIC4uLikNCgkJCWVuZA0KDQoJCQlyZXR1cm4gUHJvY2VzczpVbnBhY2soUmVzcG9uY2UpDQoJCWVuZA0KCX0NCg0KCS0tLy8gSG9vayBlYWNoIGZ1bmN0aW9uDQoJZm9yIEZ1bmMsIENhbGxCYWNrIGluIFBhdGNoZXMgZG8NCgkJbG9jYWwgT2xkRnVuYyA9IGNsb25lZnVuY3Rpb24oRnVuYykNCgkJaG9va2Z1bmN0aW9uKEZ1bmMsIGZ1bmN0aW9uKC4uLikNCgkJCXJldHVybiBDYWxsQmFjayhPbGRGdW5jLCAuLi4pDQoJCWVuZCkNCgllbmQNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBNZXJnZShCYXNlOiB0YWJsZSwgTmV3OiB0YWJsZSkNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOlJ1bk9uQWN0b3JzKENvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJaWYgbm90IGdldGFjdG9ycyB0aGVuIHJldHVybiBlbmQNCgkNCglsb2NhbCBBY3RvcnMgPSBnZXRhY3RvcnMoKQ0KCWlmIG5vdCBBY3RvcnMgdGhlbiByZXR1cm4gZW5kDQoJDQoJZm9yIF8sIEFjdG9yIGluIEFjdG9ycyBkbyANCgkJcnVuX29uX2FjdG9yKEFjdG9yLCBDb2RlLCBDaGFubmVsSWQpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gUHJvY2Vzc1JlbW90ZShPcmlnaW5hbEZ1bmMsIE1ldGFNZXRob2Q6IHN0cmluZywgc2VsZiwgTWV0aG9kOiBzdHJpbmcsIC4uLikNCglyZXR1cm4gUHJvY2VzczpQcm9jZXNzUmVtb3RlKHsNCgkJUmVtb3RlID0gc2VsZiwNCgkJTWV0aG9kID0gTWV0aG9kLA0KCQlPcmlnaW5hbEZ1bmMgPSBPcmlnaW5hbEZ1bmMsDQoJCU1ldGFNZXRob2QgPSBNZXRhTWV0aG9kLA0KCQlUcmFuc2ZlclR5cGUgPSAiU2VuZCIsDQoJCUlzRXhwbG9pdCA9IGNoZWNrY2FsbGVyKCkNCgl9LCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZTogc3RyaW5nLCBGdW5jTmFtZTogc3RyaW5nKQ0KCWxvY2FsIFJlbW90ZSA9IEluc3RhbmNlLm5ldyhDbGFzc05hbWUpDQoJbG9jYWwgRnVuYyA9IFJlbW90ZVtGdW5jTmFtZV0NCglsb2NhbCBPcmlnaW5hbEZ1bmMNCg0KCS0tLy8gUmVtb3RlcyB3aWxsIHNoYXJlIHRoZSBzYW1lIGZ1bmN0aW9ucw0KCS0tLy8gCUZvciBleGFtcGxlIEZpcmVTZXJ2ZXIgd2lsbCBiZSBpZGVudGljYWwNCgktLS8vIEFkZGlvbmFsbHksIHRoaXMgaXMgZm9yIF9faW5kZXggY2FsbHMuDQoJLS0vLyAJQSBfX25hbWVjYWxsIGhvb2sgd2lsbCBub3QgZGV0ZWN0IHRoaXMNCglPcmlnaW5hbEZ1bmMgPSBzZWxmOkhvb2tGdW5jdGlvbihGdW5jLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBpcyBhbGxvd2VkIA0KCQlpZiBub3QgUHJvY2VzczpSZW1vdGVBbGxvd2VkKHNlbGYsICJTZW5kIiwgRnVuY05hbWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gUHJvY2VzcyB0aGUgcmVtb3RlIGRhdGENCgkJcmV0dXJuIFByb2Nlc3NSZW1vdGUoT3JpZ2luYWxGdW5jLCAiX19pbmRleCIsIHNlbGYsIEZ1bmNOYW1lLCAuLi4pDQoJZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va1JlbW90ZUluZGV4ZXMoKQ0KCWxvY2FsIFJlbW90ZUNsYXNzRGF0YSA9IFByb2Nlc3MuUmVtb3RlQ2xhc3NEYXRhDQoJZm9yIENsYXNzTmFtZSwgRGF0YSBpbiBSZW1vdGVDbGFzc0RhdGEgZG8NCgkJbG9jYWwgRnVuY05hbWUgPSBEYXRhLlNlbmRbMV0NCgkJc2VsZjpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZSwgRnVuY05hbWUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpbkhvb2tzKCkNCgktLS8vIEhvb2sgUmVtb3RlIGZ1bmN0aW9ucw0KCXNlbGY6SG9va1JlbW90ZUluZGV4ZXMoKQ0KDQoJLS0vLyBOYW1lY2FsbCBob29rDQoJbG9jYWwgT3JpZ2luYWxOYW1lQ2FsbA0KCU9yaWdpbmFsTmFtZUNhbGwgPSBzZWxmOkhvb2tNZXRhTWV0aG9kKGdhbWUsICJfX25hbWVjYWxsIiwgZnVuY3Rpb24oc2VsZiwgLi4uKQ0KCQlsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpDQoJCXJldHVybiBQcm9jZXNzUmVtb3RlKE9yaWdpbmFsTmFtZUNhbGwsICJfX25hbWVjYWxsIiwgc2VsZiwgTWV0aG9kLCAuLi4pDQoJZW5kKQ0KDQoJTWVyZ2Uoc2VsZiwgew0KCQlPcmlnbmFsTmFtZWNhbGwgPSBPcmlnaW5hbE5hbWVDYWxsLA0KCQktLU9yaWduYWxJbmRleCA9IE9pDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkluZGV4KE9iamVjdDogSW5zdGFuY2UsIEtleTogc3RyaW5nKQ0KCXJldHVybiBPYmplY3RbS2V5XQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6UHVzaENvbmZpZyhPdmVyd3JpdGVzKQ0KICAgIE1lcmdlKHNlbGYsIE92ZXJ3cml0ZXMpDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rQ2xpZW50SW52b2tlKFJlbW90ZSwgTWV0aG9kLCBDYWxsYmFjayk6ICgoLi4uYW55KSAtPiAuLi5hbnkpPw0KCWxvY2FsIFN1Y2Nlc3MsIEZ1bmN0aW9uID0gcGNhbGwoZnVuY3Rpb24oKQ0KCQlyZXR1cm4gZ2V0Y2FsbGJhY2t2YWx1ZShSZW1vdGUsIE1ldGhvZCkNCgllbmQpDQoNCgktLS8vIFNvbWUgZXhlY3V0b3JzIGxpa2UgUG90YXNzaXVtIHdpbGwgdGhyb3cgYSBlcnJvciBpZiB0aGUgQ2FsbGJhY2sgdmFsdWUgaXMgbmlsDQoJaWYgbm90IFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBQcmV2aW91c0Z1bmN0aW9uID0gRnVuY3Rpb24NCglSZW1vdGVbTWV0aG9kXSA9IENhbGxiYWNrDQoNCglyZXR1cm4gUHJldmlvdXNGdW5jdGlvbg0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TXVsdGlDb25uZWN0KFJlbW90ZXMpDQoJZm9yIF8sIFJlbW90ZSBpbiBuZXh0LCBSZW1vdGVzIGRvDQoJCXNlbGY6Q29ubmVjdENsaWVudFJlY2l2ZShSZW1vdGUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpDb25uZWN0Q2xpZW50UmVjaXZlKFJlbW90ZSkNCgktLS8vIENoZWNrIGlmIHRoZSBSZW1vdGUgY2xhc3MgaXMgYWxsb3dlZCBmb3IgcmVjZWl2aW5nDQoJbG9jYWwgQWxsb3dlZCA9IFByb2Nlc3M6UmVtb3RlQWxsb3dlZChSZW1vdGUsICJSZWNlaXZlIikNCglpZiBub3QgQWxsb3dlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBoYXMgUmVtb3RlIGNsYXNzIGRhdGENCiAgICBsb2NhbCBDbGFzc0RhdGEgPSBQcm9jZXNzOkdldENsYXNzRGF0YShSZW1vdGUpDQogICAgbG9jYWwgSXNSZW1vdGVGdW5jdGlvbiA9IENsYXNzRGF0YS5Jc1JlbW90ZUZ1bmN0aW9uDQogICAgbG9jYWwgTWV0aG9kID0gQ2xhc3NEYXRhLlJlY2VpdmVbMV0NCglsb2NhbCBQcmV2aW91c0Z1bmN0aW9uID0gbmlsDQoNCgktLS8vIE5ldyBjYWxsYmFjayBmdW5jdGlvbg0KCWxvY2FsIGZ1bmN0aW9uIENhbGxiYWNrKC4uLikNCiAgICAgICAgcmV0dXJuIFByb2Nlc3M6UHJvY2Vzc1JlbW90ZSh7DQogICAgICAgICAgICBSZW1vdGUgPSBSZW1vdGUsDQogICAgICAgICAgICBNZXRob2QgPSBNZXRob2QsDQogICAgICAgICAgICBPcmlnaW5hbEZ1bmMgPSBQcmV2aW91c0Z1bmN0aW9uLA0KICAgICAgICAgICAgSXNSZWNlaXZlID0gdHJ1ZSwNCiAgICAgICAgICAgIE1ldGFNZXRob2QgPSAiQ29ubmVjdCIsDQoJCQlJc0V4cGxvaXQgPSBjaGVja2NhbGxlcigpDQogICAgICAgIH0sIC4uLikNCgllbmQNCg0KCS0tLy8gQ29ubmVjdCByZW1vdGUNCglpZiBub3QgSXNSZW1vdGVGdW5jdGlvbiB0aGVuDQogICAJCVJlbW90ZVtNZXRob2RdOkNvbm5lY3QoQ2FsbGJhY2spDQoJZWxzZSAtLSBSZW1vdGUgZnVuY3Rpb25zDQoJCXNlbGY6SG9va0NsaWVudEludm9rZShSZW1vdGUsIE1ldGhvZCwgQ2FsbGJhY2spDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpblNlcnZpY2UoTGlicmFyaWVzLCBFeHRyYURhdGEsIENoYW5uZWxJZCwgLi4uKQ0KCS0tLy8gTGlicmFyZWlzDQoJbG9jYWwgUmV0dXJuU3Bvb2ZzID0gTGlicmFyaWVzLlJldHVyblNwb29mcw0KCWxvY2FsIFByb2Nlc3NMaWIgPSBMaWJyYXJpZXMuUHJvY2Vzcw0KCWxvY2FsIENvbW11bmljYXRpb24gPSBMaWJyYXJpZXMuQ29tbXVuaWNhdGlvbg0KCWxvY2FsIEdlbmVyYXRpb24gPSBMaWJyYXJpZXMuR2VuZXJhdGlvbg0KCWxvY2FsIENvbmZpZyA9IExpYnJhcmllcy5Db25maWcNCg0KCVByb2Nlc3NMaWI6Q2hlY2tDb25maWcoQ29uZmlnKQ0KDQoJLS0vLyBJbml0IGRhdGENCglsb2NhbCBJbml0RGF0YSA9IHsNCgkJTW9kdWxlcyA9IHsNCgkJCVJldHVyblNwb29mcyA9IFJldHVyblNwb29mcywNCgkJCUdlbmVyYXRpb24gPSBHZW5lcmF0aW9uLA0KCQkJQ29tbXVuaWNhdGlvbiA9IENvbW11bmljYXRpb24sDQoJCQlQcm9jZXNzID0gUHJvY2Vzc0xpYiwNCgkJCUNvbmZpZyA9IENvbmZpZywNCgkJCUhvb2sgPSBzZWxmDQoJCX0sDQoJCVNlcnZpY2VzID0gc2V0bWV0YXRhYmxlKHt9LCB7DQoJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgTmFtZTogc3RyaW5nKTogSW5zdGFuY2UNCgkJCQlsb2NhbCBTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKE5hbWUpDQoJCQkJcmV0dXJuIGNsb25lcmVmKFNlcnZpY2UpDQoJCQllbmQsDQoJCX0pDQoJfQ0KDQoJLS0vLyBJbml0IGxpYnJhcmllcw0KCUNvbW11bmljYXRpb246SW5pdChJbml0RGF0YSkNCglQcm9jZXNzTGliOkluaXQoSW5pdERhdGEpDQoNCgktLS8vIENvbW11bmljYXRpb24gY29uZmlndXJhdGlvbg0KCWxvY2FsIENoYW5uZWwsIElzV3JhcHBlZCA9IENvbW11bmljYXRpb246R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkKQ0KCUNvbW11bmljYXRpb246U2V0Q2hhbm5lbChDaGFubmVsKQ0KCUNvbW11bmljYXRpb246QWRkVHlwZUNhbGxiYWNrcyh7DQoJCVsiUmVtb3RlRGF0YSJdID0gZnVuY3Rpb24oSWQ6IHN0cmluZywgUmVtb3RlRGF0YSkNCgkJCVByb2Nlc3NMaWI6U2V0UmVtb3RlRGF0YShJZCwgUmVtb3RlRGF0YSkNCgkJZW5kLA0KCQlbIkFsbFJlbW90ZURhdGEiXSA9IGZ1bmN0aW9uKEtleTogc3RyaW5nLCBWYWx1ZSkNCgkJCVByb2Nlc3NMaWI6U2V0QWxsUmVtb3RlRGF0YShLZXksIFZhbHVlKQ0KCQllbmQsDQoJfSkNCgkNCgktLS8vIFByb2Nlc3MgY29uZmlndXJhdGlvbg0KCVByb2Nlc3NMaWI6U2V0Q2hhbm5lbChDaGFubmVsLCBJc1dyYXBwZWQpDQoJUHJvY2Vzc0xpYjpTZXRFeHRyYURhdGEoRXh0cmFEYXRhKQ0KDQoJLS0vLyBIb29rIGNvbmZpZ3VyYXRpb24NCglzZWxmOkluaXQoSW5pdERhdGEpDQoJc2VsZjpQYXRjaEZ1bmN0aW9ucygpDQoJc2VsZjpCZWdpbkhvb2tzKCkNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRNZXRhSG9va3MoQWN0b3JDb2RlOiBzdHJpbmcsIENoYW5uZWxJZDogbnVtYmVyKQ0KCS0tLy8gSG9vayBhY3RvcnMNCglpZiBub3QgQ29uZmlndXJhdGlvbi5Ob0FjdG9ycyB0aGVuDQoJCXdhaXQoKQ0KCQlzZWxmOlJ1bk9uQWN0b3JzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCWVuZA0KDQoJLS0vLyBIb29rIGN1cnJlbnQgdGhyZWFkDQoJc2VsZjpCZWdpblNlcnZpY2UoTW9kdWxlcywgbmlsLCBDaGFubmVsSWQpIA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TG9hZFJlY2VpdmVIb29rcygpDQoJbG9jYWwgTm9SZWNlaXZlSG9va2luZyA9IENvbmZpZy5Ob1JlY2VpdmVIb29raW5nDQoJbG9jYWwgQmxhY2tMaXN0ZWRTZXJ2aWNlcyA9IENvbmZpZy5CbGFja0xpc3RlZFNlcnZpY2VzDQoNCglpZiBOb1JlY2VpdmVIb29raW5nIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBSZW1vdGUgYWRkZWQNCglnYW1lLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKFJlbW90ZSkgLS0gVE9ETw0KCQlzZWxmOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCWVuZCkNCg0KCS0tLy8gQ29sbGVjdCByZW1vdGVzIHdpdGggbmlsIHBhcmVudHMNCglzZWxmOk11bHRpQ29ubmVjdChnZXRuaWxpbnN0YW5jZXMoKSkNCg0KCS0tLy8gU2VhcmNoIGZvciByZW1vdGVzDQoJZm9yIF8sIFNlcnZpY2UgaW4gbmV4dCwgZ2FtZTpHZXRDaGlsZHJlbigpIGRvDQoJCWlmIHRhYmxlLmZpbmQoQmxhY2tMaXN0ZWRTZXJ2aWNlcywgU2VydmljZS5DbGFzc05hbWUpIHRoZW4gY29udGludWUgZW5kDQoJCXNlbGY6TXVsdGlDb25uZWN0KFNlcnZpY2U6R2V0RGVzY2VuZGFudHMoKSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRIb29rcyhBY3RvckNvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJc2VsZjpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCXNlbGY6TG9hZFJlY2VpdmVIb29rcygpDQplbmQNCg0KcmV0dXJuIEhvb2sNCg==]]
},Flags={'base64',
[[dHlwZSBGbGFnVmFsdWUgPSBib29sZWFufG51bWJlcnxhbnkNCnR5cGUgRmxhZyA9IHsNCiAgICBWYWx1ZTogRmxhZ1ZhbHVlLA0KICAgIExhYmVsOiBzdHJpbmcsDQogICAgQ2F0ZWdvcnk6IHN0cmluZw0KfQ0KdHlwZSBGbGFncyA9IHsNCiAgICBbc3RyaW5nXTogRmxhZw0KfQ0KdHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCmxvY2FsIE1vZHVsZSA9IHsNCiAgICBGbGFncyA9IHsNCiAgICAgICAgUHJldmVudFJlbmFtaW5nID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIHJlbmFtaW5nIiwNCiAgICAgICAgfSwNCiAgICAgICAgUHJldmVudFBhcmVudGluZyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBwYXJlbnRpbmciLA0KICAgICAgICB9LA0KICAgICAgICBTZWxlY3ROZXdlc3QgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiQXV0byBzZWxlY3QgbmV3ZXN0IiwNCiAgICAgICAgfSwNCiAgICAgICAgSWdub3JlTmlsID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiSWdub3JlIG5pbCBwYXJlbnRzIiwNCiAgICAgICAgfSwNCiAgICAgICAgTG9nRXhwbG9pdCA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIkxvZyBleHBsb2l0IGNhbGxzIiwNCiAgICAgICAgfSwNCiAgICAgICAgTG9nUmVjaXZlcyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIkxvZyByZWNlaXZlcyIsDQogICAgICAgIH0sDQogICAgICAgIFBhdXNlZCA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJQYXVzZWQiLA0KICAgICAgICAgICAgS2V5YmluZCA9IEVudW0uS2V5Q29kZS5RDQogICAgICAgIH0sDQogICAgICAgIEtleWJpbmRzRW5hYmxlZCA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIktleWJpbmRzIEVuYWJsZWQiDQogICAgICAgIH0sDQogICAgICAgIEZpbmRTdHJpbmdGb3JOYW1lID0gew0KICAgICAgICAgICAgVmFsdWUgPSB0cnVlLA0KICAgICAgICAgICAgTGFiZWwgPSAiRmluZCBhcmcgZm9yIG5hbWUiDQogICAgICAgIH0sDQogICAgICAgIFVpVmlzaWJsZSA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIlVJIFZpc2libGUiLA0KICAgICAgICAgICAgS2V5YmluZCA9IEVudW0uS2V5Q29kZS5QDQogICAgICAgIH0sDQogICAgICAgIE5vVHJlZU5vZGVzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIGdyb3VwaW5nIg0KICAgICAgICB9LA0KICAgICAgICBUYWJsZUFyZ3MgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiVGFibGUgYXJncyINCiAgICAgICAgfSwNCiAgICAgICAgTm9WYXJpYWJsZXMgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiTm8gY29tcHJlc3Npb24iDQogICAgICAgIH0sDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ1ZhbHVlKE5hbWU6IHN0cmluZyk6IEZsYWdWYWx1ZQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICByZXR1cm4gRmxhZy5WYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRGbGFnVmFsdWUoTmFtZTogc3RyaW5nLCBWYWx1ZTogRmxhZ1ZhbHVlKQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICBGbGFnLlZhbHVlID0gVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2V0RmxhZ0NhbGxiYWNrKE5hbWU6IHN0cmluZywgQ2FsbGJhY2s6ICguLi5hbnkpIC0+IC4uLmFueSkNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgRmxhZy5DYWxsYmFjayA9IENhbGxiYWNrDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldEZsYWdDYWxsYmFja3MoRGljdDoge30pDQogICAgZm9yIE5hbWUsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkgaW4gbmV4dCwgRGljdCBkbyANCiAgICAgICAgc2VsZjpTZXRGbGFnQ2FsbGJhY2soTmFtZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWcoTmFtZTogc3RyaW5nKTogRmxhZw0KICAgIGxvY2FsIEFsbEZsYWdzID0gc2VsZjpHZXRGbGFncygpDQogICAgbG9jYWwgRmxhZyA9IEFsbEZsYWdzW05hbWVdDQogICAgYXNzZXJ0KEZsYWcsICJGbGFnIGRvZXMgbm90IGV4aXN0ISIpDQogICAgcmV0dXJuIEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkRmxhZyhOYW1lOiBzdHJpbmcsIEZsYWc6IEZsYWcpDQogICAgbG9jYWwgQWxsRmxhZ3MgPSBzZWxmOkdldEZsYWdzKCkNCiAgICBBbGxGbGFnc1tOYW1lXSA9IEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ3MoKTogRmxhZ3MNCiAgICByZXR1cm4gc2VsZi5GbGFncw0KZW5kDQoNCnJldHVybiBNb2R1bGU=]]
},Ui={'base64',
[[bG9jYWwgVWkgPSB7DQoJRGVmYXVsdEVkaXRvckNvbnRlbnQgPSBbPVstLVtbIA0KCVdlbGNvbWUgdG8gU2lnbWEgU3B5DQoJQ3JlYXRlZCBieSBkZXBzbyENCl1dIF09XSwNCglMb2dMaW1pdCA9IDEwMCwNCiAgICBTZWFzb25MYWJlbHMgPSB7IA0KICAgICAgICBKYW51YXJ5ID0gIuKbhCVz4puEIiwgDQogICAgICAgIEZlYnJ1YXJ5ID0gIvCfjKjvuI8lc/Cfj4IiLCANCiAgICAgICAgTWFyY2ggPSAi8J+MuSVz8J+MuiIsIA0KICAgICAgICBBcHJpbCA9ICLwn5CjJXPinJ3vuI8iLCANCiAgICAgICAgTWF5ID0gIvCfkJ0lc/CfjJ4iLCANCiAgICAgICAgSnVuZSA9ICLwn4yyJXPwn6WVIiwgDQogICAgICAgIEp1bHkgPSAi8J+MiiVz8J+MhSIsIA0KICAgICAgICBBdWd1c3QgPSAi4piA77iPJXPwn4yeIiwgDQogICAgICAgIFNlcHRlbWJlciA9ICLwn42BJXPwn42BIiwgDQogICAgICAgIE9jdG9iZXIgPSAi8J+OgyVz8J+OgyIsIA0KICAgICAgICBOb3ZlbWJlciA9ICLwn42CJXPwn42CIiwgDQogICAgICAgIERlY2VtYmVyID0gIvCfjoQlc/CfjoEiDQogICAgfSwNCglTY2FsZXMgPSB7DQoJCVsiTW9iaWxlIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDQ4MCwgMjgwKSwNCgkJWyJEZXNrdG9wIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDYwMCwgNDAwKSwNCgl9LA0KICAgIEJhc2VDb25maWcgPSB7DQogICAgICAgIFRoZW1lID0gIlNpZ21hU3B5IiwNCiAgICAgICAgTm9TY3JvbGwgPSB0cnVlLA0KICAgIH0sDQoJT3B0aW9uVHlwZXMgPSB7DQoJCWJvb2xlYW4gPSAiQ2hlY2tib3giLA0KCX0sDQoJRGlzcGxheVJlbW90ZUluZm8gPSB7DQoJCSJNZXRhTWV0aG9kIiwNCgkJIk1ldGhvZCIsDQoJCSJSZW1vdGUiLA0KCQkiQ2FsbGluZ1NjcmlwdCIsDQoJCSJJc0FjdG9yIiwNCgkJIklkIg0KCX0sDQoNCiAgICBXaW5kb3cgPSBuaWwsDQogICAgUmFuZG9tU2VlZCA9IFJhbmRvbS5uZXcodGljaygpKSwNCglMb2dzID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gImsifSksDQoJTG9nUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCn0gDQoNCnR5cGUgdGFibGUgPSB7DQoJW2FueV06IGFueQ0KfQ0KDQp0eXBlIExvZyA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCU1ldGhvZDogc3RyaW5nLA0KCUFyZ3M6IHRhYmxlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJTWV0YU1ldGhvZDogc3RyaW5nPywNCglPcmlnbmFsRnVuYzogKCguLi5hbnkpIC0+IC4uLmFueSk/LA0KCUNhbGxpbmdTY3JpcHQ6IEluc3RhbmNlPywNCglDYWxsaW5nRnVuY3Rpb246ICgoLi4uYW55KSAtPiAuLi5hbnkpPywNCglDbGFzc0RhdGE6IHRhYmxlPywNCglSZXR1cm5WYWx1ZXM6IHRhYmxlPywNCglSZW1vdGVEYXRhOiB0YWJsZT8sDQoJSWQ6IHN0cmluZywNCglTZWxlY3RhYmxlOiB0YWJsZSwNCglIZWFkZXJEYXRhOiB0YWJsZSwNCglWYWx1ZVN3YXBzOiB0YWJsZSwNCglUaW1lc3RhbXA6IG51bWJlciwNCglJc0V4cGxvaXQ6IGJvb2xlYW4NCn0NCg0KLS0vLyBDb21wYXRpYmlsaXR5DQpsb2NhbCBTZXRDbGlwYm9hcmQgPSBzZXRjbGlwYm9hcmQgb3IgdG9jbGlwYm9hcmQgb3Igc2V0X2NsaXBib2FyZA0KDQotLS8vIExpYnJhcmllcw0KbG9jYWwgUmVHdWkgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2RlcHRoc28vRGVhci1SZUd1aS9yZWZzL2hlYWRzL21haW4vUmVHdWkubHVhJykpKCkNCmxvY2FsIElERU1vZHVsZSA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGVwdGhzby9EZWFyLVJlR3VpL3JlZnMvaGVhZHMvbWFpbi9saWIvaWRlLmx1YScpKSgpDQoNCi0tLy8gU2VydmljZXMNCmxvY2FsIEluc2VydFNlcnZpY2U6IEluc2VydFNlcnZpY2UNCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBGbGFncw0KbG9jYWwgR2VuZXJhdGlvbg0KbG9jYWwgUHJvY2Vzcw0KbG9jYWwgSG9vayANCmxvY2FsIENvbmZpZw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KbG9jYWwgRmlsZXMNCg0KbG9jYWwgQWN0aXZlRGF0YSA9IG5pbA0KbG9jYWwgUmVtb3Rlc0NvdW50ID0gMA0KDQpsb2NhbCBUZXh0Rm9udCA9IEZvbnQuZnJvbUVudW0oRW51bS5Gb250LkNvZGUpDQpsb2NhbCBGb250U3VjY2VzcyA9IGZhbHNlDQoNCmZ1bmN0aW9uIFVpOkluaXQoRGF0YSkNCiAgICBsb2NhbCBNb2R1bGVzID0gRGF0YS5Nb2R1bGVzDQoJbG9jYWwgU2VydmljZXMgPSBEYXRhLlNlcnZpY2VzDQoNCgktLS8vIFNlcnZpY2VzDQoJSW5zZXJ0U2VydmljZSA9IFNlcnZpY2VzLkluc2VydFNlcnZpY2UNCg0KCS0tLy8gTW9kdWxlcw0KCUZsYWdzID0gTW9kdWxlcy5GbGFncw0KCUdlbmVyYXRpb24gPSBNb2R1bGVzLkdlbmVyYXRpb24NCglQcm9jZXNzID0gTW9kdWxlcy5Qcm9jZXNzDQoJSG9vayA9IE1vZHVsZXMuSG9vaw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnDQoJQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbg0KCUZpbGVzID0gTW9kdWxlcy5GaWxlcw0KDQoJLS0vLyBSZUd1aQ0KCXNlbGY6Q2hlY2tTY2FsZSgpDQoJc2VsZjpMb2FkRm9udCgpDQoJc2VsZjpMb2FkUmVHdWkoKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNoZWNrU2NhbGUoKQ0KCWxvY2FsIEJhc2VDb25maWcgPSBzZWxmLkJhc2VDb25maWcNCglsb2NhbCBTY2FsZXMgPSBzZWxmLlNjYWxlcw0KDQoJbG9jYWwgSXNNb2JpbGUgPSBSZUd1aTpJc01vYmlsZURldmljZSgpDQoJbG9jYWwgRGV2aWNlID0gSXNNb2JpbGUgYW5kICJNb2JpbGUiIG9yICJEZXNrdG9wIg0KDQoJQmFzZUNvbmZpZy5TaXplID0gU2NhbGVzW0RldmljZV0NCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRDbGlwYm9hcmQoQ29udGVudDogc3RyaW5nKQ0KCVNldENsaXBib2FyZChDb250ZW50KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlR1cm5TZWFzb25hbChUZXh0OiBzdHJpbmcpOiBzdHJpbmcNCiAgICBsb2NhbCBTZWFzb25MYWJlbHMgPSBzZWxmLlNlYXNvbkxhYmVscw0KICAgIGxvY2FsIE1vbnRoID0gb3MuZGF0ZSgiJUIiKQ0KICAgIGxvY2FsIEJhc2UgPSBTZWFzb25MYWJlbHNbTW9udGhdDQoNCiAgICByZXR1cm4gQmFzZTpmb3JtYXQoVGV4dCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpMb2FkRm9udCgpDQoJbG9jYWwgRm9udEZpbGUgPSBzZWxmLkZvbnRKc29uRmlsZQ0KDQoJLS0vLyBHZXQgRm9udEZhY2UgQXNzZXRJZA0KCWxvY2FsIEFzc2V0SWQgPSBGaWxlczpMb2FkQ3VzdG9tYXNzZXQoRm9udEZpbGUpDQoJaWYgbm90IEFzc2V0SWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENyZWF0ZSBjdXN0b20gRm9udEZhY2UNCglsb2NhbCBOZXdGb250ID0gRm9udC5uZXcoQXNzZXRJZCkNCglUZXh0Rm9udCA9IE5ld0ZvbnQNCglGb250U3VjY2VzcyA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRGb250RmlsZShGb250RmlsZTogc3RyaW5nKQ0KCXNlbGYuRm9udEpzb25GaWxlID0gRm9udEZpbGUNCmVuZA0KDQpmdW5jdGlvbiBVaTpGb250V2FzU3VjY2Vzc2Z1bCgpDQoJaWYgRm9udFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIEVycm9yIG1lc3NhZ2UNCglzZWxmOlNob3dNb2RhbCh7DQoJCSJVbmZvcnR1bmF0ZWx5IHlvdXIgZXhlY3V0b3Igd2FzIHVuYWJsZSB0byBkb3dubG9hZCB0aGUgZm9udCBhbmQgdGhlcmVmb3JlIHN3aXRjaGVkIHRvIHRoZSBEYXJrIHRoZW1lIiwNCgkJIlxuSWYgeW91IHdvdWxkIGxpa2UgdG8gdXNlIHRoZSBJbUd1aSB0aGVtZSwgXG5wbGVhc2UgZG93bmxvYWQgdGhlIGZvbnQgKGFzc2V0cy9Qcm9nZ3lDbGVhbi50dGYpIiwNCgkJImFuZCBwdXQgcHV0IGl0IGluIHlvdXIgd29ya3NwYWNlIGZvbGRlclxuKFNpZ21hIFNweS9hc3NldHMpIg0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6TG9hZFJlR3VpKCkNCglsb2NhbCBUaGVtZUNvbmZpZyA9IENvbmZpZy5UaGVtZUNvbmZpZw0KCVRoZW1lQ29uZmlnLlRleHRGb250ID0gVGV4dEZvbnQNCg0KCS0tLy8gUmVHdWkNCglsb2NhbCBQcmVmYWJzSWQgPSAicmJ4YXNzZXRpZDovLyIgLi4gUmVHdWkuUHJlZmFic0lkDQoJUmVHdWk6RGVmaW5lVGhlbWUoIlNpZ21hU3B5IiwgVGhlbWVDb25maWcpDQoJUmVHdWk6SW5pdCh7DQoJCVByZWZhYnMgPSBJbnNlcnRTZXJ2aWNlOkxvYWRMb2NhbEFzc2V0KFByZWZhYnNJZCkNCgl9KQ0KZW5kDQoNCnR5cGUgQ3JlYXRlQnV0dG9ucyA9IHsNCglCYXNlOiB0YWJsZSwNCglCdXR0b25zOiB0YWJsZSwNCglOb1RhYmxlOiBib29sZWFuPw0KfQ0KZnVuY3Rpb24gVWk6Q3JlYXRlQnV0dG9ucyhQYXJlbnQsIERhdGE6IENyZWF0ZUJ1dHRvbnMpDQoJbG9jYWwgQmFzZSA9IERhdGEuQmFzZQ0KCWxvY2FsIEJ1dHRvbnMgPSBEYXRhLkJ1dHRvbnMNCglsb2NhbCBOb1RhYmxlID0gRGF0YS5Ob1RhYmxlDQoNCgktLS8vIENyZWF0ZSB0YWJsZSBsYXlvdXQNCglpZiBub3QgTm9UYWJsZSB0aGVuDQoJCVBhcmVudCA9IFBhcmVudDpUYWJsZSh7DQoJCQlNYXhDb2x1bW5zID0gMw0KCQl9KTpOZXh0Um93KCkNCgllbmQNCg0KCS0tLy8gQ3JlYXRlIGJ1dHRvbnMNCglmb3IgXywgQnV0dG9uIGluIG5leHQsIEJ1dHRvbnMgZG8NCgkJbG9jYWwgQ29udGFpbmVyID0gUGFyZW50DQoJCWlmIG5vdCBOb1RhYmxlIHRoZW4NCgkJCUNvbnRhaW5lciA9IFBhcmVudDpOZXh0Q29sdW1uKCkNCgkJZW5kDQoNCgkJUmVHdWk6Q2hlY2tDb25maWcoQnV0dG9uLCBCYXNlKQ0KCQlDb250YWluZXI6QnV0dG9uKEJ1dHRvbikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVXaW5kb3coT3ZlcndyaXRlczogdGFibGUpDQogICAgbG9jYWwgQmFzZUNvbmZpZyA9IHNlbGYuQmFzZUNvbmZpZw0KCWxvY2FsIENvbmZpZyA9IFByb2Nlc3M6RGVlcENsb25lVGFibGUoQmFzZUNvbmZpZykNCg0KCS0tLy8gTWVyZ2Ugb3ZlcndyaXRlcw0KCWlmIE92ZXJ3cml0ZXMgdGhlbg0KCQlNZXJnZShDb25maWcsIE92ZXJ3cml0ZXMpDQoJZW5kDQoJDQoJLS0vLyBDcmVhdGUgV2luZG93DQoJbG9jYWwgV2luZG93ID0gUmVHdWk6V2luZG93KENvbmZpZykNCg0KCS0tLy8gU3dpdGNoIHRvIERhcmtUaGVtZSBpbnN0ZWFkIG9mIHRoZSBJbUd1aSB0aGVtZSBpZiB0aGUgZm9udCBjYW5ub3QgYmUgbG9hZGVkDQoJaWYgbm90IEZvbnRTdWNjZXNzIHRoZW4gDQoJCVdpbmRvdzpTZXRUaGVtZSgiRGFya1RoZW1lIikNCgllbmQNCgkNCgktLS8vIENyZWF0ZSBXaW5kb3cNCglyZXR1cm4gV2luZG93DQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlTWFpbldpbmRvdygpDQoJbG9jYWwgV2luZG93ID0gc2VsZjpDcmVhdGVXaW5kb3coKQ0KCXNlbGYuV2luZG93ID0gV2luZG93DQoNCgktLS8vIENoZWNrIGlmIHRoZSBmb250IHdhcyBzdWNjZXNzZnVsbHkgZG93bmxvYWRlZA0KCXNlbGY6Rm9udFdhc1N1Y2Nlc3NmdWwoKQ0KCXNlbGY6QXVyYUNvdW50ZXJTZXJ2aWNlKCkNCg0KCS0tLy8gVWlWaXNpYmxlIGZsYWcgY2FsbGJhY2sNCglGbGFnczpTZXRGbGFnQ2FsbGJhY2soIlVpVmlzaWJsZSIsIGZ1bmN0aW9uKHNlbGYsIFZpc2libGUpDQoJCVdpbmRvdzpTZXRWaXNpYmxlKFZpc2libGUpDQoJZW5kKQ0KDQoJcmV0dXJuIFdpbmRvdw0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dNb2RhbChMaW5lczogdGFibGUpDQoJbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCglsb2NhbCBNZXNzYWdlID0gdGFibGUuY29uY2F0KExpbmVzLCAiXG4iKQ0KDQoJLS0vLyBNb2RhbCBXaW5kb3cNCglsb2NhbCBNb2RhbFdpbmRvdyA9IFdpbmRvdzpQb3B1cE1vZGFsKHsNCgkJVGl0bGUgPSAiU2lnbWEgU3B5Ig0KCX0pDQoJTW9kYWxXaW5kb3c6TGFiZWwoew0KCQlUZXh0ID0gTWVzc2FnZSwNCgkJUmljaFRleHQgPSB0cnVlLA0KCQlUZXh0V3JhcHBlZCA9IHRydWUNCgl9KQ0KCU1vZGFsV2luZG93OkJ1dHRvbih7DQoJCVRleHQgPSAiT2theSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJTW9kYWxXaW5kb3c6Q2xvc2VQb3B1cCgpDQoJCWVuZCwNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dVbnN1cHBvcnRlZEV4ZWN1dG9yKE5hbWU6IHN0cmluZykNCglVaTpTaG93TW9kYWwoew0KCQkiVW5mb3J0dW5hdGVseSBTaWdtYSBTcHkgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIGV4ZWN1dG9yIiwNCgkJIlRoZSBiZXN0IGZyZWUgb3B0aW9uIGlzIFN3aWZ0IChkaXNjb3JkLmdnL2dldHN3aWZ0Z2cpIiwNCgkJYFxuWW91ciBleGVjdXRvcjoge05hbWV9YA0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6U2hvd1Vuc3VwcG9ydGVkKEZ1bmNOYW1lOiBzdHJpbmcpDQoJVWk6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgU2lnbWEgU3B5IGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBleGVjdXRvciIsDQoJCWBcbk1pc3NpbmcgZnVuY3Rpb246IHtGdW5jTmFtZX1gDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVPcHRpb25zRm9yRGljdChQYXJlbnQsIERpY3Q6IHRhYmxlLCBDYWxsYmFjaykNCglsb2NhbCBPcHRpb25zID0ge30NCg0KCS0tLy8gRGljdG9uYXJ5IHdyYXANCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBEaWN0IGRvDQoJCU9wdGlvbnNbS2V5XSA9IHsNCgkJCVZhbHVlID0gVmFsdWUsDQoJCQlMYWJlbCA9IEtleSwNCgkJCUNhbGxiYWNrID0gZnVuY3Rpb24oXywgVmFsdWUpDQoJCQkJRGljdFtLZXldID0gVmFsdWUNCg0KCQkJCS0tLy8gSW52b2tlIGNhbGxiYWNrDQoJCQkJaWYgbm90IENhbGxiYWNrIHRoZW4gcmV0dXJuIGVuZA0KCQkJCUNhbGxiYWNrKCkNCgkJCWVuZA0KCQl9DQoJZW5kDQoNCgktLS8vIENyZWF0ZSBlbGVtZW50cw0KCXNlbGY6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleUNvZGU6IEVudW0uS2V5Q29kZSwgQ2FsbGJhY2spDQoJaWYgbm90IEtleUNvZGUgdGhlbiByZXR1cm4gQ29udGFpbmVyIGVuZA0KDQoJLS0vLyBDcmVhdGUgUm93IGxheW91dA0KCUNvbnRhaW5lciA9IENvbnRhaW5lcjpSb3coew0KCQlIb3Jpem9udGFsRmxleCA9IEVudW0uVUlGbGV4QWxpZ25tZW50LlNwYWNlQmV0d2Vlbg0KCX0pDQoNCgktLS8vIEFkZCBLZXliaW5kIGVsZW1lbnQNCglDb250YWluZXI6S2V5YmluZCh7DQoJCUxhYmVsID0gIiIsDQoJCVZhbHVlID0gS2V5Q29kZSwNCgkJTGF5b3V0T3JkZXIgPSAyLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCS0tLy8gQ2hlY2sgaWYga2V5YmluZHMgYXJlIGVuYWJsZWQNCgkJCWxvY2FsIEVuYWJsZWQgPSBGbGFnczpHZXRGbGFnVmFsdWUoIktleWJpbmRzRW5hYmxlZCIpDQoJCQlpZiBub3QgRW5hYmxlZCB0aGVuIHJldHVybiBlbmQNCg0KCQkJLS0vLyBJbnZva2UgY2FsbGJhY2sNCgkJCUNhbGxiYWNrKCkNCgkJZW5kLA0KCX0pDQoNCglyZXR1cm4gQ29udGFpbmVyDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KCWxvY2FsIE9wdGlvblR5cGVzID0gc2VsZi5PcHRpb25UeXBlcw0KCQ0KCS0tLy8gQ3JlYXRlIHRhYmxlIGxheW91dA0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKHsNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KTpOZXh0Um93KCkNCg0KCWZvciBOYW1lLCBEYXRhIGluIE9wdGlvbnMgZG8NCgkJbG9jYWwgVmFsdWUgPSBEYXRhLlZhbHVlDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoNCgkJLS0vLyBBZGQgbWlzc2luZyB2YWx1ZXMgaW50byBvcHRpb25zIHRhYmxlDQoJCVJlR3VpOkNoZWNrQ29uZmlnKERhdGEsIHsNCgkJCUNsYXNzID0gT3B0aW9uVHlwZXNbVHlwZV0sDQoJCQlMYWJlbCA9IE5hbWUsDQoJCX0pDQoJCQ0KCQktLS8vIENoZWNrIGlmIGEgZWxlbWVudCB0eXBlIGV4aXN0cyBmb3IgdmFsdWUgdHlwZQ0KCQlsb2NhbCBDbGFzcyA9IERhdGEuQ2xhc3MNCgkJYXNzZXJ0KENsYXNzLCBgTm8ge1R5cGV9IHR5cGUgZXhpc3RzIGZvciBvcHRpb25gKQ0KDQoJCWxvY2FsIENvbnRhaW5lciA9IFRhYmxlOk5leHRDb2x1bW4oKQ0KCQlsb2NhbCBDaGVja2JveCA9IG5pbA0KDQoJCS0tLy8gQ2hlY2sgZm9yIGEga2V5YmluZCBsYXlvdXQNCgkJbG9jYWwgS2V5YmluZCA9IERhdGEuS2V5YmluZA0KCQlDb250YWluZXIgPSBzZWxmOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleWJpbmQsIGZ1bmN0aW9uKCkNCgkJCUNoZWNrYm94OlRvZ2dsZSgpDQoJCWVuZCkNCgkJDQoJCS0tLy8gQ3JlYXRlIGNvbHVtbiBhbmQgZWxlbWVudA0KCQlDaGVja2JveCA9IENvbnRhaW5lcltDbGFzc10oQ29udGFpbmVyLCBEYXRhKQ0KCWVuZA0KZW5kDQoNCi0tLy8gQm9paWlpIHdoYXQgZGlkIHlvdSBzYXkgYWJvdXQgU2lnbWEgU3B5IPCfkoDwn5KADQpmdW5jdGlvbiBVaTpEaXNwbGF5QXVyYSgpDQogICAgbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCiAgICBsb2NhbCBSYW5kID0gc2VsZi5SYW5kb21TZWVkDQoNCgktLS8vIEF1cmEgKGJvaWlpaWkpDQogICAgbG9jYWwgQVVSQSA9IFJhbmQ6TmV4dEludGVnZXIoMSwgOTk5OTk5OSkNCiAgICBsb2NhbCBBVVJBREVMQVkgPSBSYW5kOk5leHRJbnRlZ2VyKDEsIDUpDQoNCgktLS8vIFRpdGxlDQoJbG9jYWwgVGl0bGUgPSBgIFNpZ21hIFNweSAtIERlcHNvIHwgQVVSQToge0FVUkF9IGANCglsb2NhbCBTZWFzb25hbCA9IHNlbGY6VHVyblNlYXNvbmFsKFRpdGxlKQ0KICAgIFdpbmRvdzpTZXRUaXRsZShTZWFzb25hbCkNCg0KICAgIHdhaXQoQVVSQURFTEFZKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkF1cmFDb3VudGVyU2VydmljZSgpDQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgICAgIHNlbGY6RGlzcGxheUF1cmEoKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlV2luZG93Q29udGVudChXaW5kb3cpDQogICAgLS0vLyBXaW5kb3cgZ3JvdXANCiAgICBsb2NhbCBMYXlvdXQgPSBXaW5kb3c6TGlzdCh7DQogICAgICAgIFVpUGFkZGluZyA9IDIsDQogICAgICAgIEhvcml6b250YWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgVmVydGljYWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5WZXJ0aWNhbCwNCiAgICAgICAgRmlsbCA9IHRydWUNCiAgICB9KQ0KDQoJLS0vLyBSZW1vdGVzIGxpc3QNCiAgICBzZWxmLlJlbW90ZXNMaXN0ID0gTGF5b3V0OkNhbnZhcyh7DQogICAgICAgIFNjcm9sbCA9IHRydWUsDQogICAgICAgIFVpUGFkZGluZyA9IDUsDQogICAgICAgIEF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuTm9uZSwNCiAgICAgICAgRmxleE1vZGUgPSBFbnVtLlVJRmxleE1vZGUuTm9uZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMzAsIDEsIDApDQogICAgfSkNCg0KCS0tLy8gVGFiIGJveA0KCWxvY2FsIEluZm9TZWxlY3RvciA9IExheW91dDpUYWJTZWxlY3Rvcih7DQogICAgICAgIE5vQW5pbWF0aW9uID0gdHJ1ZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTMwLCAwLjQsIDApLA0KICAgIH0pDQoNCglzZWxmLkluZm9TZWxlY3RvciA9IEluZm9TZWxlY3Rvcg0KCXNlbGYuQ2FudmFzTGF5b3V0ID0gTGF5b3V0DQoNCgktLS8vIE1ha2UgdGFicw0KCXNlbGY6TWFrZUVkaXRvclRhYihJbmZvU2VsZWN0b3IpDQoJc2VsZjpNYWtlT3B0aW9uc1RhYihJbmZvU2VsZWN0b3IpDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZU9wdGlvbnNUYWIoSW5mb1NlbGVjdG9yKQ0KCS0tLy8gVGFiU2VsZWN0b3INCglsb2NhbCBPcHRpb25zVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSAiT3B0aW9ucyINCgl9KQ0KDQoJLS0vLyBBZGQgZ2xvYmFsIG9wdGlvbnMNCglPcHRpb25zVGFiOlNlcGFyYXRvcih7VGV4dD0iTG9ncyJ9KQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhPcHRpb25zVGFiLCB7DQoJCUJhc2UgPSB7DQoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwNCgkJCUF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwNCgkJfSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGxvZ3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBUYWIgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLlRhYiBvciBuaWwNCg0KCQkJCQktLS8vIFJlbW92ZSB0aGUgUmVtb3RlIHRhYg0KCQkJCQlpZiBUYWIgdGhlbg0KCQkJCQkJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihUYWIpDQoJCQkJCWVuZA0KDQoJCQkJCS0tLy8gQ2xlYXIgYWxsIGxvZyBlbGVtZW50cw0KCQkJCQlBY3RpdmVEYXRhID0gbmlsDQoJCQkJCXNlbGY6Q2xlYXJMb2dzKCkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ2xlYXIgYmxvY2tzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJCbG9ja2VkIiwgZmFsc2UpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGV4Y2x1ZGVzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJFeGNsdWRlZCIsIGZhbHNlKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IERpc2NvcmQiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOlNldENsaXBib2FyZCgiaHR0cHM6Ly9kaXNjb3JkLmdnL3M5bmdtVURXZ2IiKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IEdpdGh1YiIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6U2V0Q2xpcGJvYXJkKCJodHRwczovL2dpdGh1Yi5jb20vZGVwdGhzby9TaWdtYS1TcHkiKQ0KCQkJCWVuZCwNCgkJCX0NCgkJfQ0KCX0pDQoNCgktLS8vIEZsYWcgb3B0aW9ucw0KCU9wdGlvbnNUYWI6U2VwYXJhdG9yKHtUZXh0PSJTZXR0aW5ncyJ9KQ0KCXNlbGY6Q3JlYXRlRWxlbWVudHMoT3B0aW9uc1RhYiwgRmxhZ3M6R2V0RmxhZ3MoKSkNCg0KCXNlbGY6QWRkRGV0YWlsc1NlY3Rpb24oT3B0aW9uc1RhYikNCmVuZA0KDQpmdW5jdGlvbiBVaTpBZGREZXRhaWxzU2VjdGlvbihPcHRpb25zVGFiKQ0KCU9wdGlvbnNUYWI6U2VwYXJhdG9yKHtUZXh0PSJJbmZvcm1hdGlvbiJ9KQ0KCU9wdGlvbnNUYWI6QnVsbGV0VGV4dCh7DQoJCVJvd3MgPSB7DQoJCQkiU2lnbWEgc3B5IC0gV3JpdHRlbiBieSBkZXBzbyEiLA0KCQkJIkxpYnJhcmllczogUm9ibG94LVBhcnNlciwgRGVhci1SZUd1aSIsDQoJCQkiVGhhbmsgeW91IHRvIHN5biBmb3IgeW91ciBzdWdnZXN0aW9ucyBhbmQgdGVzdGluZyINCgkJfQ0KCX0pDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gTWFrZUFjdGl2ZURhdGFDYWxsYmFjayhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIGZ1bmN0aW9uKC4uLikNCgkJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiByZXR1cm4gZW5kDQoJCXJldHVybiBBY3RpdmVEYXRhW05hbWVdKEFjdGl2ZURhdGEsIC4uLikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlRWRpdG9yVGFiKEluZm9TZWxlY3RvcikNCglsb2NhbCBEZWZhdWx0ID0gc2VsZi5EZWZhdWx0RWRpdG9yQ29udGVudA0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoNCglsb2NhbCBTeW50YXhDb2xvcnMgPSBDb25maWcuU3ludGF4Q29sb3JzDQoNCgktLS8vIElERQ0KCWxvY2FsIENvZGVFZGl0b3IgPSBJREVNb2R1bGUuQ29kZUZyYW1lLm5ldyh7DQoJCUVkaXRhYmxlID0gdHJ1ZSwNCgkJRm9udFNpemUgPSAxMywNCgkJQ29sb3JzID0gU3ludGF4Q29sb3JzLA0KCQlGb250RmFjZSA9IFRleHRGb250DQoJfSkNCglDb2RlRWRpdG9yOlNldFRleHQoRGVmYXVsdCkNCgkNCglsb2NhbCBFZGl0b3JUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9ICJFZGl0b3IiDQoJfSkNCg0KCS0tLy8gQ29uZmlndXJlIElERSBmcmFtZQ0KCVJlR3VpOkFwcGx5RmxhZ3Moew0KCQlPYmplY3QgPSBDb2RlRWRpdG9yLkd1aSwNCgkJV2luZG93Q2xhc3MgPSBXaW5kb3csDQoJCUNsYXNzID0gew0KCQkJLS1Cb3JkZXIgPSB0cnVlLA0KCQkJRmlsbCA9IHRydWUsDQoJCQlBY3RpdmUgPSB0cnVlLA0KCQkJUGFyZW50ID0gRWRpdG9yVGFiOkdldE9iamVjdCgpLA0KCQkJQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsDQoJCX0NCgl9KQ0KDQoJLS0vLyBCdXR0b25zDQoJbG9jYWwgQnV0dG9uc1JvdyA9IEVkaXRvclRhYjpSb3coKQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhCdXR0b25zUm93LCB7DQoJCUJhc2UgPSB7fSwNCgkJTm9UYWJsZSA9IHRydWUsDQoJCUJ1dHRvbnMgPSB7DQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJc2VsZjpTZXRDbGlwYm9hcmQoU2NyaXB0KQ0KCQkJCWVuZA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlJ1biIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJCWxvYWRzdHJpbmcoU2NyaXB0LCAiU2lnbWFTcHktVVNFUlNDUklQVCIpKCkNCgkJCQllbmQNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJHZXQgcmV0dXJuIiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIkdldFJldHVybiIpDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiU2NyaXB0IiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIlNjcmlwdE9wdGlvbnMiKQ0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkJ1aWxkIiwNCgkJCQlDYWxsYmFjayA9IE1ha2VBY3RpdmVEYXRhQ2FsbGJhY2soIkJ1aWxkU2NyaXB0IikNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJQb3Atb3V0IiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJbG9jYWwgVGlsZSA9IEFjdGl2ZURhdGEgYW5kIEFjdGl2ZURhdGEuVGFzayBvciAiU2lnbWEgU3B5Ig0KCQkJCQlzZWxmOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coU2NyaXB0LCB7DQoJCQkJCQlUaXRsZSA9IFRpbGUNCgkJCQkJfSkNCgkJCQllbmQNCgkJCX0sDQoJCX0NCgl9KQ0KCQ0KCXNlbGYuQ29kZUVkaXRvciA9IENvZGVFZGl0b3INCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG91bGRGb2N1cyhUYWIpOiBib29sZWFuDQoJbG9jYWwgSW5mb1NlbGVjdG9yID0gc2VsZi5JbmZvU2VsZWN0b3INCglsb2NhbCBBY3RpdmVUYWIgPSBJbmZvU2VsZWN0b3IuQWN0aXZlVGFiDQoNCgktLS8vIElmIHRoZXJlIGlzIGFuIGVtcHR5IHRhYg0KCWlmIG5vdCBBY3RpdmVUYWIgdGhlbg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KDQoJcmV0dXJuIEluZm9TZWxlY3RvcjpDb21wYXJlVGFicyhBY3RpdmVUYWIsIFRhYikNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlRWRpdG9yUG9wb3V0V2luZG93KENvbnRlbnQ6IHN0cmluZywgV2luZG93Q29uZmlnOiB0YWJsZSkNCglsb2NhbCBXaW5kb3cgPSBzZWxmOkNyZWF0ZVdpbmRvdyhXaW5kb3dDb25maWcpDQoJbG9jYWwgQ29kZUVkaXRvciA9IFdpbmRvdzpDb2RlRWRpdG9yKHsNCgkJVGV4dCA9IENvbnRlbnQsDQoJCUVkaXRhYmxlID0gdHJ1ZSwNCgkJRm9udFNpemUgPSAxMywNCgkJQ29sb3JzID0gU3ludGF4Q29sb3JzLA0KCQlGb250RmFjZSA9IFRleHRGb250DQoJfSkNCg0KCVdpbmRvdzpDZW50ZXIoKQ0KCXJldHVybiBDb2RlRWRpdG9yDQplbmQNCg0KdHlwZSBNZW51T3B0aW9ucyA9IHsNCglbc3RyaW5nXTogKEd1aUJ1dHRvbiwgLi4uYW55KSAtPiBuaWwNCn0NCmZ1bmN0aW9uIFVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbjogSW5zdGFuY2UsIFVucGFjazogdGFibGUsIE9wdGlvbnM6IE1lbnVPcHRpb25zKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgUG9wdXAgPSBXaW5kb3c6UG9wdXBDYW52YXMoew0KCQlSZWxhdGl2ZVRvID0gQnV0dG9uLA0KCQlNYXhTaXplWCA9IDUwMCwNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgU2VsZWN0YWJsZXMgZm9yIHN0cmluZywgZnVuY3Rpb24NCglmb3IgTmFtZSwgRnVuYyBpbiBPcHRpb25zIGRvDQoJCSBQb3B1cDpTZWxlY3RhYmxlKHsNCgkJCVRleHQgPSBOYW1lLA0KCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJRnVuYyhQcm9jZXNzOlVucGFjayhVbnBhY2spKQ0KCQkJZW5kLA0KCQl9KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOlJlbW92ZVByZXZpb3VzVGFiKFRpdGxlOiBzdHJpbmcpOiBib29sZWFuDQoJLS0vLyBObyBwcmV2aW91cyB0YWJzDQoJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiANCgkJcmV0dXJuIGZhbHNlIA0KCWVuZA0KDQoJLS0vLyBUYWJTZWxlY3Rvcg0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoNCgktLS8vIFByZXZpb3VzIGVsZW1lbnRzDQoJbG9jYWwgUHJldmlvdXNUYWIgPSBBY3RpdmVEYXRhLlRhYg0KCWxvY2FsIFByZXZpb3VzU2VsZWN0YWJsZSA9IEFjdGl2ZURhdGEuU2VsZWN0YWJsZQ0KDQoJLS0vLyBSZW1vdmUgcHJldmlvdXMgdGFiIGFuZCBzZXQgc2VsZWN0YWJsZSBmb2N1cw0KCWxvY2FsIFRhYkZvY3VzZWQgPSBzZWxmOlNob3VsZEZvY3VzKFByZXZpb3VzVGFiKQ0KCUluZm9TZWxlY3RvcjpSZW1vdmVUYWIoUHJldmlvdXNUYWIpDQoJUHJldmlvdXNTZWxlY3RhYmxlOlNldFNlbGVjdGVkKGZhbHNlKQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHRhYg0KCXJldHVybiBUYWJGb2N1c2VkDQplbmQNCg0KZnVuY3Rpb24gVWk6U2V0Rm9jdXNlZFJlbW90ZShEYXRhKQ0KCS0tLy8gVW5wYWNrIHJlbW90ZSBkYXRhDQoJbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIElzUmVjZWl2ZSA9IERhdGEuSXNSZWNlaXZlDQoJbG9jYWwgU2NyaXB0ID0gRGF0YS5DYWxsaW5nU2NyaXB0DQoJbG9jYWwgU291cmNlU2NyaXB0ID0gRGF0YS5Tb3VyY2VTY3JpcHQNCglsb2NhbCBDbGFzc0RhdGEgPSBEYXRhLkNsYXNzRGF0YQ0KCWxvY2FsIEhlYWRlckRhdGEgPSBEYXRhLkhlYWRlckRhdGENCglsb2NhbCBWYWx1ZVN3YXBzID0gRGF0YS5WYWx1ZVN3YXBzDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KCWxvY2FsIElkID0gRGF0YS5JZA0KDQoJLS0vLyBGbGFncw0KCWxvY2FsIFRhYmxlQXJncyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiVGFibGVBcmdzIikNCglsb2NhbCBOb1ZhcmlhYmxlcyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTm9WYXJpYWJsZXMiKQ0KDQoJLS0vLyBVbnBhY2sgaW5mbw0KCWxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQoJbG9jYWwgSXNSZW1vdGVGdW5jdGlvbiA9IENsYXNzRGF0YS5Jc1JlbW90ZUZ1bmN0aW9uDQoNCgktLS8vIFVJIGRhdGENCglsb2NhbCBDb2RlRWRpdG9yID0gc2VsZi5Db2RlRWRpdG9yDQoJbG9jYWwgVG9EaXNwbGF5ID0gc2VsZi5EaXNwbGF5UmVtb3RlSW5mbw0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoNCglsb2NhbCBUYWJGb2N1c2VkID0gc2VsZjpSZW1vdmVQcmV2aW91c1RhYigpDQoJbG9jYWwgVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSBgUmVtb3RlOiB7UmVtb3RlfWAsDQoJCUZvY3VzZWQgPSBUYWJGb2N1c2VkDQoJfSkNCg0KCS0tLy8gQ3JlYXRlIG5ldyBwYXJzZXINCglsb2NhbCBNb2R1bGUgPSBHZW5lcmF0aW9uOk5ld1BhcnNlcih7DQoJCU5vVmFyaWFibGVzID0gTm9WYXJpYWJsZXMNCgl9KQ0KCWxvY2FsIFBhcnNlciA9IE1vZHVsZS5QYXJzZXINCglsb2NhbCBGb3JtYXR0ZXIgPSBNb2R1bGUuRm9ybWF0dGVyDQoJRm9ybWF0dGVyOlNldFZhbHVlU3dhcHMoVmFsdWVTd2FwcykNCg0KCS0tLy8gU2V0IHRoaXMgbG9nIHRvIGJlIHNlbGVjdGVkDQoJQWN0aXZlRGF0YSA9IERhdGENCglEYXRhLlRhYiA9IFRhYg0KCURhdGEuU2VsZWN0YWJsZTpTZXRTZWxlY3RlZCh0cnVlKQ0KDQoJbG9jYWwgZnVuY3Rpb24gU2V0SURFVGV4dChDb250ZW50OiBzdHJpbmcsIFRhc2s6IHN0cmluZykNCgkJRGF0YS5UYXNrID0gVGFzaw0KCQlDb2RlRWRpdG9yOlNldFRleHQoQ29udGVudCkNCgllbmQNCglsb2NhbCBmdW5jdGlvbiBEYXRhQ29ubmVjdGlvbihOYW1lLCAuLi4pDQoJCWxvY2FsIEFyZ3MgPSB7Li4ufQ0KCQlyZXR1cm4gZnVuY3Rpb24oKQ0KCQkJcmV0dXJuIERhdGFbTmFtZV0oRGF0YSwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBGdW5jdGlvbnMNCglmdW5jdGlvbiBEYXRhOlNjcmlwdE9wdGlvbnMoQnV0dG9uOiBHdWlCdXR0b24pDQoJCVVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbiwge3NlbGZ9LCB7DQoJCQlbIkNhbGxlciBJbmZvIl0gPSBEYXRhQ29ubmVjdGlvbigiR2VuZXJhdGVJbmZvIiksDQoJCQlbIkRlY29tcGlsZSJdID0gRGF0YUNvbm5lY3Rpb24oIkRlY29tcGlsZSIpDQoJCX0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpCdWlsZFNjcmlwdChCdXR0b246IEd1aUJ1dHRvbikNCgkJVWk6TWFrZUJ1dHRvbk1lbnUoQnV0dG9uLCB7c2VsZn0sIHsNCgkJCVsiQ2FsbCBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlJlbW90ZSIpLA0KCQkJWyJCbG9jayBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIkJsb2NrIiksDQoJCQlbIlJlcGVhdCBGb3IiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlJlcGVhdCIpLA0KCQkJWyJTcGFtIFJlbW90ZSJdID0gRGF0YUNvbm5lY3Rpb24oIk1ha2VTY3JpcHQiLCAiU3BhbSIpDQoJCX0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpNYWtlU2NyaXB0KFNjcmlwdFR5cGU6IHN0cmluZykNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpSZW1vdGVTY3JpcHQoTW9kdWxlLCBzZWxmLCBTY3JpcHRUeXBlKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYEVkaXRpbmc6IHtSZW1vdGV9YCkNCgllbmQNCglmdW5jdGlvbiBEYXRhOlJlcGVhdENhbGwoKQ0KCQlsb2NhbCBTaWduYWwgPSBIb29rOkluZGV4KFJlbW90ZSwgTWV0aG9kKQ0KDQoJCWlmIElzUmVjZWl2ZSB0aGVuDQoJCQlmaXJlc2lnbmFsKFNpZ25hbCwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVsc2UNCgkJCVNpZ25hbChSZW1vdGUsIFByb2Nlc3M6VW5wYWNrKEFyZ3MpKQ0KCQllbmQNCgllbmQNCglmdW5jdGlvbiBEYXRhOkdldFJldHVybigpDQoJCWxvY2FsIFJldHVyblZhbHVlcyA9IHNlbGYuUmV0dXJuVmFsdWVzDQoNCgkJaWYgbm90IElzUmVtb3RlRnVuY3Rpb24gdGhlbg0KCQkJU2V0SURFVGV4dCgiLS0gUmVtb3RlIGlzIG5vdCBhIGZ1bmN0aW9uIGJvem8gKC05OTk5OTk5IEFVUkEpIikNCgkJCXJldHVybg0KCQllbmQNCgkJaWYgbm90IFJldHVyblZhbHVlcyB0aGVuDQoJCQlTZXRJREVUZXh0KCItLSBObyByZXR1cm4gdmFsdWVzICgtOTk5OTk5OSBBVVJBKSIpDQoJCQlyZXR1cm4NCgkJZW5kDQoNCgkJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIFJldHVyblZhbHVlcykNCgkJU2V0SURFVGV4dChTY3JpcHQsIGBSZXR1cm4gVmFsdWVzIGZvcjoge1JlbW90ZX1gKQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6R2VuZXJhdGVJbmZvKCkNCgkJLS0vLyBSZWplY3QgY2xpZW50IGV2ZW50cw0KCQlpZiBJc1JlY2VpdmUgdGhlbiANCgkJCWxvY2FsIFNjcmlwdCA9ICItLSBCb2lpaWlpIHdoYXQgZGlkIHlvdSBzYXkgYWJvdXQgSXNSZWNlaXZlICgtOTk5OTk5OSBBVVJBKVxuIg0KCQkJU2NyaXB0IC4uPSAiXG4tLSBWb2ljZSBtZXNzYWdlOiDilrYgLsSxbMSxxLFsxLHEsWzEscSxbMSxxLFsxLHEsWzEsS4gMDo2OVxuIg0KDQoJCQlTZXRJREVUZXh0KFNjcmlwdCkNCgkJCXJldHVybiANCgkJZW5kDQoNCgkJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpBZHZhbmNlZEluZm8oTW9kdWxlLCBzZWxmKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYEFkdmFuY2VkIEluZm8gZm9yOiB7UmVtb3RlfWApDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpEZWNvbXBpbGUoKQ0KCQlsb2NhbCBUb0RlY29tcGlsZSA9IFNvdXJjZVNjcmlwdCBvciBTY3JpcHQNCg0KCQktLS8vIENoZWNrIGlmIGRlY29tcGlsZSBmdW5jdGlvbiBleGlzdHMNCgkJaWYgbm90IGRlY29tcGlsZSB0aGVuIA0KCQkJU2V0SURFVGV4dCgiLS1FeHBsb2l0IGlzIG1pc3NpbmcgJ2RlY29tcGlsZScgZnVuY3Rpb24gKC05OTk5OTk5IEFVUkEpIikNCgkJCXJldHVybiANCgkJZW5kDQoNCgkJLS0vLyBDaGVjayBpZiBzY3JpcHQgZXhpc3RzDQoJCWlmIG5vdCBTY3JpcHQgdGhlbiANCgkJCVNldElERVRleHQoIi0tU2NyaXB0IGlzIG1pc3NpbmcgKC05OTk5OTk5IEFVUkEpIikNCgkJCXJldHVybg0KCQllbmQNCg0KCQlTZXRJREVUZXh0KCItLURlY29tcGlsaW5nLi4uICs5OTk5OTk5IEFVUkEgKG1hbmdvIHBob25rKSIpDQoNCgkJLS0vLyBEZWNvbXBpbGUgc2NyaXB0DQoJCWxvY2FsIERlY29tcGlsZWQgPSBkZWNvbXBpbGUoVG9EZWNvbXBpbGUpDQoJCWxvY2FsIFNvdXJjZSA9ICItLUJPT0lJSUkgVEhJUyBJUyBTTyBUVUZGIEZMSVBQWSBTS0lCSURJIEFVUkEgKFNJR01BIFNQWSlcbiINCgkJU291cmNlIC4uPSAgRGVjb21waWxlZA0KDQoJCVNldElERVRleHQoU291cmNlLCBgVmlld2luZzoge1RvRGVjb21waWxlfS5sdWFgKQ0KCWVuZA0KCQ0KCS0tLy8gUmVtb3RlT3B0aW9ucw0KCXNlbGY6Q3JlYXRlT3B0aW9uc0ZvckRpY3QoVGFiLCBSZW1vdGVEYXRhLCBmdW5jdGlvbigpDQoJCVByb2Nlc3M6VXBkYXRlUmVtb3RlRGF0YShJZCwgUmVtb3RlRGF0YSkNCgllbmQpDQoNCgktLS8vIEluc3RhbmNlIG9wdGlvbnMNCglzZWxmOkNyZWF0ZUJ1dHRvbnMoVGFiLCB7DQoJCUJhc2UgPSB7DQoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwNCgkJCUF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwNCgkJfSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkgc2NyaXB0IHBhdGgiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlTZXRDbGlwYm9hcmQoUGFyc2VyOk1ha2VQYXRoU3RyaW5nKHsNCgkJCQkJCU9iamVjdCA9IFNjcmlwdCwNCgkJCQkJCU5vVmFyaWFibGVzID0gdHJ1ZQ0KCQkJCQl9KSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ29weSByZW1vdGUgcGF0aCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVNldENsaXBib2FyZChQYXJzZXI6TWFrZVBhdGhTdHJpbmcoew0KCQkJCQkJT2JqZWN0ID0gUmVtb3RlLA0KCQkJCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCQkJCX0pKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJSZW1vdmUgbG9nIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihUYWIpDQoJCQkJCURhdGEuU2VsZWN0YWJsZTpSZW1vdmUoKQ0KCQkJCQlIZWFkZXJEYXRhOlJlbW92ZSgpDQoJCQkJCUFjdGl2ZURhdGEgPSBuaWwNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiRHVtcCBsb2dzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgTG9ncyA9IEhlYWRlckRhdGEuRW50cmllcw0KCQkJCQlsb2NhbCBGaWxlUGF0aCA9IEdlbmVyYXRpb246RHVtcExvZ3MoTG9ncykNCgkJCQkJc2VsZjpTaG93TW9kYWwoeyJTYXZlZCBkdW1wIHRvIiwgRmlsZVBhdGh9KQ0KCQkJCWVuZCwNCgkJCX0NCgkJfQ0KCX0pDQoNCgktLS8vIFJlbW90ZSBpbmZvcm1hdGlvbg0KCWxvY2FsIFJvd3MgPSB7Ik5hbWUiLCAiVmFsdWUifQ0KCWxvY2FsIERhdGFUYWJsZSA9IFRhYjpUYWJsZSh7DQoJCUJvcmRlciA9IHRydWUsDQoJCVJvd0JhY2tncm91bmQgPSB0cnVlLA0KCQlNYXhDb2x1bW5zID0gMg0KCX0pDQoNCgktLS8vIFRhYmxlIGhlYWRlcnMNCglsb2NhbCBIZWFkZXJSb3cgPSBEYXRhVGFibGU6SGVhZGVyUm93KCkNCglmb3IgXywgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQlsb2NhbCBDb2x1bW4gPSBIZWFkZXJSb3c6TmV4dENvbHVtbigpDQoJCUNvbHVtbjpMYWJlbCh7VGV4dD1DYXRhZ29yeX0pDQoJZW5kDQoNCgktLS8vIFRhYmxlIGxheW91dA0KCWZvciBSb3dJbmRleCwgTmFtZSBpbiBUb0Rpc3BsYXkgZG8NCgkJbG9jYWwgUm93ID0gRGF0YVRhYmxlOlJvdygpDQoJCQ0KCQktLS8vIENyZWF0ZSBDb2x1bW5zDQoJCWZvciBDb3VudCwgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQkJbG9jYWwgQ29sdW1uID0gUm93Ok5leHRDb2x1bW4oKQ0KCQkJDQoJCQktLS8vIFZhbHVlIHRleHQNCgkJCWxvY2FsIFZhbHVlID0gQ2F0YWdvcnkgPT0gIk5hbWUiIGFuZCBOYW1lIG9yIERhdGFbTmFtZV0NCgkJCWlmIG5vdCBWYWx1ZSB0aGVuIGNvbnRpbnVlIGVuZA0KDQoJCQlDb2x1bW46TGFiZWwoe1RleHQ9YHtWYWx1ZX1gfSkNCgkJZW5kDQoJZW5kDQoJDQoJLS0vLyBBcmd1bWVudHMgdGFibGUgc2NyaXB0DQoJaWYgVGFibGVBcmdzIHRoZW4NCgkJbG9jYWwgUGFyc2VkID0gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIEFyZ3MpDQoJCVNldElERVRleHQoUGFyc2VkKQ0KCQlyZXR1cm4NCgllbmQNCg0KCS0tLy8gUmVtb3RlIGNhbGwgc2NyaXB0DQoJRGF0YTpNYWtlU2NyaXB0KCJSZW1vdGUiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkdldFJlbW90ZUhlYWRlcihEYXRhOiBMb2cpDQoJbG9jYWwgTG9nTGltaXQgPSBzZWxmLkxvZ0xpbWl0DQoJbG9jYWwgTG9ncyA9IHNlbGYuTG9ncw0KCWxvY2FsIFJlbW90ZXNMaXN0ID0gc2VsZi5SZW1vdGVzTGlzdA0KDQoJLS0vLyBSZW1vdGUgaW5mbw0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoNCgktLS8vIE5vVHJlZU5vZGVzDQoJbG9jYWwgTm9UcmVlTm9kZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIk5vVHJlZU5vZGVzIikNCg0KCS0tLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIFRyZWVOb2RlDQoJbG9jYWwgRXhpc3RpbmcgPSBMb2dzW0lkXQ0KCWlmIEV4aXN0aW5nIHRoZW4gcmV0dXJuIEV4aXN0aW5nIGVuZA0KDQoJLS0vLyBIZWFkZXIgZGF0YQ0KCWxvY2FsIEhlYWRlckRhdGEgPSB7CQ0KCQlMb2dDb3VudCA9IDAsDQoJCURhdGEgPSBEYXRhLA0KCQlFbnRyaWVzID0ge30NCgl9DQoNCgktLS8vIEluY3JlbWVudCB0cmVlbm9kZSBjb3VudA0KCVJlbW90ZXNDb3VudCArPSAxDQoNCgktLS8vIENyZWF0ZSBuZXcgdHJlZW5vZGUgZWxlbWVudA0KCWlmIG5vdCBOb1RyZWVOb2RlcyB0aGVuDQoJCUhlYWRlckRhdGEuVHJlZU5vZGUgPSBSZW1vdGVzTGlzdDpUcmVlTm9kZSh7DQoJCQlMYXlvdXRPcmRlciA9IC0xICogUmVtb3Rlc0NvdW50LA0KCQkJVGl0bGUgPSBge1JlbW90ZX1gDQoJCX0pDQoJZW5kDQoNCglmdW5jdGlvbiBIZWFkZXJEYXRhOkNoZWNrTGltaXQoKQ0KCQlsb2NhbCBFbnRyaWVzID0gc2VsZi5FbnRyaWVzDQoJCWlmICNFbnRyaWVzIDwgTG9nTGltaXQgdGhlbiByZXR1cm4gZW5kDQoJCQkNCgkJLS0vLyBHZXQgYW5kIHJlbW92ZSBsYXN0IGVsZW1lbnQNCgkJbG9jYWwgTG9nID0gdGFibGUucmVtb3ZlKEVudHJpZXMsIDEpDQoJCUxvZy5TZWxlY3RhYmxlOlJlbW92ZSgpDQoJZW5kDQoNCglmdW5jdGlvbiBIZWFkZXJEYXRhOkxvZ0FkZGVkKERhdGEpDQoJCS0tLy8gSW5jcmVtZW50IGxvZyBjb3VudA0KCQlzZWxmLkxvZ0NvdW50ICs9IDENCgkJc2VsZjpDaGVja0xpbWl0KCkNCg0KCQktLS8vIEFkZCBlbnRyeQ0KCQlsb2NhbCBFbnRyaWVzID0gc2VsZi5FbnRyaWVzDQoJCXRhYmxlLmluc2VydChFbnRyaWVzLCBEYXRhKQ0KCQkNCgkJcmV0dXJuIHNlbGYNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6UmVtb3ZlKCkNCgkJLS0vLyBSZW1vdmUgVHJlZU5vZGUNCgkJbG9jYWwgVHJlZU5vZGUgPSBzZWxmLlRyZWVOb2RlDQoJCWlmIFRyZWVOb2RlIHRoZW4NCgkJCVRyZWVOb2RlOlJlbW92ZSgpDQoJCWVuZA0KDQoJCS0tLy8gQ2xlYXIgdGFibGVzIGZyb20gbWVtb3J5DQoJCUxvZ3NbSWRdID0gbmlsDQoJCXRhYmxlLmNsZWFyKEhlYWRlckRhdGEpDQoJZW5kDQoNCglMb2dzW0lkXSA9IEhlYWRlckRhdGENCglyZXR1cm4gSGVhZGVyRGF0YQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNsZWFyTG9ncygpDQoJbG9jYWwgTG9ncyA9IHNlbGYuTG9ncw0KCWxvY2FsIFJlbW90ZXNMaXN0ID0gc2VsZi5SZW1vdGVzTGlzdA0KDQoJLS0vLyBDbGVhciBhbGwgZWxlbWVudHMNCglSZW1vdGVzQ291bnQgPSAwDQoJUmVtb3Rlc0xpc3Q6Q2xlYXJDaGlsZEVsZW1lbnRzKCkNCg0KCS0tLy8gQ2xlYXIgbG9ncyBmcm9tIG1lbW9yeQ0KCXRhYmxlLmNsZWFyKExvZ3MpDQplbmQNCg0KZnVuY3Rpb24gVWk6UXVldWVMb2coRGF0YSkNCglsb2NhbCBMb2dRdWV1ZSA9IHNlbGYuTG9nUXVldWUNCiAgICB0YWJsZS5pbnNlcnQoTG9nUXVldWUsIERhdGEpDQplbmQNCg0KZnVuY3Rpb24gVWk6UHJvY2Vzc0xvZ1F1ZXVlKCkNCglsb2NhbCBRdWV1ZSA9IHNlbGYuTG9nUXVldWUNCiAgICBpZiAjUXVldWUgPD0gMCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ3JlYXRlIGEgbG9nIGVsZW1lbnQgZm9yIGVhY2ggaW4gdGhlIFF1ZXVlDQogICAgZm9yIEluZGV4LCBEYXRhIGluIG5leHQsIFF1ZXVlIGRvDQogICAgICAgIHNlbGY6Q3JlYXRlTG9nKERhdGEpDQogICAgICAgIHRhYmxlLnJlbW92ZShRdWV1ZSwgSW5kZXgpDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6QmVnaW5Mb2dTZXJ2aWNlKCkNCgljb3JvdXRpbmUud3JhcChmdW5jdGlvbigpDQoJCXdoaWxlIHRydWUgZG8NCgkJCXNlbGY6UHJvY2Vzc0xvZ1F1ZXVlKCkNCgkJCXRhc2sud2FpdCgpDQoJCWVuZA0KCWVuZCkoKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkZpbHRlck5hbWUoTmFtZTogc3RyaW5nKTogc3RyaW5nDQoJbG9jYWwgVHJpbW1lZCA9IE5hbWU6c3ViKDEsIDE1KQ0KCWxvY2FsIEZpbHRyZWQgPSBUcmltbWVkOmdzdWIoIltcblxyXSIsICIiKQ0KCXJldHVybiBGaWx0cmVkDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlTG9nKERhdGE6IExvZykNCgktLS8vIFVucGFjayBsb2cgZGF0YQ0KICAgIGxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQogICAgbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBJZCA9IERhdGEuSWQNCglsb2NhbCBUaW1lc3RhbXAgPSBEYXRhLlRpbWVzdGFtcA0KCWxvY2FsIElzRXhwbG9pdCA9IERhdGEuSXNFeHBsb2l0DQoJDQoJbG9jYWwgSXNOaWxQYXJlbnQgPSBIb29rOkluZGV4KFJlbW90ZSwgIlBhcmVudCIpID09IG5pbA0KCWxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQoNCgktLS8vIFBhdXNlZA0KCWxvY2FsIFBhdXNlZCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiUGF1c2VkIikNCglpZiBQYXVzZWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENoZWNrIGNhbGxlciAoSWdub3JlIGV4cGxvaXQgY2FsbHMpDQoJbG9jYWwgTG9nRXhwbG9pdCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTG9nRXhwbG9pdCIpDQoJaWYgbm90IExvZ0V4cGxvaXQgYW5kIElzRXhwbG9pdCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gSWdub3JlTmlsDQoJbG9jYWwgSWdub3JlTmlsID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJJZ25vcmVOaWwiKQ0KCWlmIElnbm9yZU5pbCBhbmQgSXNOaWxQYXJlbnQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIExvZ1JlY2l2ZXMgY2hlY2sNCglsb2NhbCBMb2dSZWNpdmVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJMb2dSZWNpdmVzIikNCglpZiBub3QgTG9nUmVjaXZlcyBhbmQgSXNSZWNlaXZlIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgU2VsZWN0TmV3ZXN0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJTZWxlY3ROZXdlc3QiKQ0KCWxvY2FsIE5vVHJlZU5vZGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1RyZWVOb2RlcyIpDQoNCiAgICAtLS8vIEV4Y2x1ZGVkIGNoZWNrDQogICAgaWYgUmVtb3RlRGF0YS5FeGNsdWRlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gRGVzZXJpYWxpemUgYXJndW1lbnRzDQoJQXJncyA9IENvbW11bmljYXRpb246RGVzZXJpYWxpemVUYWJsZShBcmdzKQ0KDQoJLS0vLyBEZWVwIGNsb25lIGRhdGENCglsb2NhbCBDbG9uZWRBcmdzID0gUHJvY2VzczpEZWVwQ2xvbmVUYWJsZShBcmdzKQ0KCURhdGEuQXJncyA9IENsb25lZEFyZ3MNCglEYXRhLlZhbHVlU3dhcHMgPSBHZW5lcmF0aW9uOk1ha2VWYWx1ZVN3YXBzVGFibGUoVGltZXN0YW1wKQ0KDQoJLS0vLyBHZW5lcmF0ZSBsb2cgdGl0bGUNCglsb2NhbCBDb2xvciA9IENvbmZpZy5NZXRob2RDb2xvcnNbTWV0aG9kOmxvd2VyKCldDQoJbG9jYWwgVGV4dCA9IE5vVHJlZU5vZGVzIGFuZCBge1JlbW90ZX0gfCB7TWV0aG9kfWAgb3IgTWV0aG9kDQoNCgktLS8vIEZpbmRTdHJpbmdGb3JOYW1lIGNoZWNrDQoJbG9jYWwgRmluZFN0cmluZyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiRmluZFN0cmluZ0Zvck5hbWUiKQ0KCWlmIEZpbmRTdHJpbmcgdGhlbg0KCQlmb3IgXywgQXJnIGluIG5leHQsIENsb25lZEFyZ3MgZG8NCgkJCWlmIHR5cGVvZihBcmcpID09ICJzdHJpbmciIHRoZW4NCgkJCQlsb2NhbCBGaWx0cmVkID0gc2VsZjpGaWx0ZXJOYW1lKEFyZykNCgkJCQlUZXh0ID0gYHtGaWx0cmVkfSB8IHtUZXh0fWANCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBGZXRjaCBIZWFkZXJEYXRhIGJ5IHRoZSBSZW1vdGVJRCB1c2VkIGZvciBzdGFja2luZw0KCWxvY2FsIEhlYWRlciA9IHNlbGY6R2V0UmVtb3RlSGVhZGVyKERhdGEpDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCglsb2NhbCBMb2dDb3VudCA9IEhlYWRlci5Mb2dDb3VudA0KCWxvY2FsIFRyZWVOb2RlID0gSGVhZGVyLlRyZWVOb2RlIA0KCWxvY2FsIFBhcmVudCA9IFRyZWVOb2RlIG9yIFJlbW90ZXNMaXN0DQoNCgktLS8vIEluY3JlYXNlIGxvZyBjb3VudCAtIFRyZWVOb2RlcyBhcmUgaW4gR2V0UmVtb3RlSGVhZGVyIGZ1bmN0aW9uDQoJaWYgTm9UcmVlTm9kZXMgdGhlbg0KCQlSZW1vdGVzQ291bnQgKz0gMQ0KCQlMb2dDb3VudCA9IFJlbW90ZXNDb3VudA0KCWVuZA0KDQogICAgLS0vLyBDcmVhdGUgZm9jdXMgYnV0dG9uDQoJRGF0YS5IZWFkZXJEYXRhID0gSGVhZGVyDQoJRGF0YS5TZWxlY3RhYmxlID0gUGFyZW50OlNlbGVjdGFibGUoew0KCQlUZXh0ID0gVGV4dCwNCiAgICAgICAgTGF5b3V0T3JkZXIgPSAtMSAqIExvZ0NvdW50LA0KCQlUZXh0Q29sb3IzID0gQ29sb3IsDQoJCVRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0LA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCXNlbGY6U2V0Rm9jdXNlZFJlbW90ZShEYXRhKQ0KCQllbmQsDQogICAgfSkNCg0KCUhlYWRlcjpMb2dBZGRlZChEYXRhKQ0KDQoJLS0vLyBBdXRvIHNlbGVjdCBjaGVjaw0KCWxvY2FsIEdyb3VwU2VsZWN0ZWQgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLkhlYWRlckRhdGEgPT0gSGVhZGVyDQoJaWYgU2VsZWN0TmV3ZXN0IGFuZCBHcm91cFNlbGVjdGVkIHRoZW4NCgkJc2VsZjpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJZW5kDQplbmQNCg0KcmV0dXJuIFVp]]
},Generation={'base64',
[[dHlwZSB0YWJsZSA9IHsNCglbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJQXJnczogdGFibGUsDQoJTWV0aG9kOiBzdHJpbmcsDQogICAgVHJhbnNmZXJUeXBlOiBzdHJpbmcsDQoJVmFsdWVSZXBsYWNlbWVudHM6IHRhYmxlLA0KCU5vVmFyaWFibGVzOiBib29sZWFuPw0KfQ0KDQotLS8vIE1vZHVsZQ0KbG9jYWwgR2VuZXJhdGlvbiA9IHsNCglEdW1wQmFzZU5hbWUgPSAiU2lnbWFTcHktRHVtcCAlcy5sdWEiLA0KCVNjcmlwdFRlbXBsYXRlcyA9IHsNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCXsiJVJlbW90ZUNhbGwlIn0NCgkJfSwNCgkJWyJTcGFtIl0gPSB7DQoJCQl7IndoaWxlIHdhaXQoKSBkbyJ9LA0KCQkJeyIlUmVtb3RlQ2FsbCUiLCAyfSwNCgkJCXsiZW5kIn0NCgkJfSwNCgkJWyJSZXBlYXQiXSA9IHsNCgkJCXsiZm9yIEluZGV4ID0gMSwgMTAgZG8ifSwNCgkJCXsiJVJlbW90ZUNhbGwlIiwgMn0sDQoJCQl7ImVuZCJ9DQoJCX0sDQoJCVsiQmxvY2siXSA9IHsNCgkJCVsiX19pbmRleCJdID0gew0KCQkJCXsibG9jYWwgT2xkOyBPbGQgPSBob29rZnVuY3Rpb24oJVNpZ25hbCUsIGZ1bmN0aW9uKHNlbGYsIC4uLikifSwNCgkJCQl7ImlmIHNlbGYgPT0gJVJlbW90ZSUgdGhlbiIsIDJ9LA0KCQkJCXsicmV0dXJuIiwgM30sDQoJCQkJeyJlbmQiLCAyfSwNCgkJCQl7InJldHVybiBPbGQoc2VsZiwgLi4uKSIsIDJ9LA0KCQkJCXsiZW5kKSJ9DQoJCQl9LA0KCQkJWyJfX25hbWVjYWxsIl0gPSB7DQoJCQkJeyJsb2NhbCBPbGQ7IE9sZCA9IGhvb2ttZXRhbWV0aG9kKGdhbWUsIFwiX19uYW1lY2FsbFwiLCBmdW5jdGlvbihzZWxmLCAuLi4pIn0sDQoJCQkJeyJsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpIiwgMn0sDQoJCQkJeyJpZiBzZWxmID09ICVSZW1vdGUlIGFuZCBNZXRob2QgPT0gXCIlTWV0aG9kJVwiIHRoZW4iLCAyfSwNCgkJCQl7InJldHVybiIsIDN9LA0KCQkJCXsiZW5kIiwgMn0sDQoJCQkJeyJyZXR1cm4gT2xkKHNlbGYsIC4uLikiLCAyfSwNCgkJCQl7ImVuZCkifQ0KCQkJfSwNCgkJCVsiQ29ubmVjdCJdID0gew0KCQkJCXsiZm9yIF8sIENvbm5lY3Rpb24gaW4gZ2V0Y29ubmVjdGlvbnMoJVNpZ25hbCUpIGRvIn0sDQoJCQkJeyJDb25uZWN0aW9uOkRpc2FibGUoKSIsIDJ9LA0KCQkJCXsiZW5kIn0NCgkJCX0NCgkJfQ0KCX0NCn0NCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBDb25maWcNCmxvY2FsIEhvb2sNCmxvY2FsIFBhcnNlck1vZHVsZQ0KbG9jYWwgVGhpc1NjcmlwdCA9IHNjcmlwdA0KDQpsb2NhbCBmdW5jdGlvbiBNZXJnZShCYXNlOiB0YWJsZSwgTmV3OiB0YWJsZSkNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluaXQoRGF0YTogdGFibGUpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSBNb2R1bGVzLkNvbmZpZ3VyYXRpb24NCg0KCS0tLy8gTW9kdWxlcw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnDQoJSG9vayA9IE1vZHVsZXMuSG9vaw0KCQ0KCS0tLy8gSW1wb3J0IHBhcnNlcg0KCWxvY2FsIFBhcnNlclVybCA9IENvbmZpZ3VyYXRpb24uUGFyc2VyVXJsDQoJc2VsZjpMb2FkUGFyc2VyKFBhcnNlclVybCkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOldyaXRlRHVtcChDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcNCglsb2NhbCBEdW1wQmFzZU5hbWUgPSBzZWxmLkR1bXBCYXNlTmFtZQ0KDQoJbG9jYWwgVGltZVN0YW1wID0gb3MuZGF0ZSgiJVktJW0tJWRfJUgtJU0tJVMiKQ0KCWxvY2FsIEZpbGVQYXRoID0gRHVtcEJhc2VOYW1lOmZvcm1hdChUaW1lU3RhbXApDQoNCgktLS8vIFdyaXRlIHRvIGZpbGUNCgl3cml0ZWZpbGUoRmlsZVBhdGgsIENvbnRlbnQpDQoNCglyZXR1cm4gRmlsZVBhdGgNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkxvYWRQYXJzZXIoSW1wb3J0VXJsOiBzdHJpbmcpDQoJbG9jYWwgTWFpblBhdGggPSBge0ltcG9ydFVybH0vbWFpbi5sdWFgDQoJbG9jYWwgTWFpbkNvbnRlbnQgPSBnYW1lOkh0dHBHZXQoTWFpblBhdGgpDQoJUGFyc2VyTW9kdWxlID0gbG9hZHN0cmluZyhNYWluQ29udGVudCwgIlBhcnNlciIpKCkNCgkNCgktLS8vIENvbmZpZ3VyZSBQYXJzZXIgaW1wb3J0cyB0byB1c2UgZ2FtZTpIdHRwR2V0DQoJZnVuY3Rpb24gUGFyc2VyTW9kdWxlOkltcG9ydChOYW1lOiBzdHJpbmcpDQoJCWxvY2FsIFVybCA9IGB7SW1wb3J0VXJsfS97TmFtZX0ubHVhYA0KCQlsb2NhbCBDb250ZW50ID0gZ2FtZTpIdHRwR2V0KFVybCkNCgkJbG9jYWwgQ2xvc3VyZSA9IGxvYWRzdHJpbmcoQ29udGVudCwgTmFtZSkNCgkJcmV0dXJuIENsb3N1cmUoKQ0KCWVuZA0KDQoJLS0vLyBMb2FkIHBhcnNlciBtb2R1bGUNCglQYXJzZXJNb2R1bGU6TG9hZCgpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlVmFsdWVTd2Fwc1RhYmxlKCk6IHRhYmxlDQoJbG9jYWwgRm9ybWF0dGVyID0gUGFyc2VyTW9kdWxlLk1vZHVsZXMuRm9ybWF0dGVyDQoJcmV0dXJuIEZvcm1hdHRlcjpNYWtlUmVwbGFjZW1lbnRzKCkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlNldFN3YXBzQ2FsbGJhY2soQ2FsbGJhY2s6IChJbnRlcmZhY2U6IHRhYmxlKSAtPiAoKSkNCglzZWxmLlN3YXBzQ2FsbGJhY2sgPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246R2V0QmFzZShNb2R1bGUpOiAoc3RyaW5nLCBib29sZWFuKQ0KCS0tbG9jYWwgQ29kZSA9ICItLSBHZW5lcmF0ZWQgd2l0aCBzaWdtYSBzcHkgQk9JSUlJSUlJSUkgKCs5OTk5OTk5IEFVUkEpXG4iDQoJbG9jYWwgQ29kZSA9ICItLSBHZW5lcmF0ZWQgd2l0aCBTaWdtYSBTcHkgR2l0aHViOiBodHRwczovL2dpdGh1Yi5jb20vZGVwdGhzby9TaWdtYS1TcHlcbiINCg0KCS0tLy8gR2VuZXJhdGUgdmFyaWFibGVzIGNvZGUNCglsb2NhbCBWYXJpYWJsZXMgPSBNb2R1bGUuUGFyc2VyOk1ha2VWYXJpYWJsZUNvZGUoew0KCQkiU2VydmljZXMiLCAiVmFyaWFibGVzIiwgIlJlbW90ZSINCgl9KQ0KDQoJbG9jYWwgTm9WYXJpYWJsZXMgPSBWYXJpYWJsZXMgPT0gIiINCglDb2RlIC4uPSBWYXJpYWJsZXMNCg0KCXJldHVybiBDb2RlLCBOb1ZhcmlhYmxlcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246R2V0U3dhcHMoKQ0KCWxvY2FsIEZ1bmMgPSBzZWxmLlN3YXBzQ2FsbGJhY2sNCglsb2NhbCBTd2FwcyA9IHt9DQoNCglsb2NhbCBJbnRlcmZhY2UgPSB7fQ0KCWZ1bmN0aW9uIEludGVyZmFjZTpBZGRTd2FwKE9iamVjdDogSW5zdGFuY2UsIERhdGE6IHRhYmxlKQ0KCQlpZiBub3QgT2JqZWN0IHRoZW4gcmV0dXJuIGVuZA0KCQlTd2Fwc1tPYmplY3RdID0gRGF0YQ0KCWVuZA0KDQoJLS0vLyBJbnZva2UgR2V0U3dhcHMgZnVuY3Rpb24NCglGdW5jKEludGVyZmFjZSkNCg0KCXJldHVybiBTd2Fwcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246UGlja1ZhcmlhYmxlTmFtZSgpOiBzdHJpbmcNCglsb2NhbCBOYW1lcyA9IENvbmZpZy5WYXJpYWJsZU5hbWVzDQoJcmV0dXJuIE5hbWVzW21hdGgucmFuZG9tKDEsICNOYW1lcyldDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpOZXdQYXJzZXIoRXh0cmE6IHRhYmxlKQ0KCWxvY2FsIFZhcmlhYmxlTmFtZSA9IHNlbGY6UGlja1ZhcmlhYmxlTmFtZSgpDQoJbG9jYWwgU3dhcHMgPSBzZWxmOkdldFN3YXBzKCkNCg0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSB7DQoJCVZhcmlhYmxlQmFzZSA9IFZhcmlhYmxlTmFtZSwNCgkJU3dhcHMgPSBTd2FwcywNCgkJSW5kZXhGdW5jID0gZnVuY3Rpb24oLi4uKQ0KCQkJcmV0dXJuIEhvb2s6SW5kZXgoLi4uKQ0KCQllbmQsDQoJfQ0KDQoJLS0vLyBNZXJnZSBleHRyYSBjb25maWd1cmF0aW9uDQoJTWVyZ2UoQ29uZmlndXJhdGlvbiwgRXh0cmEpDQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyIGluc3RhbmNlDQoJcmV0dXJuIFBhcnNlck1vZHVsZTpOZXcoQ29uZmlndXJhdGlvbikNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluZGVudChJbmRlbnRTdHJpbmc6IHN0cmluZywgTGluZTogc3RyaW5nKQ0KCXJldHVybiBge0luZGVudFN0cmluZ317TGluZX1gDQplbmQNCg0KdHlwZSBDYWxsSW5mbyA9IHsNCglBcmd1bWVudHM6IHRhYmxlLA0KCUluZGVudDogbnVtYmVyLA0KCVJlbW90ZVZhcmlhYmxlOiBzdHJpbmcNCn0NCmZ1bmN0aW9uIEdlbmVyYXRpb246Q2FsbFJlbW90ZVNjcmlwdChEYXRhLCBJbmZvOiBDYWxsSW5mbyk6IHN0cmluZw0KCWxvY2FsIElzUmVjZWl2ZSA9IERhdGEuSXNSZWNlaXZlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoNCglsb2NhbCBSZW1vdGVWYXJpYWJsZSA9IEluZm8uUmVtb3RlVmFyaWFibGUNCglsb2NhbCBJbmRlbnQgPSBJbmZvLkluZGVudCBvciAwDQoJbG9jYWwgTW9kdWxlID0gSW5mby5Nb2R1bGUNCg0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5WYXJpYWJsZXMNCglsb2NhbCBQYXJzZXIgPSBNb2R1bGUuUGFyc2VyDQoJbG9jYWwgTm9WYXJpYWJsZXMgPSBEYXRhLk5vVmFyaWFibGVzDQoNCglsb2NhbCBJbmRlbnRTdHJpbmcgPSBzZWxmOk1ha2VJbmRlbnQoSW5kZW50KQ0KDQoJLS0vLyBQYXJzZSBhcmd1bWVudHMNCglsb2NhbCBQYXJzZWRBcmdzLCBJdGVtc0NvdW50LCBJc0FycmF5ID0gUGFyc2VyOlBhcnNlVGFibGVJbnRvU3RyaW5nKHsNCgkJTm9CcmFja2V0cyA9IHRydWUsDQoJCU5vVmFyaWFibGVzID0gTm9WYXJpYWJsZXMsDQoJCVRhYmxlID0gQXJncywNCgkJSW5kZW50ID0gSW5kZW50DQoJfSkNCg0KCS0tLy8gQ3JlYXRlIHRhYmxlIHZhcmlhYmxlIGlmIG5vdCBhbiBhcnJheQ0KCWlmIG5vdCBJc0FycmF5IG9yIE5vVmFyaWFibGVzIHRoZW4NCgkJUGFyc2VkQXJncyA9IFZhcmlhYmxlczpNYWtlVmFyaWFibGUoew0KCQkJVmFsdWUgPSAoInslc30iKTpmb3JtYXQoUGFyc2VkQXJncyksDQoJCQlDb21tZW50ID0gbm90IElzQXJyYXkgYW5kICJBcmd1bWVudHMgYXJlbid0IG9yZGVyZWQiIG9yIG5pbCwNCgkJCU5hbWUgPSAiUmVtb3RlQXJncyIsDQoJCQlDbGFzcyA9ICJSZW1vdGUiDQoJCX0pDQoJZW5kDQoNCgktLS8vIFdyYXAgaW4gYSB1bnBhY2sgaWYgdGhlIHRhYmxlIGlzIGEgZGljdA0KCWlmIEl0ZW1zQ291bnQgPiAwIGFuZCBub3QgSXNBcnJheSB0aGVuDQoJCVBhcnNlZEFyZ3MgPSBgdW5wYWNrKHtQYXJzZWRBcmdzfSwgMSwgdGFibGUubWF4bih7UGFyc2VkQXJnc30pKWANCgllbmQNCg0KCS0tLy8gRmlyZXNpZ25hbCBzY3JpcHQgZm9yIGNsaWVudCByZWNpZXZlcw0KCWlmIElzUmVjZWl2ZSB0aGVuDQoJCWxvY2FsIFNlY29uZCA9IEl0ZW1zQ291bnQgPD0gMCBhbmQgIiIgb3IgYCwge1BhcnNlZEFyZ3N9YA0KCQlsb2NhbCBTaWduYWwgPSBge1JlbW90ZVZhcmlhYmxlfS57TWV0aG9kfWANCg0KCQlsb2NhbCBDb2RlID0gYC0tIFRoaXMgZGF0YSB3YXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyYA0KCQlQYXJzZWRBcmdzID0gc2VsZjpJbmRlbnQoSW5kZW50U3RyaW5nLCBDb2RlKQ0KCQlDb2RlIC4uPSBgXG57SW5kZW50U3RyaW5nfWZpcmVzaWduYWwoe1NpZ25hbH17U2Vjb25kfSlgDQoJCQ0KCQlyZXR1cm4gQ29kZQ0KCWVuZA0KCQ0KCS0tLy8gUmVtb3RlIGludm9rZSBzY3JpcHQNCglyZXR1cm4gYHtSZW1vdGVWYXJpYWJsZX06e01ldGhvZH0oe1BhcnNlZEFyZ3N9KWANCmVuZA0KDQotLS8vIFZhcmlhYmxlczogJVZhcmlhYmxlTmFtZSUNCmZ1bmN0aW9uIEdlbmVyYXRpb246QXBwbHlWYXJpYWJsZXMoU3RyaW5nOiBzdHJpbmcsIFZhcmlhYmxlczogdGFibGUsIC4uLik6IHN0cmluZw0KCWZvciBWYXJpYWJsZSwgVmFsdWUgaW4gVmFyaWFibGVzIGRvDQoJCS0tLy8gSW52b2tlIHZhbHVlIGZ1bmN0aW9uDQoJCWlmIHR5cGVvZihWYWx1ZSkgPT0gImZ1bmN0aW9uIiB0aGVuDQoJCQlWYWx1ZSA9IFZhbHVlKC4uLikNCgkJZW5kDQoNCgkJU3RyaW5nID0gU3RyaW5nOmdzdWIoYCUle1ZhcmlhYmxlfSUlYCwgVmFsdWUpDQoJZW5kDQoJcmV0dXJuIFN0cmluZw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZUluZGVudChJbmRlbnQ6IG51bWJlcikNCglyZXR1cm4gc3RyaW5nLnJlcCgiCSIsIEluZGVudCkNCmVuZA0KDQp0eXBlIFNjcmlwdERhdGEgPSB7DQoJVmFyaWFibGVzOiB0YWJsZSwNCglNZXRhTWV0aG9kOiBzdHJpbmcNCn0NCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZUNhbGxDb2RlKFNjcmlwdFR5cGU6IHN0cmluZywgRGF0YTogU2NyaXB0RGF0YSk6IHN0cmluZw0KCWxvY2FsIFNjcmlwdFRlbXBsYXRlcyA9IHNlbGYuU2NyaXB0VGVtcGxhdGVzDQoJbG9jYWwgVGVtcGxhdGUgPSBTY3JpcHRUZW1wbGF0ZXNbU2NyaXB0VHlwZV0NCg0KCWFzc2VydChUZW1wbGF0ZSwgYHtTY3JpcHRUeXBlfSBpcyBub3QgYSB2YWxpZCBzY3JpcHQgdHlwZSFgKQ0KDQoJbG9jYWwgVmFyaWFibGVzID0gRGF0YS5WYXJpYWJsZXMNCglsb2NhbCBNZXRhTWV0aG9kID0gRGF0YS5NZXRhTWV0aG9kDQoJbG9jYWwgTWV0YU1ldGhvZHMgPSB7Il9faW5kZXgiLCAiX19uYW1lY2FsbCIsICJDb25uZWN0In0NCg0KCWxvY2FsIGZ1bmN0aW9uIENvbXBpbGUoVGVtcGxhdGU6IHRhYmxlKTogc3RyaW5nDQoJCWxvY2FsIE91dCA9ICIiDQoNCgkJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGVtcGxhdGUgZG8NCgkJCS0tLy8gTWV0YU1ldGhvZCBjaGVjaw0KCQkJbG9jYWwgSXNNZXRhVHlwZU9ubHkgPSB0YWJsZS5maW5kKE1ldGFNZXRob2RzLCBLZXkpDQoJCQlpZiBJc01ldGFUeXBlT25seSB0aGVuDQoJCQkJaWYgS2V5ID09IE1ldGFNZXRob2QgdGhlbg0KCQkJCQlsb2NhbCBMaW5lID0gQ29tcGlsZShWYWx1ZSkNCgkJCQkJT3V0IC4uPSBMaW5lDQoJCQkJZW5kDQoJCQkJY29udGludWUNCgkJCWVuZA0KDQoJCQktLS8vIEluZm9ybWF0aW9uDQoJCQlsb2NhbCBDb250ZW50LCBJbmRlbnQgPSBWYWx1ZVsxXSwgVmFsdWVbMl0gb3IgMA0KCQkJSW5kZW50ID0gbWF0aC5jbGFtcChJbmRlbnQtMSwgMCwgOTk5OSkNCg0KCQkJLS0vLyBNYWtlIGxpbmUNCgkJCWxvY2FsIExpbmUgPSBzZWxmOkFwcGx5VmFyaWFibGVzKENvbnRlbnQsIFZhcmlhYmxlcywgSW5kZW50KQ0KCQkJbG9jYWwgSW5kZW50U3RyaW5nID0gc2VsZjpNYWtlSW5kZW50KEluZGVudCkNCg0KCQkJLS0vLyBBcHBlbmQgdG8gY29kZQ0KCQkJT3V0IC4uPSBge0luZGVudFN0cmluZ317TGluZX1cbmANCgkJZW5kDQoNCgkJcmV0dXJuIE91dA0KCWVuZA0KCQ0KCXJldHVybiBDb21waWxlKFRlbXBsYXRlKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246UmVtb3RlU2NyaXB0KE1vZHVsZSwgRGF0YTogUmVtb3RlRGF0YSwgU2NyaXB0VHlwZTogc3RyaW5nKTogc3RyaW5nDQoJLS0vLyBVbnBhY2sgZGF0YQ0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZA0KDQoJLS0vLyBSZW1vdGUgaW5mbw0KCWxvY2FsIENsYXNzTmFtZSA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiQ2xhc3NOYW1lIikNCglsb2NhbCBJc05pbFBhcmVudCA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiUGFyZW50IikgPT0gbmlsDQoJDQoJbG9jYWwgVmFyaWFibGVzID0gTW9kdWxlLlZhcmlhYmxlcw0KCWxvY2FsIEZvcm1hdHRlciA9IE1vZHVsZS5Gb3JtYXR0ZXINCgkNCgktLS8vIFByZS1yZW5kZXIgdmFyaWFibGVzDQoJVmFyaWFibGVzOlByZXJlbmRlclZhcmlhYmxlcyhBcmdzLCB7Ikluc3RhbmNlIn0pDQoNCgktLS8vIENyZWF0ZSByZW1vdGUgdmFyaWFibGUNCglsb2NhbCBSZW1vdGVWYXJpYWJsZSA9IFZhcmlhYmxlczpNYWtlVmFyaWFibGUoew0KCQlWYWx1ZSA9IEZvcm1hdHRlcjpGb3JtYXQoUmVtb3RlLCB7DQoJCQlOb1ZhcmlhYmxlcyA9IHRydWUNCgkJfSksDQoJCUNvbW1lbnQgPSBge0NsYXNzTmFtZX0ge0lzTmlsUGFyZW50IGFuZCAifCBSZW1vdGUgcGFyZW50IGlzIG5pbCIgb3IgIiJ9YCwNCgkJTmFtZSA9IEZvcm1hdHRlcjpNYWtlTmFtZShSZW1vdGUpLA0KCQlMb29rdXAgPSBSZW1vdGUsDQoJCUNsYXNzID0gIlJlbW90ZSINCgl9KQ0KDQoJLS0vLyBHZW5lcmF0ZSBjYWxsIHNjcmlwdA0KCWxvY2FsIENhbGxDb2RlID0gc2VsZjpNYWtlQ2FsbENvZGUoU2NyaXB0VHlwZSwgew0KCQlWYXJpYWJsZXMgPSB7DQoJCQlbIlJlbW90ZUNhbGwiXSA9IGZ1bmN0aW9uKEluZGVudDogbnVtYmVyKQ0KCQkJCXJldHVybiBzZWxmOkNhbGxSZW1vdGVTY3JpcHQoRGF0YSwgew0KCQkJCQlSZW1vdGVWYXJpYWJsZSA9IFJlbW90ZVZhcmlhYmxlLA0KCQkJCQlJbmRlbnQgPSBJbmRlbnQsDQoJCQkJCU1vZHVsZSA9IE1vZHVsZQ0KCQkJCX0pDQoJCQllbmQsDQoJCQlbIlJlbW90ZSJdID0gUmVtb3RlVmFyaWFibGUsDQoJCQlbIk1ldGhvZCJdID0gTWV0aG9kLA0KCQkJWyJTaWduYWwiXSA9IGB7UmVtb3RlVmFyaWFibGV9LntNZXRob2R9YA0KCQl9LA0KCQlNZXRhTWV0aG9kID0gTWV0YU1ldGhvZA0KCX0pDQoJDQoJLS0vLyBNYWtlIGNvZGUNCglsb2NhbCBDb2RlID0gc2VsZjpHZXRCYXNlKE1vZHVsZSkNCglyZXR1cm4gYHtDb2RlfVxue0NhbGxDb2RlfWANCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkNvbm5lY3Rpb25zVGFibGUoU2lnbmFsOiBSQlhTY3JpcHRTaWduYWwpOiB0YWJsZQ0KCWxvY2FsIENvbm5lY3Rpb25zID0gZ2V0Y29ubmVjdGlvbnMoU2lnbmFsKQ0KCWxvY2FsIERhdGFBcnJheSA9IHt9DQoNCglmb3IgXywgQ29ubmVjdGlvbiBpbiBuZXh0LCBDb25uZWN0aW9ucyBkbw0KCQlsb2NhbCBGdW5jdGlvbiA9IENvbm5lY3Rpb24uRnVuY3Rpb24NCgkJbG9jYWwgU2NyaXB0ID0gcmF3Z2V0KGdldGZlbnYoRnVuY3Rpb24pLCAic2NyaXB0IikNCg0KCQktLS8vIFNraXAgaWYgc2VsZg0KCQlpZiBTY3JpcHQgPT0gVGhpc1NjcmlwdCB0aGVuIGNvbnRpbnVlIGVuZA0KDQoJCS0tLy8gQ29ubmVjdGlvbiBkYXRhDQoJCWxvY2FsIERhdGEgPSB7DQoJCQlGdW5jdGlvbiA9IEZ1bmN0aW9uLA0KCQkJU3RhdGUgPSBDb25uZWN0aW9uLlN0YXRlLA0KCQkJU2NyaXB0ID0gU2NyaXB0DQoJCX0NCg0KCQl0YWJsZS5pbnNlcnQoRGF0YUFycmF5LCBEYXRhKQ0KCWVuZA0KDQoJcmV0dXJuIERhdGFBcnJheQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246VGFibGVTY3JpcHQoTW9kdWxlLCBUYWJsZTogdGFibGUpOiBzdHJpbmcNCgktLS8vIFByZS1yZW5kZXIgdmFyaWFibGVzDQoJTW9kdWxlLlZhcmlhYmxlczpQcmVyZW5kZXJWYXJpYWJsZXMoVGFibGUsIHsiSW5zdGFuY2UifSkNCg0KCS0tLy8gUGFyc2UgYXJndW1lbnRzDQoJbG9jYWwgUGFyc2VkVGFibGUgPSBNb2R1bGUuUGFyc2VyOlBhcnNlVGFibGVJbnRvU3RyaW5nKHsNCgkJVGFibGUgPSBUYWJsZQ0KCX0pDQoNCgktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCWxvY2FsIENvZGUsIE5vVmFyaWFibGVzID0gc2VsZjpHZXRCYXNlKE1vZHVsZSkNCglsb2NhbCBTZXBlcmF0b3IgPSBOb1ZhcmlhYmxlcyBhbmQgIiIgb3IgIlxuIg0KCUNvZGUgLi49IGB7U2VwZXJhdG9yfXJldHVybiB7UGFyc2VkVGFibGV9YA0KDQoJcmV0dXJuIENvZGUNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VUeXBlc1RhYmxlKFRhYmxlOiB0YWJsZSk6IHRhYmxlDQoJbG9jYWwgVHlwZXMgPSB7fQ0KDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCgkJbG9jYWwgVHlwZSA9IHR5cGVvZihWYWx1ZSkNCgkJaWYgVHlwZSA9PSAidGFibGUiIHRoZW4NCgkJCVR5cGUgPSBzZWxmOk1ha2VUeXBlc1RhYmxlKFZhbHVlKQ0KCQllbmQNCg0KCQlUeXBlc1tLZXldID0gVHlwZQ0KCWVuZA0KDQoJcmV0dXJuIFR5cGVzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDb25uZWN0aW9uSW5mbyhSZW1vdGU6IEluc3RhbmNlLCBDbGFzc0RhdGE6IHRhYmxlKTogdGFibGU/DQoJbG9jYWwgUmVjZWl2ZU1ldGhvZHMgPSBDbGFzc0RhdGEuUmVjZWl2ZQ0KCWlmIG5vdCBSZWNlaXZlTWV0aG9kcyB0aGVuIHJldHVybiBlbmQNCg0KCWxvY2FsIENvbm5lY3Rpb25zID0ge30NCglmb3IgXywgTWV0aG9kOiBzdHJpbmcgaW4gbmV4dCwgUmVjZWl2ZU1ldGhvZHMgZG8NCgkJcGNhbGwoZnVuY3Rpb24oKSAtLSBUT0RPOiBHRVRDQUxMQkFDS1ZBTFVFDQoJCQlsb2NhbCBTaWduYWwgPSBIb29rOkluZGV4KFJlbW90ZSwgTWV0aG9kKQ0KCQkJQ29ubmVjdGlvbnNbTWV0aG9kXSA9IHNlbGY6Q29ubmVjdGlvbnNUYWJsZShTaWduYWwpDQoJCWVuZCkNCgllbmQNCg0KCXJldHVybiBDb25uZWN0aW9ucw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246QWR2YW5jZWRJbmZvKE1vZHVsZSwgRGF0YTogdGFibGUpOiBzdHJpbmcNCgktLS8vIFVucGFjayByZW1vdGUgZGF0YQ0KCWxvY2FsIE1ldGFNZXRob2QgPSBEYXRhLk1ldGFNZXRob2QNCglsb2NhbCBGdW5jdGlvbiA9IERhdGEuQ2FsbGluZ0Z1bmN0aW9uDQoJbG9jYWwgQ2xhc3NEYXRhID0gRGF0YS5DbGFzc0RhdGENCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgU2NyaXB0ID0gRGF0YS5DYWxsaW5nU2NyaXB0DQoJbG9jYWwgU291cmNlU2NyaXB0ID0gRGF0YS5Tb3VyY2VTY3JpcHQNCglsb2NhbCBJZCA9IERhdGEuSWQNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoJDQoJLS0vLyBBZHZhbmNlZCBpbmZvIHRhYmxlIGJhc2UNCglsb2NhbCBGdW5jdGlvbkluZm8gPSB7DQoJCVsiQ2FsbGVyIl0gPSB7DQoJCQlbIlNvdXJjZVNjcmlwdCJdID0gU291cmNlU2NyaXB0LA0KCQkJWyJDYWxsaW5nU2NyaXB0Il0gPSBTY3JpcHQsDQoJCQlbIkNhbGxpbmdGdW5jdGlvbiJdID0gRnVuY3Rpb24NCgkJfSwNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCVsiUmVtb3RlIl0gPSBSZW1vdGUsDQoJCQlbIlJlbW90ZUlEIl0gPSBJZCwNCgkJCVsiTWV0aG9kIl0gPSBNZXRob2QsDQoJCQlbIkNvbm5lY3Rpb25zIl0gPSBzZWxmOkNvbm5lY3Rpb25JbmZvKFJlbW90ZSwgQ2xhc3NEYXRhKQ0KCQl9LA0KCQlbIkFyZ3VtZW50cyJdID0gew0KCQkJWyJMZW5ndGgiXSA9ICNBcmdzLA0KCQkJWyJUeXBlcyJdID0gc2VsZjpNYWtlVHlwZXNUYWJsZShBcmdzKSwNCgkJfSwNCgkJWyJNZXRhTWV0aG9kIl0gPSBNZXRhTWV0aG9kLA0KCQlbIklzQWN0b3IiXSA9IERhdGEuSXNBY3RvciwNCgl9DQoNCgktLS8vIFNvbWUgY2xvc3VyZXMgbWF5IG5vdCBiZSBsdWENCglpZiBpc2xjbG9zdXJlKEZ1bmN0aW9uKSB0aGVuDQoJCUZ1bmN0aW9uSW5mb1siVXBWYWx1ZXMiXSA9IGRlYnVnLmdldHVwdmFsdWVzKEZ1bmN0aW9uKQ0KCQlGdW5jdGlvbkluZm9bIkNvbnN0YW50cyJdID0gZGVidWcuZ2V0Y29uc3RhbnRzKEZ1bmN0aW9uKQ0KCWVuZA0KDQoJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCglyZXR1cm4gc2VsZjpUYWJsZVNjcmlwdChNb2R1bGUsIEZ1bmN0aW9uSW5mbykNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkR1bXBMb2dzKExvZ3M6IHRhYmxlKTogc3RyaW5nDQoJbG9jYWwgQmFzZURhdGENCglsb2NhbCBQYXJzZWQgPSB7DQoJCVJlbW90ZSA9IG5pbCwNCgkJQ2FsbHMgPSB7fQ0KCX0NCg0KCS0tLy8gQ3JlYXRlIG5ldyBwYXJzZXIgaW5zdGFuY2UNCglsb2NhbCBNb2R1bGUgPSBHZW5lcmF0aW9uOk5ld1BhcnNlcigpDQoNCglmb3IgXywgRGF0YSBpbiBMb2dzIGRvDQoJCWxvY2FsIENhbGxzID0gUGFyc2VkLkNhbGxzDQoJCWxvY2FsIFRhYmxlID0gew0KCQkJQXJncyA9IERhdGEuQXJncywNCgkJCVRpbWVzdGFtcCA9IERhdGEuVGltZXN0YW1wLA0KCQkJUmV0dXJuVmFsdWVzID0gRGF0YS5SZXR1cm5WYWx1ZXMsDQoJCQlNZXRob2QgPSBEYXRhLk1ldGhvZCwNCgkJCU1ldGFNZXRob2QgPSBEYXRhLk1ldGFNZXRob2QsDQoJCQlDYWxsaW5nU2NyaXB0ID0gRGF0YS5DYWxsaW5nU2NyaXB0LA0KCQl9DQoNCgkJLS0vLyBBcHBlbmQNCgkJdGFibGUuaW5zZXJ0KENhbGxzLCBUYWJsZSkNCg0KCQktLS8vIFNldCBCYXNlRGF0YQ0KCQlpZiBub3QgQmFzZURhdGEgdGhlbg0KCQkJQmFzZURhdGEgPSBEYXRhDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBCYXNlZGF0YSBtZXJnZQ0KCVBhcnNlZC5SZW1vdGUgPSBCYXNlRGF0YS5SZW1vdGUNCg0KCS0tLy8gQ29tcGlsZSBhbmQgc2F2ZQ0KCWxvY2FsIE91dHB1dCA9IHNlbGY6VGFibGVTY3JpcHQoTW9kdWxlLCBQYXJzZWQpDQoJbG9jYWwgRmlsZVBhdGggPSBzZWxmOldyaXRlRHVtcChPdXRwdXQpDQoJDQoJcmV0dXJuIEZpbGVQYXRoDQplbmQNCg0KcmV0dXJuIEdlbmVyYXRpb24NCg==]]
},Communication={'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBNb2R1bGUgPSB7DQogICAgQ29tbUNhbGxiYWNrcyA9IHt9DQp9DQoNCmxvY2FsIENvbW1XcmFwcGVyID0ge30NCkNvbW1XcmFwcGVyLl9faW5kZXggPSBDb21tV3JhcHBlcg0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBDb3JlR3VpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBQcm9jZXNzDQoNCmZ1bmN0aW9uIE1vZHVsZTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KICAgIGxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIFByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCiAgICBDb3JlR3VpID0gU2VydmljZXMuQ29yZUd1aQ0KZW5kDQoNCmZ1bmN0aW9uIENvbW1XcmFwcGVyOkZpcmUoLi4uKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KICAgIHRhYmxlLmluc2VydChRdWV1ZSwgey4uLn0pDQplbmQNCg0KZnVuY3Rpb24gQ29tbVdyYXBwZXI6UHJvY2Vzc0FyZ3VtZW50cyhBcmd1bWVudHMpIA0KICAgIGxvY2FsIENoYW5uZWwgPSBzZWxmLkNoYW5uZWwNCiAgICBDaGFubmVsOkZpcmUoUHJvY2VzczpVbnBhY2soQXJndW1lbnRzKSkNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpQcm9jZXNzUXVldWUoKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KDQogICAgZm9yIEluZGV4ID0gMSwgI1F1ZXVlIGRvDQogICAgICAgIGxvY2FsIEFyZ3VtZW50cyA9IHRhYmxlLnJlbW92ZShRdWV1ZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc2VsZjpQcm9jZXNzQXJndW1lbnRzKEFyZ3VtZW50cykgDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpCZWdpblF1ZXVlU2VydmljZSgpDQogICAgY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB3YWl0KCkgZG8NCiAgICAgICAgICAgIHNlbGY6UHJvY2Vzc1F1ZXVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk5ld0NvbW1XcmFwKENoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQogICAgbG9jYWwgQmFzZSA9IHsNCiAgICAgICAgUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCiAgICAgICAgQ2hhbm5lbCA9IENoYW5uZWwsDQogICAgICAgIEV2ZW50ID0gQ2hhbm5lbC5FdmVudA0KICAgIH0NCg0KICAgIC0tLy8gQ3JlYXRlIG5ldyB3cmFwcGVyIGNsYXNzDQogICAgbG9jYWwgV3JhcHBlZCA9IHNldG1ldGF0YWJsZShCYXNlLCBDb21tV3JhcHBlcikNCiAgICBXcmFwcGVkOkJlZ2luUXVldWVTZXJ2aWNlKCkNCg0KICAgIHJldHVybiBXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpOiBCaW5kYWJsZUZ1bmN0aW9uDQogICAgLS0vLyBVc2luZyBCaW5kYWJsZUZ1bmN0aW9uIGFzIGl0IGRvZXMgbm90IHJlcXVpcmUgYSB0aHJlYWQgcGVybWlzc2lvbiBjaGFuZ2UNCiAgICBsb2NhbCBSZW1vdGUgPSBJbnN0YW5jZS5uZXcoIkJpbmRhYmxlRnVuY3Rpb24iKQ0KICAgIGZ1bmN0aW9uIFJlbW90ZS5Pbkludm9rZShPYmplY3Q6IEluc3RhbmNlKTogc3RyaW5nDQogICAgICAgIHJldHVybiBPYmplY3Q6R2V0RGVidWdJZCgpDQogICAgZW5kDQoNCiAgICBzZWxmLkRlYnVnSWRSZW1vdGUgPSBSZW1vdGUNCiAgICBzZWxmLkRlYnVnSWRJbnZva2UgPSBSZW1vdGUuSW52b2tlDQoNCiAgICByZXR1cm4gUmVtb3RlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldERlYnVnSWQoT2JqZWN0OiBJbnN0YW5jZSk6IHN0cmluZw0KICAgIGxvY2FsIEludm9rZSA9IHNlbGYuRGVidWdJZEludm9rZQ0KICAgIGxvY2FsIFJlbW90ZSA9IHNlbGYuRGVidWdJZFJlbW90ZQ0KCXJldHVybiBJbnZva2UoUmVtb3RlLCBPYmplY3QpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEhpZGRlblBhcmVudCgpOiBJbnN0YW5jZQ0KICAgIC0tLy8gVXNlIGdldGh1aSBpZiBpdCBleGlzdHMNCiAgICBpZiBnZXRodWkgdGhlbiByZXR1cm4gZ2V0aHVpKCkgZW5kDQogICAgcmV0dXJuIENvcmVHdWkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ29tbUNoYW5uZWwoKTogKG51bWJlciwgQmluZGFibGVFdmVudCkNCiAgICAtLS8vIFVzZSBuYXRpdmUgaWYgaXQgZXhpc3RzDQogICAgbG9jYWwgRm9yY2UgPSBDb25maWcuRm9yY2VVc2VDdXN0b21Db21tDQogICAgaWYgY3JlYXRlX2NvbW1fY2hhbm5lbCBhbmQgbm90IEZvcmNlIHRoZW4NCiAgICAgICAgcmV0dXJuIGNyZWF0ZV9jb21tX2NoYW5uZWwoKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWxJZCA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDAwKQ0KDQogICAgLS0vLyBCaW5kYWJsZUV2ZW50DQogICAgbG9jYWwgQ2hhbm5lbCA9IEluc3RhbmNlLm5ldygiQmluZGFibGVFdmVudCIsIFBhcmVudCkNCiAgICBDaGFubmVsLk5hbWUgPSBDaGFubmVsSWQNCg0KICAgIHJldHVybiBDaGFubmVsSWQsIENoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkOiBudW1iZXIpOiBCaW5kYWJsZUV2ZW50Pw0KICAgIC0tLy8gVXNlIG5hdGl2ZSBpZiBpdCBleGlzdHMNCiAgICBsb2NhbCBGb3JjZSA9IENvbmZpZy5Gb3JjZVVzZUN1c3RvbUNvbW0NCiAgICBpZiBnZXRfY29tbV9jaGFubmVsIGFuZCBub3QgRm9yY2UgdGhlbg0KICAgICAgICBsb2NhbCBDaGFubmVsID0gZ2V0X2NvbW1fY2hhbm5lbChDaGFubmVsSWQpDQogICAgICAgIHJldHVybiBDaGFubmVsLCBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWwgPSBQYXJlbnQ6RmluZEZpcnN0Q2hpbGQoQ2hhbm5lbElkKQ0KDQogICAgLS0vLyBXcmFwIHRoZSBjaGFubmVsIChQcmV2ZW50cyB0aHJlYWQgcGVybWlzc2lvbiBlcnJvcnMpDQogICAgbG9jYWwgV3JhcHBlZCA9IHNlbGY6TmV3Q29tbVdyYXAoQ2hhbm5lbCkNCiAgICByZXR1cm4gV3JhcHBlZCwgdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGVja1ZhbHVlKFZhbHVlLCBJbmJvdW5kOiBib29sZWFuPykNCiAgICAgLS0vLyBObyBzZXJpYWxpemluZyAgbmVlZGVkDQogICAgaWYgdHlwZW9mKFZhbHVlKSB+PSAidGFibGUiIHRoZW4gDQogICAgICAgIHJldHVybiBWYWx1ZSANCiAgICBlbmQNCiAgIA0KICAgIC0tLy8gRGVzZXJpYWxpemUNCiAgICBpZiBJbmJvdW5kIHRoZW4NCiAgICAgICAgcmV0dXJuIHNlbGY6RGVzZXJpYWxpemVUYWJsZShWYWx1ZSkNCiAgICBlbmQNCg0KICAgIC0tLy8gU2VyaWFsaXplDQogICAgcmV0dXJuIHNlbGY6U2VyaWFsaXplVGFibGUoVmFsdWUpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VQYWNrZXQoSW5kZXgsIFZhbHVlKTogdGFibGUNCiAgICByZXR1cm4gew0KICAgICAgICBJbmRleCA9IHNlbGY6Q2hlY2tWYWx1ZShJbmRleCksIA0KICAgICAgICBWYWx1ZSA9IHNlbGY6Q2hlY2tWYWx1ZShWYWx1ZSkNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlJlYWRQYWNrZXQoUGFja2V0OiB0YWJsZSk6IChhbnksIGFueSkNCiAgICBsb2NhbCBLZXkgPSBzZWxmOkNoZWNrVmFsdWUoUGFja2V0LkluZGV4LCB0cnVlKQ0KICAgIGxvY2FsIFZhbHVlID0gc2VsZjpDaGVja1ZhbHVlKFBhY2tldC5WYWx1ZSwgdHJ1ZSkNCiAgICByZXR1cm4gS2V5LCBWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXJpYWxpemVUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KICAgIGxvY2FsIFNlcmlhbGl6ZWQgPSB7fQ0KICAgIGZvciBJbmRleCwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgbG9jYWwgUGFja2V0ID0gc2VsZjpNYWtlUGFja2V0KEluZGV4LCBWYWx1ZSkNCiAgICAgICAgdGFibGUuaW5zZXJ0KFNlcmlhbGl6ZWQsIFBhY2tldCkNCiAgICBlbmQNCiAgICByZXR1cm4gU2VyaWFsaXplZA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpEZXNlcmlhbGl6ZVRhYmxlKFNlcmlhbGl6ZWQ6IHRhYmxlKTogdGFibGUNCiAgICBsb2NhbCBUYWJsZSA9IHt9DQogICAgZm9yIF8sIFBhY2tldCBpbiBuZXh0LCBTZXJpYWxpemVkIGRvDQogICAgICAgIGxvY2FsIEluZGV4LCBWYWx1ZSA9IHNlbGY6UmVhZFBhY2tldChQYWNrZXQpDQogICAgICAgIGlmIG5vdCBJbmRleCB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIFRhYmxlW0luZGV4XSA9IFZhbHVlDQogICAgZW5kDQogICAgcmV0dXJuIFRhYmxlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogbnVtYmVyKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOldhcm4oLi4uKQ0KICAgIHNlbGY6Q29tbXVuaWNhdGUoIldhcm4iLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlF1ZXVlTG9nKERhdGEpDQogICAgc2VsZjpDb21tdW5pY2F0ZSgiUXVldWVMb2ciLCBEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb21tQ2FsbGJhY2soVHlwZTogc3RyaW5nLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICBDb21tQ2FsbGJhY2tzW1R5cGVdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNhbGxiYWNrKFR5cGU6IHN0cmluZyk6ICguLi5hbnkpIC0+IC4uLmFueQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICByZXR1cm4gQ29tbUNhbGxiYWNrc1tUeXBlXQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgUHJvcGVydHk6IHN0cmluZykNCiAgICBpZiB0eXBlb2YoQ2hhbm5lbCkgPT0gIkluc3RhbmNlIiB0aGVuDQogICAgICAgIHJldHVybiBIb29rOkluZGV4KENoYW5uZWwsIFByb3BlcnR5KQ0KICAgIGVuZA0KDQogICAgLS0vLyBTb21lIGV4ZWN1dG9ycyByZXR1cm4gYSBVc2VyRGF0YSB0eXBlDQogICAgcmV0dXJuIENoYW5uZWxbUHJvcGVydHldDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbW11bmljYXRlKC4uLikNCiAgICBsb2NhbCBGaXJlID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkZpcmUiKQ0KICAgIEZpcmUoQ2hhbm5lbCwgLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb25uZWN0aW9uKENhbGxiYWNrKTogUkJYU2NyaXB0Q29ubmVjdGlvbg0KICAgIGxvY2FsIEV2ZW50ID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkV2ZW50IikNCiAgICByZXR1cm4gRXZlbnQ6Q29ubmVjdChDYWxsYmFjaykNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrKFR5cGU6IHN0cmluZywgQ2FsbGJhY2spOiBSQlhTY3JpcHRDb25uZWN0aW9uDQogICAgbG9jYWwgRXZlbnQgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRXZlbnQiKQ0KICAgIHJldHVybiBFdmVudDpDb25uZWN0KGZ1bmN0aW9uKFJlY2l2ZWRUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgaWYgUmVjaXZlZFR5cGUgfj0gVHlwZSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgQ2FsbGJhY2soLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrcyhUeXBlczogdGFibGUpDQogICAgZm9yIFR5cGU6IHN0cmluZywgQ2FsbGJhY2sgaW4gbmV4dCwgVHlwZXMgZG8NCiAgICAgICAgc2VsZjpBZGRUeXBlQ2FsbGJhY2soVHlwZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQ6IEJpbmRhYmxlRXZlbnQpDQogICAgc2VsZjpBZGRDb21tQ2FsbGJhY2soIldhcm4iLCBmdW5jdGlvbiguLi4pDQogICAgICAgIHdhcm4oLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ2hhbm5lbCgpOiBudW1iZXINCiAgICBsb2NhbCBDaGFubmVsSUQsIEV2ZW50ID0gc2VsZjpDcmVhdGVDb21tQ2hhbm5lbCgpDQoNCiAgICAtLS8vIENvbm5lY3QgR2V0Q29tbUNhbGxiYWNrIGZ1bmN0aW9uDQogICAgRXZlbnQuRXZlbnQ6Q29ubmVjdChmdW5jdGlvbihUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgbG9jYWwgQ2FsbGJhY2sgPSBzZWxmOkdldENvbW1DYWxsYmFjayhUeXBlKQ0KICAgICAgICBpZiBDYWxsYmFjayB0aGVuDQogICAgICAgICAgICBDYWxsYmFjayguLi4pDQogICAgICAgIGVuZA0KICAgIGVuZCkNCg0KICAgIC0tLy8gQWRkIGRlZmF1bHQgY29tbXVuaWNhdGlvbiBjYWxsYmFja3MNCiAgICBzZWxmOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQpDQoNCiAgICByZXR1cm4gQ2hhbm5lbElELCBFdmVudA0KZW5kDQoNCk1vZHVsZTpNYWtlRGVidWdJZEhhbmRsZXIoKQ0KDQpyZXR1cm4gTW9kdWxl]]
}},d.Players local h=e:LoadLibraries(f)local i,j,k,l,m,n,o=h.Process,h.Hook,h.Ui
,h.Generation,h.Communication,h.Config,e:GetAsset('ProggyClean.ttf',true)local p
=e:CreateFont('ProggyClean',o)k:SetFontFile(p)i:CheckConfig(n)e:LoadModules(h,{
Modules=h,Services=d})local q,r=k:CreateMainWindow(),i:CheckIsSupported()if not
r then q:Close()return end local s=m:CreateChannel()m:AddCommCallback('QueueLog'
,function(...)k:QueueLog(...)end)local t=g.LocalPlayer l:SetSwapsCallback(
function(u)u:AddSwap(t,{String='LocalPlayer'})u:AddSwap(t.Character,{String=
'Character',NextParent=t})end)k:CreateWindowContent(q)k:BeginLogService()local u
=e:MakeActorScript(f,s)j:LoadHooks(u,s)
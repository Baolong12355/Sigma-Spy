--[[
	⣿⣿⣿⣿⣿ SIGMA SPY ⣿⣿⣿⣿⣿
	⣿⣿⣯⡉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉
	⠉⠻⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠈⠻⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠙⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠀⠀⣉⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⣠⣾⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⢀⣴⣿⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣀⣴⣿⣿⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣿⣿⣟⣁⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀
	⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿

	@author depso (depthso)
	@repo https://github.com/depthso
	@license MIT
	@description Sigma Remote Spy for Roblox
    
	This file is COMPILED, check /src folder for the source
	Build scripts are available in /build
]]

local a,b={UseWorkspace=false,NoActors=false,FolderName='Sigma Spy',RepoUrl=
[[https://raw.githubusercontent.com/depthso/Sigma-Spy/refs/heads/main]],
ParserUrl=
[[https://raw.githubusercontent.com/depthso/Roblox-parser/refs/heads/main/dist/Main.luau]]
},{...}local c=b[1]if typeof(c)=='table'then for d,e in c do a[d]=e end end
local d=setmetatable({},{__index=function(d,e)local f=game:GetService(e)return
cloneref(f)end})local e=(function()local e,f={UseWorkspace=false,Folder=
'Sigma spy',RepoUrl=nil,FolderStructure={['Sigma Spy']={'assets'}}}function e:
Init(g)local h,i=self.FolderStructure,g.Services f=i.HttpService self:
CheckFolders(h)end function e:PushConfig(g)for h,i in next,g do self[h]=i end
end function e:UrlFetch(g)local h={Url=g:gsub(' ','%%20'),Method='GET'}local i,j
=pcall(request,h)if not i then warn'[!] HTTP request error! Check console (F9)'
warn('> Url:',g)error(j)return''end local k,l=j.Body,j.StatusCode if l==404 then
warn'[!] The file requested has moved or been deleted.'warn(' >',g)return''end
return k,j end function e:MakePath(g)local h=self.Folder return`{h}/{g}`end
function e:LoadCustomasset(g)if not getcustomasset then return end if not g then
return end local h=readfile(g)if#h<=0 then return end local i,j=pcall(
getcustomasset,g)if not i then return end if not j or#j<=0 then return end
return j end function e:GetFile(g,h)local i,j,k,l=self.RepoUrl,self.UseWorkspace
,self:MakePath(g),''if j then l=readfile(k)else l=self:UrlFetch(`{i}/{g}`)end if
h then self:FileCheck(k,function()return l end)return self:LoadCustomasset(k)end
return l end function e:GetTemplate(g)return self:GetFile(`templates/{g}.lua`)
end function e:FileCheck(g,h)if isfile(g)then return end local i=h()writefile(g,
i)end function e:FolderCheck(g)if isfolder(g)then return end makefolder(g)end
function e:CheckPath(g,h)return g and`{g}/{h}`or h end function e:CheckFolders(g
,h)for i,j in next,g do if typeof(j)=='table'then local k=self:CheckPath(h,i)
self:FolderCheck(k)self:CheckFolders(j,k)continue end local k=self:CheckPath(h,j
)self:FolderCheck(k)end end function e:TemplateCheck(g,h)self:FileCheck(g,
function()return self:GetTemplate(h)end)end function e:GetAsset(g,h)return self:
GetFile(`assets/{g}`,h)end function e:GetModule(g,h)local i=`{g}.lua`if h then
self:TemplateCheck(i,h)return readfile(i)end return self:GetFile(i)end function
e:LoadLibraries(g,...)local h={}for i,j in next,g do local k=typeof(j)=='table'
and j[1]=='base64'j=k and j[2]or j if typeof(j)~='string'and not k then h[i]=j
continue end if k then j=crypt.base64decode(j)g[i]=j end local l,m=loadstring(j,
i)assert(l,`Failed to load {i}: {m}`)h[i]=l(...)end return h end function e:
LoadModules(g,h)for i,j in next,g do local k=j.Init if not k then continue end j
:Init(h)end end function e:CreateFont(g,h)if not h then return end local i=`assets/{
g}.json`local j,k=self:MakePath(i),{name=g,faces={{name='Regular',weight=400,
style='Normal',assetId=h}}}local l=f:JSONEncode(k)writefile(j,l)return j end
function e:CompileModule(g)local h='local Libraries = {'for i,j in g do if
typeof(j)~='string'then continue end h..=`\t{i} = (function()\n{j}\nend)(),\n`
end h..='}'return h end function e:MakeActorScript(g,h)local i=e:CompileModule(g
)i..='\r\n\tlocal ExtraData = {\r\n\t\tIsActor = true\r\n\t}\r\n\t'i..=`Libraries.Hook:BeginService(Libraries, ExtraData, {
h})`return i end return e end)()e:PushConfig(a)e:Init{Services=d}local f=e.
FolderName local g,h={Config=e:GetModule(`{f}/Config`,'Config'),ReturnSpoofs=e:
GetModule(`{f}/Return spoofs`,'Return Spoofs'),Configuration=a,Files=e,Process={
'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KICAgIE5vQmFja3RyYWNlOiBib29sZWFuPywNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCUFyZ3M6IHRhYmxlLA0KICAgIElkOiBzdHJpbmcsDQoJTWV0aG9kOiBzdHJpbmcsDQogICAgVHJhbnNmZXJUeXBlOiBzdHJpbmcsDQoJVmFsdWVSZXBsYWNlbWVudHM6IHRhYmxlLA0KICAgIFJldHVyblZhbHVlczogdGFibGUsDQogICAgT3JpZ2luYWxGdW5jOiAoSW5zdGFuY2UsIC4uLmFueSkgLT4gLi4uYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBQcm9jZXNzID0gew0KICAgIC0tLy8gUmVtb3RlIGNsYXNzZXMNCiAgICBSZW1vdGVDbGFzc0RhdGEgPSB7DQogICAgICAgIFsiUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJSZW1vdGVGdW5jdGlvbiJdID0gew0KICAgICAgICAgICAgSXNSZW1vdGVGdW5jdGlvbiA9IHRydWUsDQogICAgICAgICAgICBTZW5kID0gew0KICAgICAgICAgICAgICAgICJJbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJpbnZva2VTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50SW52b2tlIiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJVbnJlbGlhYmxlUmVtb3RlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgICAgICJmaXJlU2VydmVyIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkNsaWVudEV2ZW50IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgWyJCaW5kYWJsZUV2ZW50Il0gPSB7DQogICAgICAgICAgICBOb1JlY2l2ZUhvb2sgPSB0cnVlLA0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiRXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIkJpbmRhYmxlRnVuY3Rpb24iXSA9IHsNCiAgICAgICAgICAgIElzUmVtb3RlRnVuY3Rpb24gPSB0cnVlLA0KICAgICAgICAgICAgTm9SZWNpdmVIb29rID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiT25JbnZva2UiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBSZW1vdGVPcHRpb25zID0ge30sDQogICAgTG9vcGluZ1JlbW90ZXMgPSB7fSwNCiAgICBDb25maWdPdmVyd3JpdGVzID0gew0KICAgICAgICBbeyJzaXJodXJ0IiwgInBvdGFzc2l1bSIsICJ3YXZlIn1dID0gew0KICAgICAgICAgICAgRm9yY2VVc2VDdXN0b21Db21tID0gdHJ1ZQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIEhvb2sNCmxvY2FsIENvbW11bmljYXRpb24NCmxvY2FsIFJldHVyblNwb29mcw0KbG9jYWwgVWkNCmxvY2FsIENvbmZpZw0KDQotLS8vIENvbW11bmljYXRpb24gY2hhbm5lbA0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ2hhbm5lbFdyYXBwZWQgPSBmYWxzZQ0KDQpsb2NhbCBTaWdtYUVOViA9IGdldGZlbnYoMSkNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGUpDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQogICAgLS0vLyBNb2R1bGVzDQogICAgQ29uZmlnID0gTW9kdWxlcy5Db25maWcNCiAgICBVaSA9IE1vZHVsZXMuVWkNCiAgICBIb29rID0gTW9kdWxlcy5Ib29rDQogICAgQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbg0KICAgIFJldHVyblNwb29mcyA9IE1vZHVsZXMuUmV0dXJuU3Bvb2ZzDQplbmQNCg0KLS0vLyBDb21tdW5pY2F0aW9uDQpmdW5jdGlvbiBQcm9jZXNzOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogQmluZGFibGVFdmVudCwgSXNXcmFwcGVkOiBib29sZWFuKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQogICAgQ2hhbm5lbFdyYXBwZWQgPSBJc1dyYXBwZWQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldENvbmZpZ092ZXJ3cml0ZXMoTmFtZTogc3RyaW5nKQ0KICAgIGxvY2FsIENvbmZpZ092ZXJ3cml0ZXMgPSBzZWxmLkNvbmZpZ092ZXJ3cml0ZXMNCg0KICAgIGZvciBMaXN0LCBPdmVyd3JpdGVzIGluIG5leHQsIENvbmZpZ092ZXJ3cml0ZXMgZG8NCiAgICAgICAgaWYgbm90IHRhYmxlLmZpbmQoTGlzdCwgTmFtZSkgdGhlbiBjb250aW51ZSBlbmQNCiAgICAgICAgcmV0dXJuIE92ZXJ3cml0ZXMNCiAgICBlbmQNCiAgICByZXR1cm4NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrQ29uZmlnKENvbmZpZzogdGFibGUpDQogICAgbG9jYWwgTmFtZSA9IGlkZW50aWZ5ZXhlY3V0b3IoKTpsb3dlcigpDQoNCiAgICAtLS8vIEZvcmNlIGNvbmZpZ3VyYXRpb24gb3ZlcndyaXRlcyBmb3Igc3BlY2lmaWMgZXhlY3V0b3JzDQogICAgbG9jYWwgT3ZlcndyaXRlcyA9IHNlbGY6R2V0Q29uZmlnT3ZlcndyaXRlcyhOYW1lKQ0KICAgIGlmIG5vdCBPdmVyd3JpdGVzIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgTWVyZ2UoQ29uZmlnLCBPdmVyd3JpdGVzKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2xlYW5DRXJyb3IoRXJyb3I6IHN0cmluZyk6IHN0cmluZw0KICAgIEVycm9yID0gRXJyb3I6Z3N1YigiOiVkKzogIiwgIiIpDQogICAgRXJyb3IgPSBFcnJvcjpnc3ViKCIsIGdvdCAlYSsiLCAiIikNCiAgICBFcnJvciA9IEVycm9yOmdzdWIoImludmFsaWQgYXJndW1lbnQiLCAibWlzc2luZyBhcmd1bWVudCIpDQogICAgcmV0dXJuIEVycm9yDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDb3VudE1hdGNoZXMoU3RyaW5nOiBzdHJpbmcsIE1hdGNoOiBzdHJpbmcpOiBudW1iZXINCglsb2NhbCBDb3VudCA9IDANCglmb3IgXyBpbiBTdHJpbmc6Z21hdGNoKE1hdGNoKSBkbw0KCQlDb3VudCArPTEgDQoJZW5kDQoNCglyZXR1cm4gQ291bnQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKFRhYmxlLCBJZ25vcmU6IHRhYmxlPykNCglsb2NhbCBOZXcgPSB7fQ0KCWZvciBLZXksIFZhbHVlIGluIG5leHQsIFRhYmxlIGRvDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHZhbHVlIGlzIGlnbm9yZWQNCiAgICAgICAgaWYgSWdub3JlIGFuZCB0YWJsZS5maW5kKElnbm9yZSwgVmFsdWUpIHRoZW4gY29udGludWUgZW5kDQoNCgkJTmV3W0tleV0gPSB0eXBlb2YoVmFsdWUpID09ICJ0YWJsZSIgYW5kIHNlbGY6RGVlcENsb25lVGFibGUoVmFsdWUpIG9yIFZhbHVlDQoJZW5kDQoJcmV0dXJuIE5ldw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VW5wYWNrKFRhYmxlOiB0YWJsZSkNCglsb2NhbCBMZW5ndGggPSB0YWJsZS5tYXhuKFRhYmxlKQ0KCXJldHVybiB1bnBhY2soVGFibGUsIDEsIExlbmd0aCkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlB1c2hDb25maWcoT3ZlcndyaXRlcykNCiAgICBNZXJnZShzZWxmLCBPdmVyd3JpdGVzKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RnVuY0V4aXN0cyhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIGdldGZlbnYoMSlbTmFtZV0NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrRXhlY3V0b3IoKTogYm9vbGVhbg0KICAgIGxvY2FsIEJsYWNrbGlzdGVkID0gew0KICAgICAgICAieGVubyIsDQogICAgICAgICJzb2xhcmEiLA0KICAgICAgICAiampzcGxvaXQiDQogICAgfQ0KDQogICAgbG9jYWwgTmFtZSA9IGlkZW50aWZ5ZXhlY3V0b3IoKTpsb3dlcigpDQogICAgbG9jYWwgSXNCbGFja2xpc3RlZCA9IHRhYmxlLmZpbmQoQmxhY2tsaXN0ZWQsIE5hbWUpDQoNCiAgICAtLS8vIFNvbWUgZXhlY3V0b3JzIGhhdmUgYnJva2VuIGZ1bmN0aW9uYWxpdHkNCiAgICBpZiBJc0JsYWNrbGlzdGVkIHRoZW4NCiAgICAgICAgVWk6U2hvd1Vuc3VwcG9ydGVkRXhlY3V0b3IoTmFtZSkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tGdW5jdGlvbnMoKTogYm9vbGVhbg0KICAgIGxvY2FsIENvcmVGdW5jdGlvbnMgPSB7DQogICAgICAgICJob29rbWV0YW1ldGhvZCIsDQogICAgICAgICJob29rZnVuY3Rpb24iLA0KICAgICAgICAiZ2V0cmF3bWV0YXRhYmxlIiwNCiAgICAgICAgInNldHJlYWRvbmx5Ig0KICAgIH0NCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGZ1bmN0aW9ucyBleGlzdCBpbiB0aGUgRU5WDQogICAgZm9yIF8sIE5hbWUgaW4gQ29yZUZ1bmN0aW9ucyBkbw0KICAgICAgICBsb2NhbCBGdW5jID0gc2VsZjpGdW5jRXhpc3RzKE5hbWUpDQogICAgICAgIGlmIEZ1bmMgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICAtLS8vIEZ1bmN0aW9uIG1pc3NpbmchDQogICAgICAgIFVpOlNob3dVbnN1cHBvcnRlZChOYW1lKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0lzU3VwcG9ydGVkKCk6IGJvb2xlYW4NCiAgICAtLS8vIENoZWNrIGlmIHRoZSBleGVjdXRvciBpcyBibGFja2xpc3RlZA0KICAgIGxvY2FsIEV4ZWN1dG9yU3VwcG9ydGVkID0gc2VsZjpDaGVja0V4ZWN1dG9yKCkNCiAgICBpZiBub3QgRXhlY3V0b3JTdXBwb3J0ZWQgdGhlbg0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGNvcmUgZnVuY3Rpb25zIGV4aXN0DQogICAgbG9jYWwgRnVuY3Rpb25zU3VwcG9ydGVkID0gc2VsZjpDaGVja0Z1bmN0aW9ucygpDQogICAgaWYgbm90IEZ1bmN0aW9uc1N1cHBvcnRlZCB0aGVuDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkdldENsYXNzRGF0YShSZW1vdGU6IEluc3RhbmNlKTogdGFibGU/DQogICAgbG9jYWwgUmVtb3RlQ2xhc3NEYXRhID0gc2VsZi5SZW1vdGVDbGFzc0RhdGENCiAgICBsb2NhbCBDbGFzc05hbWUgPSBIb29rOkluZGV4KFJlbW90ZSwgIkNsYXNzTmFtZSIpDQoNCiAgICByZXR1cm4gUmVtb3RlQ2xhc3NEYXRhW0NsYXNzTmFtZV0NCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOklzUHJvdGVjdGVkUmVtb3RlKFJlbW90ZTogSW5zdGFuY2UpOiBib29sZWFuDQogICAgbG9jYWwgSXNEZWJ1ZyA9IFJlbW90ZSA9PSBDb21tdW5pY2F0aW9uLkRlYnVnSWRSZW1vdGUNCiAgICBsb2NhbCBJc0NoYW5uZWwgPSBSZW1vdGUgPT0gKENoYW5uZWxXcmFwcGVkIGFuZCBDaGFubmVsLkNoYW5uZWwgb3IgQ2hhbm5lbCkNCg0KICAgIHJldHVybiBJc0RlYnVnIG9yIElzQ2hhbm5lbA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6UmVtb3RlQWxsb3dlZChSZW1vdGU6IEluc3RhbmNlLCBUcmFuc2ZlclR5cGU6IHN0cmluZywgTWV0aG9kOiBzdHJpbmc/KTogYm9vbGVhbj8NCiAgICBpZiB0eXBlb2YoUmVtb3RlKSB+PSAnSW5zdGFuY2UnIHRoZW4gcmV0dXJuIGVuZA0KICAgIA0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIFJlbW90ZSBpcyBwcm90ZWN0ZWQNCiAgICBpZiBzZWxmOklzUHJvdGVjdGVkUmVtb3RlKFJlbW90ZSkgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIEZldGNoIGNsYXNzIHRhYmxlDQoJbG9jYWwgQ2xhc3NEYXRhID0gc2VsZjpHZXRDbGFzc0RhdGEoUmVtb3RlKQ0KCWlmIG5vdCBDbGFzc0RhdGEgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSB0cmFuc2ZlciB0eXBlIGhhcyBkYXRhDQoJbG9jYWwgQWxsb3dlZCA9IENsYXNzRGF0YVtUcmFuc2ZlclR5cGVdDQoJaWYgbm90IEFsbG93ZWQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBtZXRob2QgaXMgYWxsb3dlZA0KCWlmIE1ldGhvZCB0aGVuDQoJCXJldHVybiB0YWJsZS5maW5kKEFsbG93ZWQsIE1ldGhvZCkgfj0gbmlsDQoJZW5kDQoNCglyZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0RXh0cmFEYXRhKERhdGE6IHRhYmxlKQ0KICAgIGlmIG5vdCBEYXRhIHRoZW4gcmV0dXJuIGVuZA0KICAgIHNlbGYuRXh0cmFEYXRhID0gRGF0YQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0UmVtb3RlU3Bvb2YoUmVtb3RlOiBJbnN0YW5jZSwgTWV0aG9kOiBzdHJpbmcsIC4uLik6IHRhYmxlPw0KICAgIGxvY2FsIFNwb29mID0gUmV0dXJuU3Bvb2ZzW1JlbW90ZV0NCg0KICAgIGlmIG5vdCBTcG9vZiB0aGVuIHJldHVybiBlbmQNCiAgICBpZiBTcG9vZi5NZXRob2Qgfj0gTWV0aG9kIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gU3Bvb2YuUmV0dXJuDQoNCiAgICAtLS8vIENhbGwgdGhlIFJldHVyblZhbHVlcyBmdW5jdGlvbiB0eXBlDQogICAgaWYgdHlwZW9mKFJldHVyblZhbHVlcykgPT0gImZ1bmN0aW9uIiB0aGVuDQogICAgICAgIFJldHVyblZhbHVlcyA9IFJldHVyblZhbHVlcyguLi4pDQogICAgZW5kDQoNCglyZXR1cm4gUmV0dXJuVmFsdWVzDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpTZXROZXdSZXR1cm5TcG9vZnMoTmV3UmV0dXJuU3Bvb2ZzOiB0YWJsZSkNCiAgICBSZXR1cm5TcG9vZnMgPSBOZXdSZXR1cm5TcG9vZnMNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkZpbmRDYWxsaW5nTENsb3N1cmUoT2Zmc2V0OiBudW1iZXIpDQogICAgT2Zmc2V0ICs9IDENCg0KICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgT2Zmc2V0ICs9IDENCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSBzdGFjayBsZXZlbCBpcyB2YWxpZA0KICAgICAgICBsb2NhbCBJc1ZhbGlkID0gZGVidWcuaW5mbyhPZmZzZXQsICJsIikgfj0gLTENCiAgICAgICAgaWYgbm90IElzVmFsaWQgdGhlbiBjb250aW51ZSBlbmQNCg0KICAgICAgICAtLS8vIENoZWNrIGlmIHRoZSBmdW5jdGlvbiBpcyB2YWxpZA0KICAgICAgICBsb2NhbCBGdW5jdGlvbiA9IGRlYnVnLmluZm8oT2Zmc2V0LCAiZiIpDQogICAgICAgIGlmIG5vdCBGdW5jdGlvbiB0aGVuIHJldHVybiBlbmQNCg0KICAgICAgICByZXR1cm4gRnVuY3Rpb24NCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNhbGxiYWNrKERhdGE6IFJlbW90ZURhdGEsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCiAgICBsb2NhbCBPcmlnaW5hbEZ1bmMgPSBEYXRhLk9yaWdpbmFsRnVuYw0KICAgIGxvY2FsIElkID0gRGF0YS5JZA0KICAgIGxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQogICAgbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCg0KICAgIGxvY2FsIFJlbW90ZURhdGEgPSBzZWxmOkdldFJlbW90ZURhdGEoSWQpDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBSZW1vdGUgaXMgQmxvY2tlZA0KICAgIGlmIFJlbW90ZURhdGEuQmxvY2tlZCB0aGVuIHJldHVybiB7fSBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgZm9yIGEgc3Bvb2YNCiAgICBsb2NhbCBTcG9vZiA9IHNlbGY6R2V0UmVtb3RlU3Bvb2YoUmVtb3RlLCBNZXRob2QsIE9yaWdpbmFsRnVuYywgLi4uKQ0KICAgIGlmIFNwb29mIHRoZW4gcmV0dXJuIFNwb29mIGVuZA0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgb3JpZ25hbCBmdW5jdGlvbiB3YXMgcGFzc2VkDQogICAgaWYgbm90IE9yaWdpbmFsRnVuYyB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gSW52b2tlIG9yaWduYWwgZnVuY3Rpb24NCiAgICByZXR1cm4gew0KICAgICAgICBPcmlnaW5hbEZ1bmMoUmVtb3RlLCAuLi4pDQogICAgfQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RGVjb21waWxlKFNjcmlwdDogTG9jYWxTY3JpcHQgfCBNb2R1bGVTY3JpcHQpOiBzdHJpbmcNCiAgICBsb2NhbCBLb25zdGFudEFQSSA9ICJodHRwOi8vYXBpLnBsdXNnaWFudDUuY29tL2tvbnN0YW50L2RlY29tcGlsZSINCiAgICBsb2NhbCBGb3JjZUtvbnN0YW50ID0gQ29uZmlnLkZvcmNlS29uc3RhbnREZWNvbXBpbGVyDQoNCiAgICAtLS8vIFVzZSBidWlsdC1pbiBkZWNvbXBpbGVyIGlmIHRoZSBleGVjdXRvciBzdXBwb3J0cyBpdA0KICAgIGlmIGRlY29tcGlsZSBhbmQgbm90IEZvcmNlS29uc3RhbnQgdGhlbiANCiAgICAgICAgcmV0dXJuIGRlY29tcGlsZShTY3JpcHQpDQogICAgZW5kDQoNCiAgICAtLS8vIGdldHNjcmlwdGJ5dGVjb2RlDQogICAgbG9jYWwgU3VjY2VzcywgQnl0ZWNvZGUgPSBwY2FsbChnZXRzY3JpcHRieXRlY29kZSwgU2NyaXB0KQ0KICAgIGlmIG5vdCBTdWNjZXNzIHRoZW4NCiAgICAgICAgbG9jYWwgRXJyb3IgPSBgLS1GYWlsZWQgdG8gZ2V0IHNjcmlwdCBieXRlY29kZSwgZXJyb3I6XG5gDQogICAgICAgIEVycm9yIC4uPSBgXG4tLVtbXG57Qnl0ZWNvZGV9XG5dXWANCiAgICAgICAgcmV0dXJuIEVycm9yLCB0cnVlDQogICAgZW5kDQogICAgDQogICAgLS0vLyBTZW5kIFBPU1QgcmVxdWVzdCB0byB0aGUgQVBJDQogICAgbG9jYWwgUmVzcG9uY2UgPSByZXF1ZXN0KHsNCiAgICAgICAgVXJsID0gS29uc3RhbnRBUEksDQogICAgICAgIEJvZHkgPSBCeXRlY29kZSwNCiAgICAgICAgTWV0aG9kID0gIlBPU1QiLA0KICAgICAgICBIZWFkZXJzID0gew0KICAgICAgICAgICAgWyJDb250ZW50LVR5cGUiXSA9ICJ0ZXh0L3BsYWluIg0KICAgICAgICB9LA0KICAgIH0pDQoNCiAgICAtLS8vIEVycm9yIGNoZWNrDQogICAgaWYgUmVzcG9uY2UuU3RhdHVzQ29kZSB+PSAyMDAgdGhlbg0KICAgICAgICBsb2NhbCBFcnJvciA9IGAtLVtLT05TVEFOVF0gRXJyb3Igb2NjdXJlZCB3aGlsZSByZXF1ZXN0aW5nIHRoZSBBUEksIGVycm9yOlxuYA0KICAgICAgICBFcnJvciAuLj0gYFxuLS1bW1xue1Jlc3BvbmNlLkJvZHl9XG5dXWANCiAgICAgICAgcmV0dXJuIEVycm9yLCB0cnVlDQogICAgZW5kDQoNCiAgICByZXR1cm4gUmVzcG9uY2UuQm9keQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0U2NyaXB0RnJvbUZ1bmMoRnVuYzogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGlmIG5vdCBGdW5jIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgbG9jYWwgU3VjY2VzcywgRU5WID0gcGNhbGwoZ2V0ZmVudiwgRnVuYykNCiAgICBpZiBub3QgU3VjY2VzcyB0aGVuIHJldHVybiBlbmQNCiAgICANCiAgICAtLS8vIEJsYWNrbGlzdCBzaWdtYSBzcHkNCiAgICBpZiBzZWxmOklzU2lnbWFTcHlFTlYoRU5WKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIHJldHVybiByYXdnZXQoRU5WLCAic2NyaXB0IikNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNvbm5lY3Rpb25Jc1ZhbGlkKENvbm5lY3Rpb246IHRhYmxlKTogYm9vbGVhbg0KICAgIGxvY2FsIFZhbHVlUmVwbGFjZW1lbnRzID0gew0KCQlbIlNjcmlwdCJdID0gZnVuY3Rpb24oQ29ubmVjdGlvbjogdGFibGUpOiBTY3JpcHQ/DQoJCQlsb2NhbCBGdW5jdGlvbiA9IENvbm5lY3Rpb24uRnVuY3Rpb24NCgkJCWlmIG5vdCBGdW5jdGlvbiB0aGVuIHJldHVybiBlbmQNCg0KCQkJcmV0dXJuIHNlbGY6R2V0U2NyaXB0RnJvbUZ1bmMoRnVuY3Rpb24pDQoJCWVuZA0KCX0NCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlc2UgcHJvcGVydGllcyBhcmUgdmFsaWQNCiAgICBsb2NhbCBUb0NoZWNrID0gew0KICAgICAgICAiU2NyaXB0Ig0KICAgIH0NCiAgICBmb3IgXywgUHJvcGVydHkgaW4gVG9DaGVjayBkbw0KICAgICAgICBsb2NhbCBSZXBsYWNlbWVudCA9IFZhbHVlUmVwbGFjZW1lbnRzW1Byb3BlcnR5XQ0KICAgICAgICBsb2NhbCBWYWx1ZQ0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlcmUncyBhIGZ1bmN0aW9uIGZvciBhIHByb3BlcnR5DQogICAgICAgIGlmIFJlcGxhY2VtZW50IHRoZW4NCiAgICAgICAgICAgIFZhbHVlID0gUmVwbGFjZW1lbnQoQ29ubmVjdGlvbikNCiAgICAgICAgZW5kDQoNCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgcHJvcGVydHkgaGFzIGEgdmFsdWUNCiAgICAgICAgaWYgVmFsdWUgPT0gbmlsIHRoZW4gDQogICAgICAgICAgICByZXR1cm4gZmFsc2UgDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkZpbHRlckNvbm5lY3Rpb25zKFNpZ25hbDogUkJYU2NyaXB0U2lnbmFsKTogdGFibGUNCiAgICBsb2NhbCBQcm9jZXNzZWQgPSB7fQ0KDQogICAgLS0vLyBGaWx0ZXIgZWFjaCBjb25uZWN0aW9uDQogICAgZm9yIF8sIENvbm5lY3Rpb24gaW4gZ2V0Y29ubmVjdGlvbnMoU2lnbmFsKSBkbw0KICAgICAgICBpZiBub3Qgc2VsZjpDb25uZWN0aW9uSXNWYWxpZChDb25uZWN0aW9uKSB0aGVuIGNvbnRpbnVlIGVuZA0KICAgICAgICB0YWJsZS5pbnNlcnQoUHJvY2Vzc2VkLCBDb25uZWN0aW9uKQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIFByb2Nlc3NlZA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6SXNTaWdtYVNweUVOVihFbnY6IHRhYmxlKTogYm9vbGVhbg0KICAgIHJldHVybiBFbnYgPT0gU2lnbWFFTlYNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlByb2Nlc3NSZW1vdGUoRGF0YTogUmVtb3RlRGF0YSwgLi4uKTogdGFibGU/DQogICAgLS0vLyBVbnBhY2sgRGF0YQ0KICAgIGxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBUcmFuc2ZlclR5cGUgPSBEYXRhLlRyYW5zZmVyVHlwZQ0KICAgIGxvY2FsIElzUmVjZWl2ZSA9IERhdGEuSXNSZWNlaXZlDQoNCgktLS8vIENoZWNrIGlmIHRoZSB0cmFuc2ZlcnR5cGUgbWV0aG9kIGlzIGFsbG93ZWQNCglpZiBUcmFuc2ZlclR5cGUgYW5kIG5vdCBzZWxmOlJlbW90ZUFsbG93ZWQoUmVtb3RlLCBUcmFuc2ZlclR5cGUsIE1ldGhvZCkgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIEZldGNoIGRldGFpbHMNCiAgICBsb2NhbCBJZCA9IENvbW11bmljYXRpb246R2V0RGVidWdJZChSZW1vdGUpDQogICAgbG9jYWwgQ2xhc3NEYXRhID0gc2VsZjpHZXRDbGFzc0RhdGEoUmVtb3RlKQ0KICAgIGxvY2FsIFRpbWVzdGFtcCA9IHRpY2soKQ0KDQogICAgbG9jYWwgQ2FsbGluZ0Z1bmN0aW9uDQogICAgbG9jYWwgU291cmNlU2NyaXB0DQoNCiAgICAtLS8vIEFkZCBleHRyYSBkYXRhIGludG8gdGhlIGxvZyBpZiBuZWVkZWQNCiAgICBsb2NhbCBFeHRyYURhdGEgPSBzZWxmLkV4dHJhRGF0YQ0KICAgIGlmIEV4dHJhRGF0YSB0aGVuDQogICAgICAgIE1lcmdlKERhdGEsIEV4dHJhRGF0YSkNCiAgICBlbmQNCg0KICAgIC0tLy8gR2V0IGNhbGxlciBpbmZvcm1hdGlvbg0KICAgIGlmIG5vdCBJc1JlY2VpdmUgdGhlbg0KICAgICAgICBDYWxsaW5nRnVuY3Rpb24gPSBzZWxmOkZpbmRDYWxsaW5nTENsb3N1cmUoMHg2KQ0KICAgICAgICBTb3VyY2VTY3JpcHQgPSBDYWxsaW5nRnVuY3Rpb24gYW5kIHNlbGY6R2V0U2NyaXB0RnJvbUZ1bmMoQ2FsbGluZ0Z1bmN0aW9uKSBvciBuaWwNCiAgICBlbmQNCg0KICAgIC0tLy8gQWRkIHRvIHF1ZXVlDQogICAgTWVyZ2UoRGF0YSwgew0KCQlDYWxsaW5nU2NyaXB0ID0gZ2V0Y2FsbGluZ3NjcmlwdCgpLA0KICAgICAgICBTb3VyY2VTY3JpcHQgPSBTb3VyY2VTY3JpcHQsDQoJCUNhbGxpbmdGdW5jdGlvbiA9IENhbGxpbmdGdW5jdGlvbiwNCiAgICAgICAgSWQgPSBJZCwNCgkJQ2xhc3NEYXRhID0gQ2xhc3NEYXRhLA0KICAgICAgICBUaW1lc3RhbXAgPSBUaW1lc3RhbXAsDQogICAgICAgIEFyZ3MgPSBDb21tdW5pY2F0aW9uOlNlcmlhbGl6ZVRhYmxlKHsuLi59KQ0KICAgIH0pDQoNCiAgICAtLS8vIEludm9rZSB0aGUgUmVtb3RlIGFuZCBsb2cgcmV0dXJuIHZhbHVlcw0KICAgIGxvY2FsIFJldHVyblZhbHVlcyA9IHNlbGY6Q2FsbGJhY2soRGF0YSwgLi4uKQ0KICAgIERhdGEuUmV0dXJuVmFsdWVzID0gUmV0dXJuVmFsdWVzDQoNCiAgICAtLS8vIFF1ZXVlIGxvZw0KICAgIENvbW11bmljYXRpb246UXVldWVMb2coRGF0YSkNCg0KICAgIHJldHVybiBSZXR1cm5WYWx1ZXMNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlNldEFsbFJlbW90ZURhdGEoS2V5OiBzdHJpbmcsIFZhbHVlKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCglmb3IgUmVtb3RlSUQsIERhdGEgaW4gbmV4dCwgUmVtb3RlT3B0aW9ucyBkbw0KCQlEYXRhW0tleV0gPSBWYWx1ZQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZDogc3RyaW5nKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCg0KICAgIC0tLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIHJlbW90ZSBkYXRhDQoJbG9jYWwgRXhpc3RpbmcgPSBSZW1vdGVPcHRpb25zW0lkXQ0KCWlmIEV4aXN0aW5nIHRoZW4gcmV0dXJuIEV4aXN0aW5nIGVuZA0KCQ0KICAgIC0tLy8gQmFzZSByZW1vdGUgZGF0YQ0KCWxvY2FsIERhdGEgPSB7DQoJCUV4Y2x1ZGVkID0gZmFsc2UsDQoJCUJsb2NrZWQgPSBmYWxzZQ0KCX0NCg0KCVJlbW90ZU9wdGlvbnNbSWRdID0gRGF0YQ0KCXJldHVybiBEYXRhDQplbmQNCg0KLS0vLyBUaGUgY29tbXVuaWNhdGlvbiBjcmVhdGVzIGEgZGlmZmVyZW50IHRhYmxlIGFkZHJlc3MNCi0tLy8gUmVjaXZlZCB0YWJsZXMgd2lsbCBub3QgYmUgdGhlIHNhbWUNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0UmVtb3RlRGF0YShJZDogc3RyaW5nLCBSZW1vdGVEYXRhOiB0YWJsZSkNCiAgICBsb2NhbCBSZW1vdGVPcHRpb25zID0gc2VsZi5SZW1vdGVPcHRpb25zDQogICAgUmVtb3RlT3B0aW9uc1tJZF0gPSBSZW1vdGVEYXRhDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpVcGRhdGVSZW1vdGVEYXRhKElkOiBzdHJpbmcsIFJlbW90ZURhdGE6IHRhYmxlKQ0KICAgIENvbW11bmljYXRpb246Q29tbXVuaWNhdGUoIlJlbW90ZURhdGEiLCBJZCwgUmVtb3RlRGF0YSkNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlVwZGF0ZUFsbFJlbW90ZURhdGEoS2V5OiBzdHJpbmcsIFZhbHVlKQ0KICAgIENvbW11bmljYXRpb246Q29tbXVuaWNhdGUoIkFsbFJlbW90ZURhdGEiLCBLZXksIFZhbHVlKQ0KZW5kDQoNCnJldHVybiBQcm9jZXNz]]
},Hook={'base64',
[[bG9jYWwgSG9vayA9IHsNCglPcmlnaW5hbE5hbWVjYWxsID0gbmlsLA0KCU9yaWdpbmFsSW5kZXggPSBuaWwsDQp9DQoNCnR5cGUgdGFibGUgPSB7DQoJW2FueV06IGFueQ0KfQ0KDQp0eXBlIE1ldGFDYWxsYmFjayA9IChJbnN0YW5jZSwgLi4uYW55KSAtPiAuLi5hbnkNCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBNb2R1bGVzDQpsb2NhbCBQcm9jZXNzDQpsb2NhbCBDb25maWd1cmF0aW9uDQpsb2NhbCBDb25maWcNCmxvY2FsIENvbW11bmljYXRpb24NCg0KbG9jYWwgRXhlRU5WID0gZ2V0ZmVudigxKQ0KDQpmdW5jdGlvbiBIb29rOkluaXQoRGF0YSkNCiAgICBNb2R1bGVzID0gRGF0YS5Nb2R1bGVzDQoNCglQcm9jZXNzID0gTW9kdWxlcy5Qcm9jZXNzDQoJQ29tbXVuaWNhdGlvbiA9IE1vZHVsZXMuQ29tbXVuaWNhdGlvbiBvciBDb21tdW5pY2F0aW9uDQoJQ29uZmlnID0gTW9kdWxlcy5Db25maWcgb3IgQ29uZmlnDQoJQ29uZmlndXJhdGlvbiA9IE1vZHVsZXMuQ29uZmlndXJhdGlvbiBvciBDb25maWd1cmF0aW9uDQplbmQNCg0KLS0vLyBUaGUgY2FsbGJhY2sgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgbmlsIHZhbHVlIHNvbWV0aW1lcyB3aGljaCBzaG91bGQgYmUgaW5nb3JlZA0KbG9jYWwgSG9va01pZGRsZSA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKE9yaWdpbmFsRnVuYywgQ2FsbGJhY2ssIC4uLikNCgktLS8vIEludm9rZSBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGEgcmVwb25jZSBvdGhlcndpc2UgaWdub3JlZA0KCWxvY2FsIFJldHVyblZhbHVlcyA9IENhbGxiYWNrKC4uLikNCglpZiBSZXR1cm5WYWx1ZXMgdGhlbg0KCQlyZXR1cm4gUHJvY2VzczpVbnBhY2soUmV0dXJuVmFsdWVzKQ0KCWVuZA0KDQoJLS0vLyBJbnZva2Ugb3JpZ25hbCBmdW5jdGlvbg0KCXJldHVybiBPcmlnaW5hbEZ1bmMoLi4uKQ0KZW5kKQ0KDQotLS8vIGdldHJhd21ldGF0YWJsZQ0KZnVuY3Rpb24gSG9vazpSZXBsYWNlTWV0YU1ldGhvZChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhQ2FsbGJhY2spOiBNZXRhQ2FsbGJhY2sNCglsb2NhbCBNZXRhdGFibGUgPSBnZXRyYXdtZXRhdGFibGUoT2JqZWN0KQ0KCWxvY2FsIE9yaWdpbmFsRnVuYyA9IHJhd2dldChNZXRhdGFibGUsIENhbGwpDQoJDQoJLS0vLyBSZXBsYWNlIGZ1bmN0aW9uDQoJc2V0cmVhZG9ubHkoTWV0YXRhYmxlLCBmYWxzZSkNCglyYXdzZXQoTWV0YXRhYmxlLCBDYWxsLCBuZXdjY2xvc3VyZShmdW5jdGlvbiguLi4pDQoJCXJldHVybiBIb29rTWlkZGxlKE9yaWdpbmFsRnVuYywgQ2FsbGJhY2ssIC4uLikNCgllbmQpKQ0KCXNldHJlYWRvbmx5KE1ldGF0YWJsZSwgdHJ1ZSkNCg0KCXJldHVybiBPcmlnaW5hbEZ1bmMNCmVuZA0KDQotLS8vIGhvb2tmdW5jdGlvbg0KZnVuY3Rpb24gSG9vazpIb29rRnVuY3Rpb24oRnVuYzogKC4uLmFueSkgLT4gLi4uYW55LCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55KQ0KCWxvY2FsIE9yaWdpbmFsRnVuYw0KCU9yaWdpbmFsRnVuYyA9IGhvb2tmdW5jdGlvbihGdW5jLCBmdW5jdGlvbiguLi4pDQoJCXJldHVybiBIb29rTWlkZGxlKE9yaWdpbmFsRnVuYywgQ2FsbGJhY2ssIC4uLikNCgllbmQpDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCi0tLy8gaG9va21ldGFtZXRob2QNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFDYWxsKE9iamVjdDogSW5zdGFuY2UsIENhbGw6IHN0cmluZywgQ2FsbGJhY2s6IE1ldGFDYWxsYmFjayk6IE1ldGFDYWxsYmFjaw0KCWxvY2FsIE9yaWdpbmFsRnVuYw0KCU9yaWdpbmFsRnVuYyA9IGhvb2ttZXRhbWV0aG9kKE9iamVjdCwgQ2FsbCwgbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJZW5kKSkNCglyZXR1cm4gT3JpZ2luYWxGdW5jDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rTWV0YU1ldGhvZChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhQ2FsbGJhY2spOiBNZXRhQ2FsbGJhY2sNCgktLS8vIEdldHJhd21ldGF0YWJsZQ0KCWlmIENvbmZpZy5SZXBsYWNlTWV0YUNhbGxGdW5jIHRoZW4NCgkJcmV0dXJuIHNlbGY6UmVwbGFjZU1ldGFNZXRob2QoT2JqZWN0LCBDYWxsLCBDYWxsYmFjaykNCgllbmQNCgkNCgktLS8vIEhvb2ttZXRhbWV0aG9kDQoJcmV0dXJuIHNlbGY6SG9va01ldGFDYWxsKE9iamVjdCwgQ2FsbCwgQ2FsbGJhY2spDQplbmQNCg0KLS0vLyBUaGlzIGluY2x1ZGVzIGEgZmV3IHBhdGNoZXMgZm9yIGV4ZWN1dG9yIGZ1bmN0aW9ucyB0aGF0IHJlc3VsdCBpbiBkZXRlY3Rpb24NCi0tLy8gVGhpcyBpc24ndCBidWxsZXRwcm9vZiBzaW5jZSBzb21lIGZ1bmN0aW9ucyBsaWtlIGhvb2tmdW5jdGlvbiBJIGNhbid0IHBhdGNoDQotLS8vIEJ5IHRoZSB3YXksIHRoYW5rcyBmb3IgY29weWluZyB0aGlzIGd1eXMhIFN1cGVyIGFwcHJlY2lhdGUgdGhlIGNvcHljYXQNCmZ1bmN0aW9uIEhvb2s6UGF0Y2hGdW5jdGlvbnMoKQ0KCS0tLy8gQ2hlY2sgaWYgdGhpcyBmdW5jdGlvbiBpcyBkaXNhYmxlZCBpbiB0aGUgY29uZmlndXJhdGlvbg0KCWlmIENvbmZpZy5Ob0Z1bmN0aW9uUGF0Y2hpbmcgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBQYXRjaGVzID0gew0KCQktLS8vIEVycm9yIGRldGVjdGlvbiBwYXRjaA0KCQktLS8vIGhvb2tmdW5jdGlvbiBtYXkgc3RpbGwgYmUgZGV0ZWN0ZWQgZGVwZW5kaW5nIG9uIHRoZSBleGVjdXRvcg0KCQlbcGNhbGxdID0gIGZ1bmN0aW9uKE9sZEZ1bmMsIEZ1bmMsIC4uLikNCgkJCWxvY2FsIFJlc3BvbmNlID0ge09sZEZ1bmMoRnVuYywgLi4uKX0NCgkJCWxvY2FsIFN1Y2Nlc3MsIEVycm9yID0gUmVzcG9uY2VbMV0sIFJlc3BvbmNlWzJdDQoJCQlsb2NhbCBJc0MgPSBpc2NjbG9zdXJlKEZ1bmMpDQoNCgkJCS0tLy8gUGF0Y2ggYy1jbG9zdXJlIGVycm9yIGRldGVjdGlvbg0KCQkJaWYgU3VjY2VzcyA9PSBmYWxzZSBhbmQgSXNDIHRoZW4NCgkJCQlsb2NhbCBOZXdFcnJvciA9IFByb2Nlc3M6Q2xlYW5DRXJyb3IoRXJyb3IpDQoJCQkJDQoJCQkJUmVzcG9uY2VbMl0gPSBOZXdFcnJvcg0KCQkJZW5kDQoNCgkJCS0tLy8gU3RhY2stb3ZlcmZsb3cgZGV0ZWN0aW9uIHBhdGNoDQoJCQlpZiBTdWNjZXNzID09IGZhbHNlIGFuZCBub3QgSXNDIGFuZCBFcnJvcjpmaW5kKCJDIHN0YWNrIG92ZXJmbG93IikgdGhlbg0KCQkJCWxvY2FsIFRyYWNldGFibGUgPSBFcnJvcjpzcGxpdCgiOiIpDQoJCQkJbG9jYWwgQ2FsbGVyLCBMaW5lID0gVHJhY2V0YWJsZVsxXSwgVHJhY2V0YWJsZVsyXQ0KDQoJCQkJbG9jYWwgQ291bnQgPSBQcm9jZXNzOkNvdW50TWF0Y2hlcyhFcnJvciwgQ2FsbGVyKQ0KDQoJCQkJaWYgQ291bnQgPT0gMTk2IHRoZW4NCgkJCQkJQ29tbXVuaWNhdGlvbjpDb25zb2xlUHJpbnQoIkMgc3RhY2sgb3ZlcmZsb3cgcGF0Y2hlZCIpDQoJCQkJCVJlc3BvbmNlWzJdID0gYHtDYWxsZXJ9OntMaW5lfToge0Vycm9yfWANCgkJCQllbmQNCgkJCWVuZA0KDQoJCQlyZXR1cm4gUHJvY2VzczpVbnBhY2soUmVzcG9uY2UpDQoJCWVuZCwNCgkJW2dldGZlbnZdID0gZnVuY3Rpb24oT2xkRnVuYywgTGV2ZWw6IG51bWJlciwgLi4uKQ0KCQkJTGV2ZWwgPSBMZXZlbCBvciAxDQoNCgkJCS0tLy8gUHJldmVudCBjYXRwdXJlIG9mIGV4ZWN1dG9yJ3MgZW52DQoJCQlpZiB0eXBlKExldmVsKSA9PSAibnVtYmVyIiB0aGVuDQoJCQkJTGV2ZWwgKz0gMg0KCQkJZW5kDQoNCgkJCWxvY2FsIFJlc3BvbmNlID0ge09sZEZ1bmMoTGV2ZWwsIC4uLil9DQoJCQlsb2NhbCBFTlYgPSBSZXNwb25jZVsxXQ0KDQoJCQktLS8vIF9fdG9zdHJpbmcgRU5WIGRldGVjdGlvbiBwYXRjaA0KCQkJaWYgbm90IGNoZWNrY2FsbGVyKCkgYW5kIEVOViA9PSBFeGVFTlYgdGhlbg0KCQkJCUNvbW11bmljYXRpb246Q29uc29sZVByaW50KCJFTlYgZXNjYXBlIHBhdGNoZWQiKQ0KCQkJCXJldHVybiBPbGRGdW5jKDk5OTk5OSwgLi4uKQ0KCQkJZW5kDQoNCgkJCXJldHVybiBQcm9jZXNzOlVucGFjayhSZXNwb25jZSkNCgkJZW5kDQoJfQ0KDQoJLS0vLyBIb29rIGVhY2ggZnVuY3Rpb24NCglmb3IgRnVuYywgQ2FsbEJhY2sgaW4gUGF0Y2hlcyBkbw0KCQlsb2NhbCBPbGRGdW5jID0gY2xvbmVmdW5jdGlvbihGdW5jKQ0KCQlob29rZnVuY3Rpb24oRnVuYywgbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KCQkJcmV0dXJuIENhbGxCYWNrKE9sZEZ1bmMsIC4uLikNCgkJZW5kKSkNCgllbmQNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBNZXJnZShCYXNlOiB0YWJsZSwgTmV3OiB0YWJsZSkNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOlJ1bk9uQWN0b3JzKENvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJaWYgbm90IGdldGFjdG9ycyB0aGVuIHJldHVybiBlbmQNCgkNCglsb2NhbCBBY3RvcnMgPSBnZXRhY3RvcnMoKQ0KCWlmIG5vdCBBY3RvcnMgdGhlbiByZXR1cm4gZW5kDQoJDQoJZm9yIF8sIEFjdG9yIGluIEFjdG9ycyBkbyANCgkJcnVuX29uX2FjdG9yKEFjdG9yLCBDb2RlLCBDaGFubmVsSWQpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gUHJvY2Vzc1JlbW90ZShPcmlnaW5hbEZ1bmMsIE1ldGFNZXRob2Q6IHN0cmluZywgc2VsZiwgTWV0aG9kOiBzdHJpbmcsIC4uLikNCglyZXR1cm4gUHJvY2VzczpQcm9jZXNzUmVtb3RlKHsNCgkJUmVtb3RlID0gc2VsZiwNCgkJTWV0aG9kID0gTWV0aG9kLA0KCQlPcmlnaW5hbEZ1bmMgPSBPcmlnaW5hbEZ1bmMsDQoJCU1ldGFNZXRob2QgPSBNZXRhTWV0aG9kLA0KCQlUcmFuc2ZlclR5cGUgPSAiU2VuZCIsDQoJCUlzRXhwbG9pdCA9IGNoZWNrY2FsbGVyKCkNCgl9LCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZTogc3RyaW5nLCBGdW5jTmFtZTogc3RyaW5nKQ0KCWxvY2FsIFJlbW90ZSA9IEluc3RhbmNlLm5ldyhDbGFzc05hbWUpDQoJbG9jYWwgRnVuYyA9IFJlbW90ZVtGdW5jTmFtZV0NCglsb2NhbCBPcmlnaW5hbEZ1bmMNCg0KCS0tLy8gUmVtb3RlcyB3aWxsIHNoYXJlIHRoZSBzYW1lIGZ1bmN0aW9ucw0KCS0tLy8gCUZvciBleGFtcGxlIEZpcmVTZXJ2ZXIgd2lsbCBiZSBpZGVudGljYWwNCgktLS8vIEFkZGlvbmFsbHksIHRoaXMgaXMgZm9yIF9faW5kZXggY2FsbHMuDQoJLS0vLyAJQSBfX25hbWVjYWxsIGhvb2sgd2lsbCBub3QgZGV0ZWN0IHRoaXMNCglPcmlnaW5hbEZ1bmMgPSBzZWxmOkhvb2tGdW5jdGlvbihGdW5jLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCS0tLy8gQ2hlY2sgaWYgdGhlIE9iamVjdCBpcyBhbGxvd2VkIA0KCQlpZiBub3QgUHJvY2VzczpSZW1vdGVBbGxvd2VkKHNlbGYsICJTZW5kIiwgRnVuY05hbWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gUHJvY2VzcyB0aGUgcmVtb3RlIGRhdGENCgkJcmV0dXJuIFByb2Nlc3NSZW1vdGUoT3JpZ2luYWxGdW5jLCAiX19pbmRleCIsIHNlbGYsIEZ1bmNOYW1lLCAuLi4pDQoJZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va1JlbW90ZUluZGV4ZXMoKQ0KCWxvY2FsIFJlbW90ZUNsYXNzRGF0YSA9IFByb2Nlc3MuUmVtb3RlQ2xhc3NEYXRhDQoJZm9yIENsYXNzTmFtZSwgRGF0YSBpbiBSZW1vdGVDbGFzc0RhdGEgZG8NCgkJbG9jYWwgRnVuY05hbWUgPSBEYXRhLlNlbmRbMV0NCgkJc2VsZjpIb29rUmVtb3RlVHlwZUluZGV4KENsYXNzTmFtZSwgRnVuY05hbWUpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpCZWdpbkhvb2tzKCkNCgktLS8vIEhvb2sgUmVtb3RlIGZ1bmN0aW9ucw0KCXNlbGY6SG9va1JlbW90ZUluZGV4ZXMoKQ0KDQoJLS0vLyBOYW1lY2FsbCBob29rDQoJbG9jYWwgT3JpZ2luYWxOYW1lQ2FsbA0KCU9yaWdpbmFsTmFtZUNhbGwgPSBzZWxmOkhvb2tNZXRhTWV0aG9kKGdhbWUsICJfX25hbWVjYWxsIiwgZnVuY3Rpb24oc2VsZiwgLi4uKQ0KCQlsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpDQoJCXJldHVybiBQcm9jZXNzUmVtb3RlKE9yaWdpbmFsTmFtZUNhbGwsICJfX25hbWVjYWxsIiwgc2VsZiwgTWV0aG9kLCAuLi4pDQoJZW5kKQ0KDQoJTWVyZ2Uoc2VsZiwgew0KCQlPcmlnaW5hbE5hbWVjYWxsID0gT3JpZ2luYWxOYW1lQ2FsbCwNCgkJLS1PcmlnaW5hbEluZGV4ID0gT2kNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SW5kZXgoT2JqZWN0OiBJbnN0YW5jZSwgS2V5OiBzdHJpbmcpDQoJcmV0dXJuIE9iamVjdFtLZXldDQplbmQNCg0KZnVuY3Rpb24gSG9vazpQdXNoQ29uZmlnKE92ZXJ3cml0ZXMpDQogICAgTWVyZ2Uoc2VsZiwgT3ZlcndyaXRlcykNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkhvb2tDbGllbnRJbnZva2UoUmVtb3RlLCBNZXRob2QsIENhbGxiYWNrKQ0KCWxvY2FsIFN1Y2Nlc3MsIEZ1bmN0aW9uID0gcGNhbGwoZnVuY3Rpb24oKQ0KCQlyZXR1cm4gZ2V0Y2FsbGJhY2t2YWx1ZShSZW1vdGUsIE1ldGhvZCkNCgllbmQpDQoNCgktLS8vIFNvbWUgZXhlY3V0b3JzIGxpa2UgUG90YXNzaXVtIHdpbGwgdGhyb3cgYSBlcnJvciBpZiB0aGUgQ2FsbGJhY2sgdmFsdWUgaXMgbmlsDQoJaWYgbm90IFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoJDQoJbG9jYWwgSG9va1N1Y2Nlc3MgPSBwY2FsbChmdW5jdGlvbigpDQoJCXNlbGY6SG9va0Z1bmN0aW9uKEZ1bmN0aW9uLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCQlyZXR1cm4gQ2FsbGJhY2soLi4uKQ0KCQllbmQpDQoJZW5kKQ0KCQ0KCWlmIEhvb2tTdWNjZXNzIHRoZW4gcmV0dXJuIGVuZA0KCVJlbW90ZVtNZXRob2RdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBIb29rOk11bHRpQ29ubmVjdChSZW1vdGVzKQ0KCWZvciBfLCBSZW1vdGUgaW4gbmV4dCwgUmVtb3RlcyBkbw0KCQlzZWxmOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6Q29ubmVjdENsaWVudFJlY2l2ZShSZW1vdGUpDQoJLS0vLyBDaGVjayBpZiB0aGUgUmVtb3RlIGNsYXNzIGlzIGFsbG93ZWQgZm9yIHJlY2VpdmluZw0KCWxvY2FsIEFsbG93ZWQgPSBQcm9jZXNzOlJlbW90ZUFsbG93ZWQoUmVtb3RlLCAiUmVjZWl2ZSIpDQoJaWYgbm90IEFsbG93ZWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENoZWNrIGlmIHRoZSBPYmplY3QgaGFzIFJlbW90ZSBjbGFzcyBkYXRhDQogICAgbG9jYWwgQ2xhc3NEYXRhID0gUHJvY2VzczpHZXRDbGFzc0RhdGEoUmVtb3RlKQ0KICAgIGxvY2FsIElzUmVtb3RlRnVuY3Rpb24gPSBDbGFzc0RhdGEuSXNSZW1vdGVGdW5jdGlvbg0KCWxvY2FsIE5vUmVjaXZlSG9vayA9IENsYXNzRGF0YS5Ob1JlY2l2ZUhvb2sNCiAgICBsb2NhbCBNZXRob2QgPSBDbGFzc0RhdGEuUmVjZWl2ZVsxXQ0KCWxvY2FsIFByZXZpb3VzRnVuY3Rpb24gPSBuaWwNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIFJlY2l2ZSBzaG91bGQgYmUgaG9va2VkDQoJaWYgTm9SZWNpdmVIb29rIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBOZXcgY2FsbGJhY2sgZnVuY3Rpb24NCglsb2NhbCBmdW5jdGlvbiBDYWxsYmFjayguLi4pDQogICAgICAgIHJldHVybiBQcm9jZXNzOlByb2Nlc3NSZW1vdGUoew0KICAgICAgICAgICAgUmVtb3RlID0gUmVtb3RlLA0KICAgICAgICAgICAgTWV0aG9kID0gTWV0aG9kLA0KICAgICAgICAgICAgT3JpZ2luYWxGdW5jID0gUHJldmlvdXNGdW5jdGlvbiwNCiAgICAgICAgICAgIElzUmVjZWl2ZSA9IHRydWUsDQogICAgICAgICAgICBNZXRhTWV0aG9kID0gIkNvbm5lY3QiLA0KCQkJSXNFeHBsb2l0ID0gY2hlY2tjYWxsZXIoKQ0KICAgICAgICB9LCAuLi4pDQoJZW5kDQoNCgktLS8vIENvbm5lY3QgcmVtb3RlDQoJaWYgbm90IElzUmVtb3RlRnVuY3Rpb24gdGhlbg0KICAgCQlSZW1vdGVbTWV0aG9kXTpDb25uZWN0KENhbGxiYWNrKQ0KCWVsc2UgLS0gUmVtb3RlIGZ1bmN0aW9ucw0KCQlzZWxmOkhvb2tDbGllbnRJbnZva2UoUmVtb3RlLCBNZXRob2QsIENhbGxiYWNrKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6QmVnaW5TZXJ2aWNlKExpYnJhcmllcywgRXh0cmFEYXRhLCBDaGFubmVsSWQsIC4uLikNCgktLS8vIExpYnJhcmVpcw0KCWxvY2FsIFJldHVyblNwb29mcyA9IExpYnJhcmllcy5SZXR1cm5TcG9vZnMNCglsb2NhbCBQcm9jZXNzTGliID0gTGlicmFyaWVzLlByb2Nlc3MNCglsb2NhbCBDb21tdW5pY2F0aW9uID0gTGlicmFyaWVzLkNvbW11bmljYXRpb24NCglsb2NhbCBHZW5lcmF0aW9uID0gTGlicmFyaWVzLkdlbmVyYXRpb24NCglsb2NhbCBDb25maWcgPSBMaWJyYXJpZXMuQ29uZmlnDQoNCgktLS8vIENoZWNrIGZvciBjb25maWd1cmF0aW9uIG92ZXJ3cml0ZXMNCglQcm9jZXNzTGliOkNoZWNrQ29uZmlnKENvbmZpZykNCg0KCS0tLy8gSW5pdCBkYXRhDQoJbG9jYWwgSW5pdERhdGEgPSB7DQoJCU1vZHVsZXMgPSB7DQoJCQlSZXR1cm5TcG9vZnMgPSBSZXR1cm5TcG9vZnMsDQoJCQlHZW5lcmF0aW9uID0gR2VuZXJhdGlvbiwNCgkJCUNvbW11bmljYXRpb24gPSBDb21tdW5pY2F0aW9uLA0KCQkJUHJvY2VzcyA9IFByb2Nlc3NMaWIsDQoJCQlDb25maWcgPSBDb25maWcsDQoJCQlIb29rID0gc2VsZg0KCQl9LA0KCQlTZXJ2aWNlcyA9IHNldG1ldGF0YWJsZSh7fSwgew0KCQkJX19pbmRleCA9IGZ1bmN0aW9uKHNlbGYsIE5hbWU6IHN0cmluZyk6IEluc3RhbmNlDQoJCQkJbG9jYWwgU2VydmljZSA9IGdhbWU6R2V0U2VydmljZShOYW1lKQ0KCQkJCXJldHVybiBjbG9uZXJlZihTZXJ2aWNlKQ0KCQkJZW5kLA0KCQl9KQ0KCX0NCg0KCS0tLy8gSW5pdCBsaWJyYXJpZXMNCglDb21tdW5pY2F0aW9uOkluaXQoSW5pdERhdGEpDQoJUHJvY2Vzc0xpYjpJbml0KEluaXREYXRhKQ0KDQoJLS0vLyBDb21tdW5pY2F0aW9uIGNvbmZpZ3VyYXRpb24NCglsb2NhbCBDaGFubmVsLCBJc1dyYXBwZWQgPSBDb21tdW5pY2F0aW9uOkdldENvbW1DaGFubmVsKENoYW5uZWxJZCkNCglDb21tdW5pY2F0aW9uOlNldENoYW5uZWwoQ2hhbm5lbCkNCglDb21tdW5pY2F0aW9uOkFkZFR5cGVDYWxsYmFja3Moew0KCQlbIlJlbW90ZURhdGEiXSA9IGZ1bmN0aW9uKElkOiBzdHJpbmcsIFJlbW90ZURhdGEpDQoJCQlQcm9jZXNzTGliOlNldFJlbW90ZURhdGEoSWQsIFJlbW90ZURhdGEpDQoJCWVuZCwNCgkJWyJBbGxSZW1vdGVEYXRhIl0gPSBmdW5jdGlvbihLZXk6IHN0cmluZywgVmFsdWUpDQoJCQlQcm9jZXNzTGliOlNldEFsbFJlbW90ZURhdGEoS2V5LCBWYWx1ZSkNCgkJZW5kLA0KCQlbIlVwZGF0ZVNwb29mcyJdID0gZnVuY3Rpb24oQ29udGVudDogc3RyaW5nKQ0KCQkJbG9jYWwgU3Bvb2ZzID0gbG9hZHN0cmluZyhDb250ZW50KSgpDQoJCQlQcm9jZXNzTGliOlNldE5ld1JldHVyblNwb29mcyhTcG9vZnMpDQoJCWVuZA0KCX0pDQoJDQoJLS0vLyBQcm9jZXNzIGNvbmZpZ3VyYXRpb24NCglQcm9jZXNzTGliOlNldENoYW5uZWwoQ2hhbm5lbCwgSXNXcmFwcGVkKQ0KCVByb2Nlc3NMaWI6U2V0RXh0cmFEYXRhKEV4dHJhRGF0YSkNCg0KCS0tLy8gSG9vayBjb25maWd1cmF0aW9uDQoJc2VsZjpJbml0KEluaXREYXRhKQ0KCXNlbGY6UGF0Y2hGdW5jdGlvbnMoKQ0KCXNlbGY6QmVnaW5Ib29rcygpDQplbmQNCg0KZnVuY3Rpb24gSG9vazpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZTogc3RyaW5nLCBDaGFubmVsSWQ6IG51bWJlcikNCgktLS8vIEhvb2sgYWN0b3JzDQoJaWYgbm90IENvbmZpZ3VyYXRpb24uTm9BY3RvcnMgdGhlbg0KCQlzZWxmOlJ1bk9uQWN0b3JzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCWVuZA0KDQoJLS0vLyBIb29rIGN1cnJlbnQgdGhyZWFkDQoJc2VsZjpCZWdpblNlcnZpY2UoTW9kdWxlcywgbmlsLCBDaGFubmVsSWQpIA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6TG9hZFJlY2VpdmVIb29rcygpDQoJbG9jYWwgTm9SZWNlaXZlSG9va2luZyA9IENvbmZpZy5Ob1JlY2VpdmVIb29raW5nDQoJbG9jYWwgQmxhY2tMaXN0ZWRTZXJ2aWNlcyA9IENvbmZpZy5CbGFja0xpc3RlZFNlcnZpY2VzDQoNCglpZiBOb1JlY2VpdmVIb29raW5nIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBSZW1vdGUgYWRkZWQNCglnYW1lLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKFJlbW90ZSkgLS0gVE9ETw0KCQlzZWxmOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCWVuZCkNCg0KCS0tLy8gQ29sbGVjdCByZW1vdGVzIHdpdGggbmlsIHBhcmVudHMNCglzZWxmOk11bHRpQ29ubmVjdChnZXRuaWxpbnN0YW5jZXMoKSkNCg0KCS0tLy8gU2VhcmNoIGZvciByZW1vdGVzDQoJZm9yIF8sIFNlcnZpY2UgaW4gbmV4dCwgZ2FtZTpHZXRDaGlsZHJlbigpIGRvDQoJCWlmIHRhYmxlLmZpbmQoQmxhY2tMaXN0ZWRTZXJ2aWNlcywgU2VydmljZS5DbGFzc05hbWUpIHRoZW4gY29udGludWUgZW5kDQoJCXNlbGY6TXVsdGlDb25uZWN0KFNlcnZpY2U6R2V0RGVzY2VuZGFudHMoKSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRIb29rcyhBY3RvckNvZGU6IHN0cmluZywgQ2hhbm5lbElkOiBudW1iZXIpDQoJc2VsZjpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZSwgQ2hhbm5lbElkKQ0KCXNlbGY6TG9hZFJlY2VpdmVIb29rcygpDQplbmQNCg0KcmV0dXJuIEhvb2sNCg==]]
},Flags={'base64',
[[dHlwZSBGbGFnVmFsdWUgPSBib29sZWFufG51bWJlcnxhbnkNCnR5cGUgRmxhZyA9IHsNCiAgICBWYWx1ZTogRmxhZ1ZhbHVlLA0KICAgIExhYmVsOiBzdHJpbmcsDQogICAgQ2F0ZWdvcnk6IHN0cmluZw0KfQ0KdHlwZSBGbGFncyA9IHsNCiAgICBbc3RyaW5nXTogRmxhZw0KfQ0KdHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCmxvY2FsIE1vZHVsZSA9IHsNCiAgICBGbGFncyA9IHsNCiAgICAgICAgUHJldmVudFJlbmFtaW5nID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIHJlbmFtaW5nIiwNCiAgICAgICAgfSwNCiAgICAgICAgUHJldmVudFBhcmVudGluZyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBwYXJlbnRpbmciLA0KICAgICAgICB9LA0KICAgICAgICBTZWxlY3ROZXdlc3QgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiQXV0byBzZWxlY3QgbmV3ZXN0IiwNCiAgICAgICAgfSwNCiAgICAgICAgRGVjb21waWxlUG9wb3V0ID0geyAtLSBMb3ZyZSBTSFVTSA0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlBvcC1vdXQgZGVjb21waWxlcyIsDQogICAgICAgIH0sDQogICAgICAgIElnbm9yZU5pbCA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIklnbm9yZSBuaWwgcGFyZW50cyIsDQogICAgICAgIH0sDQogICAgICAgIExvZ0V4cGxvaXQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJMb2cgZXhwbG9pdCBjYWxscyIsDQogICAgICAgIH0sDQogICAgICAgIExvZ1JlY2l2ZXMgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJMb2cgcmVjZWl2ZXMiLA0KICAgICAgICB9LA0KICAgICAgICBQYXVzZWQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiUGF1c2VkIiwNCiAgICAgICAgICAgIEtleWJpbmQgPSBFbnVtLktleUNvZGUuUQ0KICAgICAgICB9LA0KICAgICAgICBLZXliaW5kc0VuYWJsZWQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJLZXliaW5kcyBFbmFibGVkIg0KICAgICAgICB9LA0KICAgICAgICBGaW5kU3RyaW5nRm9yTmFtZSA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIkZpbmQgYXJnIGZvciBuYW1lIg0KICAgICAgICB9LA0KICAgICAgICBVaVZpc2libGUgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJVSSBWaXNpYmxlIiwNCiAgICAgICAgICAgIEtleWJpbmQgPSBFbnVtLktleUNvZGUuUA0KICAgICAgICB9LA0KICAgICAgICBOb1RyZWVOb2RlcyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBncm91cGluZyINCiAgICAgICAgfSwNCiAgICAgICAgVGFibGVBcmdzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlRhYmxlIGFyZ3MiDQogICAgICAgIH0sDQogICAgICAgIE5vVmFyaWFibGVzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIGNvbXByZXNzaW9uIg0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ1ZhbHVlKE5hbWU6IHN0cmluZyk6IEZsYWdWYWx1ZQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICByZXR1cm4gRmxhZy5WYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRGbGFnVmFsdWUoTmFtZTogc3RyaW5nLCBWYWx1ZTogRmxhZ1ZhbHVlKQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICBGbGFnLlZhbHVlID0gVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2V0RmxhZ0NhbGxiYWNrKE5hbWU6IHN0cmluZywgQ2FsbGJhY2s6ICguLi5hbnkpIC0+IC4uLmFueSkNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgRmxhZy5DYWxsYmFjayA9IENhbGxiYWNrDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldEZsYWdDYWxsYmFja3MoRGljdDoge30pDQogICAgZm9yIE5hbWUsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkgaW4gbmV4dCwgRGljdCBkbyANCiAgICAgICAgc2VsZjpTZXRGbGFnQ2FsbGJhY2soTmFtZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWcoTmFtZTogc3RyaW5nKTogRmxhZw0KICAgIGxvY2FsIEFsbEZsYWdzID0gc2VsZjpHZXRGbGFncygpDQogICAgbG9jYWwgRmxhZyA9IEFsbEZsYWdzW05hbWVdDQogICAgYXNzZXJ0KEZsYWcsICJGbGFnIGRvZXMgbm90IGV4aXN0ISIpDQogICAgcmV0dXJuIEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkRmxhZyhOYW1lOiBzdHJpbmcsIEZsYWc6IEZsYWcpDQogICAgbG9jYWwgQWxsRmxhZ3MgPSBzZWxmOkdldEZsYWdzKCkNCiAgICBBbGxGbGFnc1tOYW1lXSA9IEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ3MoKTogRmxhZ3MNCiAgICByZXR1cm4gc2VsZi5GbGFncw0KZW5kDQoNCnJldHVybiBNb2R1bGU=]]
},Ui={'base64',
[[bG9jYWwgVWkgPSB7DQoJRGVmYXVsdEVkaXRvckNvbnRlbnQgPSAiLS0gSmVzdXMgbG92ZXMgeW91IiwNCglMb2dMaW1pdCA9IDEwMCwNCiAgICBTZWFzb25MYWJlbHMgPSB7IA0KICAgICAgICBKYW51YXJ5ID0gIuKbhCAlcyDim4QiLCANCiAgICAgICAgRmVicnVhcnkgPSAi8J+MqO+4jyAlcyDwn4+CIiwgDQogICAgICAgIE1hcmNoID0gIvCfjLkgJXPwn4y6ICIsIA0KICAgICAgICBBcHJpbCA9ICLwn5CjICVzIOKcne+4jyIsIA0KICAgICAgICBNYXkgPSAi8J+QnSAlcyDwn4yeIiwgDQogICAgICAgIEp1bmUgPSAi8J+MsiAlcyDwn6WVIiwgDQogICAgICAgIEp1bHkgPSAi8J+MiiAlcyDwn4yFIiwgDQogICAgICAgIEF1Z3VzdCA9ICLimIDvuI8gJXMg8J+MniIsIA0KICAgICAgICBTZXB0ZW1iZXIgPSAi8J+NgSAlcyDwn42BIiwgDQogICAgICAgIE9jdG9iZXIgPSAi8J+OgyAlcyDwn46DIiwgDQogICAgICAgIE5vdmVtYmVyID0gIvCfjYIgJXMg8J+NgiIsIA0KICAgICAgICBEZWNlbWJlciA9ICLwn46EICVzIPCfjoEiDQogICAgfSwNCglTY2FsZXMgPSB7DQoJCVsiTW9iaWxlIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDQ4MCwgMjgwKSwNCgkJWyJEZXNrdG9wIl0gPSBVRGltMi5mcm9tT2Zmc2V0KDYwMCwgNDAwKSwNCgl9LA0KICAgIEJhc2VDb25maWcgPSB7DQogICAgICAgIFRoZW1lID0gIlNpZ21hU3B5IiwNCgkJVGl0bGUgPSAiU2lnbWEgU3B5IHwgQ3JlYXRlZCBieSBkZXBzbyIsDQogICAgICAgIE5vU2Nyb2xsID0gdHJ1ZSwNCiAgICB9LA0KCU9wdGlvblR5cGVzID0gew0KCQlib29sZWFuID0gIkNoZWNrYm94IiwNCgl9LA0KCURpc3BsYXlSZW1vdGVJbmZvID0gew0KCQkiTWV0YU1ldGhvZCIsDQoJCSJNZXRob2QiLA0KCQkiUmVtb3RlIiwNCgkJIkNhbGxpbmdTY3JpcHQiLA0KCQkiSXNBY3RvciIsDQoJCSJJZCINCgl9LA0KDQogICAgV2luZG93ID0gbmlsLA0KICAgIFJhbmRvbVNlZWQgPSBSYW5kb20ubmV3KHRpY2soKSksDQoJTG9ncyA9IHNldG1ldGF0YWJsZSh7fSwge19fbW9kZSA9ICJrIn0pLA0KCUxvZ1F1ZXVlID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gInYifSksDQp9IA0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBMb2cgPSB7DQoJUmVtb3RlOiBJbnN0YW5jZSwNCglNZXRob2Q6IHN0cmluZywNCglBcmdzOiB0YWJsZSwNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCU1ldGFNZXRob2Q6IHN0cmluZz8sDQoJT3JpZ25hbEZ1bmM6ICgoLi4uYW55KSAtPiAuLi5hbnkpPywNCglDYWxsaW5nU2NyaXB0OiBJbnN0YW5jZT8sDQoJQ2FsbGluZ0Z1bmN0aW9uOiAoKC4uLmFueSkgLT4gLi4uYW55KT8sDQoJQ2xhc3NEYXRhOiB0YWJsZT8sDQoJUmV0dXJuVmFsdWVzOiB0YWJsZT8sDQoJUmVtb3RlRGF0YTogdGFibGU/LA0KCUlkOiBzdHJpbmcsDQoJU2VsZWN0YWJsZTogdGFibGUsDQoJSGVhZGVyRGF0YTogdGFibGUsDQoJVmFsdWVTd2FwczogdGFibGUsDQoJVGltZXN0YW1wOiBudW1iZXIsDQoJSXNFeHBsb2l0OiBib29sZWFuDQp9DQoNCi0tLy8gQ29tcGF0aWJpbGl0eQ0KbG9jYWwgU2V0Q2xpcGJvYXJkID0gc2V0Y2xpcGJvYXJkIG9yIHRvY2xpcGJvYXJkIG9yIHNldF9jbGlwYm9hcmQNCg0KLS0vLyBMaWJyYXJpZXMNCmxvY2FsIFJlR3VpID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vZ2l0aHViLmNvbS9kZXB0aHNvL0RlYXItUmVHdWkvcmF3L3JlZnMvaGVhZHMvbWFpbi9SZUd1aS5sdWEnKSwgIlJlR3VpIikoKQ0KDQotLS8vIE1vZHVsZXMNCmxvY2FsIEZsYWdzDQpsb2NhbCBHZW5lcmF0aW9uDQpsb2NhbCBQcm9jZXNzDQpsb2NhbCBIb29rIA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBDb21tdW5pY2F0aW9uDQpsb2NhbCBGaWxlcw0KDQpsb2NhbCBBY3RpdmVEYXRhID0gbmlsDQpsb2NhbCBSZW1vdGVzQ291bnQgPSAwDQoNCmxvY2FsIFRleHRGb250ID0gRm9udC5mcm9tRW51bShFbnVtLkZvbnQuQ29kZSkNCmxvY2FsIEZvbnRTdWNjZXNzID0gZmFsc2UNCmxvY2FsIENvbW1DaGFubmVsDQoNCmZ1bmN0aW9uIFVpOkluaXQoRGF0YSkNCiAgICBsb2NhbCBNb2R1bGVzID0gRGF0YS5Nb2R1bGVzDQoNCgktLS8vIE1vZHVsZXMNCglGbGFncyA9IE1vZHVsZXMuRmxhZ3MNCglHZW5lcmF0aW9uID0gTW9kdWxlcy5HZW5lcmF0aW9uDQoJUHJvY2VzcyA9IE1vZHVsZXMuUHJvY2Vzcw0KCUhvb2sgPSBNb2R1bGVzLkhvb2sNCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KCUNvbW11bmljYXRpb24gPSBNb2R1bGVzLkNvbW11bmljYXRpb24NCglGaWxlcyA9IE1vZHVsZXMuRmlsZXMNCg0KCS0tLy8gUmVHdWkNCglzZWxmOkxvYWRGb250KCkNCglzZWxmOkxvYWRSZUd1aSgpDQoJc2VsZjpDaGVja1NjYWxlKCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRDb21tQ2hhbm5lbChOZXdDb21tQ2hhbm5lbDogQmluZGFibGVFdmVudCkNCglDb21tQ2hhbm5lbCA9IE5ld0NvbW1DaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gVWk6Q2hlY2tTY2FsZSgpDQoJbG9jYWwgQmFzZUNvbmZpZyA9IHNlbGYuQmFzZUNvbmZpZw0KCWxvY2FsIFNjYWxlcyA9IHNlbGYuU2NhbGVzDQoNCglsb2NhbCBJc01vYmlsZSA9IFJlR3VpOklzTW9iaWxlRGV2aWNlKCkNCglsb2NhbCBEZXZpY2UgPSBJc01vYmlsZSBhbmQgIk1vYmlsZSIgb3IgIkRlc2t0b3AiDQoNCglCYXNlQ29uZmlnLlNpemUgPSBTY2FsZXNbRGV2aWNlXQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldENsaXBib2FyZChDb250ZW50OiBzdHJpbmcpDQoJU2V0Q2xpcGJvYXJkKENvbnRlbnQpDQplbmQNCg0KZnVuY3Rpb24gVWk6VHVyblNlYXNvbmFsKFRleHQ6IHN0cmluZyk6IHN0cmluZw0KICAgIGxvY2FsIFNlYXNvbkxhYmVscyA9IHNlbGYuU2Vhc29uTGFiZWxzDQogICAgbG9jYWwgTW9udGggPSBvcy5kYXRlKCIlQiIpDQogICAgbG9jYWwgQmFzZSA9IFNlYXNvbkxhYmVsc1tNb250aF0NCg0KICAgIHJldHVybiBCYXNlOmZvcm1hdChUZXh0KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkxvYWRGb250KCkNCglsb2NhbCBGb250RmlsZSA9IHNlbGYuRm9udEpzb25GaWxlDQoNCgktLS8vIEdldCBGb250RmFjZSBBc3NldElkDQoJbG9jYWwgQXNzZXRJZCA9IEZpbGVzOkxvYWRDdXN0b21hc3NldChGb250RmlsZSkNCglpZiBub3QgQXNzZXRJZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ3JlYXRlIGN1c3RvbSBGb250RmFjZQ0KCWxvY2FsIE5ld0ZvbnQgPSBGb250Lm5ldyhBc3NldElkKQ0KCVRleHRGb250ID0gTmV3Rm9udA0KCUZvbnRTdWNjZXNzID0gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldEZvbnRGaWxlKEZvbnRGaWxlOiBzdHJpbmcpDQoJc2VsZi5Gb250SnNvbkZpbGUgPSBGb250RmlsZQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkZvbnRXYXNTdWNjZXNzZnVsKCkNCglpZiBGb250U3VjY2VzcyB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gRXJyb3IgbWVzc2FnZQ0KCXNlbGY6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgeW91ciBleGVjdXRvciB3YXMgdW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmb250IGFuZCB0aGVyZWZvcmUgc3dpdGNoZWQgdG8gdGhlIERhcmsgdGhlbWUiLA0KCQkiXG5JZiB5b3Ugd291bGQgbGlrZSB0byB1c2UgdGhlIEltR3VpIHRoZW1lLCBcbnBsZWFzZSBkb3dubG9hZCB0aGUgZm9udCAoYXNzZXRzL1Byb2dneUNsZWFuLnR0ZikiLA0KCQkiYW5kIHB1dCBwdXQgaXQgaW4geW91ciB3b3Jrc3BhY2UgZm9sZGVyXG4oU2lnbWEgU3B5L2Fzc2V0cykiDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpMb2FkUmVHdWkoKQ0KCWxvY2FsIFRoZW1lQ29uZmlnID0gQ29uZmlnLlRoZW1lQ29uZmlnDQoJVGhlbWVDb25maWcuVGV4dEZvbnQgPSBUZXh0Rm9udA0KDQoJLS0vLyBSZUd1aQ0KCVJlR3VpOkRlZmluZVRoZW1lKCJTaWdtYVNweSIsIFRoZW1lQ29uZmlnKQ0KZW5kDQoNCnR5cGUgQ3JlYXRlQnV0dG9ucyA9IHsNCglCYXNlOiB0YWJsZT8sDQoJQnV0dG9uczogdGFibGUsDQoJTm9UYWJsZTogYm9vbGVhbj8NCn0NCmZ1bmN0aW9uIFVpOkNyZWF0ZUJ1dHRvbnMoUGFyZW50LCBEYXRhOiBDcmVhdGVCdXR0b25zKQ0KCWxvY2FsIEJhc2UgPSBEYXRhLkJhc2Ugb3Ige30NCglsb2NhbCBCdXR0b25zID0gRGF0YS5CdXR0b25zDQoJbG9jYWwgTm9UYWJsZSA9IERhdGEuTm9UYWJsZQ0KDQoJLS0vLyBDcmVhdGUgdGFibGUgbGF5b3V0DQoJaWYgbm90IE5vVGFibGUgdGhlbg0KCQlQYXJlbnQgPSBQYXJlbnQ6VGFibGUoew0KCQkJTWF4Q29sdW1ucyA9IDMNCgkJfSk6TmV4dFJvdygpDQoJZW5kDQoNCgktLS8vIENyZWF0ZSBidXR0b25zDQoJZm9yIF8sIEJ1dHRvbiBpbiBuZXh0LCBCdXR0b25zIGRvDQoJCWxvY2FsIENvbnRhaW5lciA9IFBhcmVudA0KCQlpZiBub3QgTm9UYWJsZSB0aGVuDQoJCQlDb250YWluZXIgPSBQYXJlbnQ6TmV4dENvbHVtbigpDQoJCWVuZA0KDQoJCVJlR3VpOkNoZWNrQ29uZmlnKEJ1dHRvbiwgQmFzZSkNCgkJQ29udGFpbmVyOkJ1dHRvbihCdXR0b24pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlV2luZG93KCkNCiAgICBsb2NhbCBCYXNlQ29uZmlnID0gc2VsZi5CYXNlQ29uZmlnDQoJbG9jYWwgQ29uZmlnID0gUHJvY2VzczpEZWVwQ2xvbmVUYWJsZShCYXNlQ29uZmlnKQ0KCWxvY2FsIFNlYXNvbmFsID0gc2VsZjpUdXJuU2Vhc29uYWwoQ29uZmlnLlRpdGxlKQ0KCUNvbmZpZy5UaXRsZSA9IFNlYXNvbmFsDQoNCgktLS8vIENyZWF0ZSBXaW5kb3cNCglsb2NhbCBXaW5kb3cgPSBSZUd1aTpXaW5kb3coQ29uZmlnKQ0KDQoJLS0vLyBTd2l0Y2ggdG8gRGFya1RoZW1lIGluc3RlYWQgb2YgdGhlIEltR3VpIHRoZW1lIGlmIHRoZSBmb250IGNhbm5vdCBiZSBsb2FkZWQNCglpZiBub3QgRm9udFN1Y2Nlc3MgdGhlbiANCgkJV2luZG93OlNldFRoZW1lKCJEYXJrVGhlbWUiKQ0KCWVuZA0KCQ0KCS0tLy8gQ3JlYXRlIFdpbmRvdw0KCXJldHVybiBXaW5kb3cNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVNYWluV2luZG93KCkNCglsb2NhbCBXaW5kb3cgPSBzZWxmOkNyZWF0ZVdpbmRvdygpDQoJc2VsZi5XaW5kb3cgPSBXaW5kb3cNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIGZvbnQgd2FzIHN1Y2Nlc3NmdWxseSBkb3dubG9hZGVkDQoJc2VsZjpGb250V2FzU3VjY2Vzc2Z1bCgpDQoJLS1zZWxmOkF1cmFDb3VudGVyU2VydmljZSgpDQoNCgktLS8vIFVpVmlzaWJsZSBmbGFnIGNhbGxiYWNrDQoJRmxhZ3M6U2V0RmxhZ0NhbGxiYWNrKCJVaVZpc2libGUiLCBmdW5jdGlvbihzZWxmLCBWaXNpYmxlKQ0KCQlXaW5kb3c6U2V0VmlzaWJsZShWaXNpYmxlKQ0KCWVuZCkNCg0KCXJldHVybiBXaW5kb3cNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93TW9kYWwoTGluZXM6IHRhYmxlKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgTWVzc2FnZSA9IHRhYmxlLmNvbmNhdChMaW5lcywgIlxuIikNCg0KCS0tLy8gTW9kYWwgV2luZG93DQoJbG9jYWwgTW9kYWxXaW5kb3cgPSBXaW5kb3c6UG9wdXBNb2RhbCh7DQoJCVRpdGxlID0gIlNpZ21hIFNweSINCgl9KQ0KCU1vZGFsV2luZG93OkxhYmVsKHsNCgkJVGV4dCA9IE1lc3NhZ2UsDQoJCVJpY2hUZXh0ID0gdHJ1ZSwNCgkJVGV4dFdyYXBwZWQgPSB0cnVlDQoJfSkNCglNb2RhbFdpbmRvdzpCdXR0b24oew0KCQlUZXh0ID0gIk9rYXkiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCU1vZGFsV2luZG93OkNsb3NlUG9wdXAoKQ0KCQllbmQsDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93VW5zdXBwb3J0ZWRFeGVjdXRvcihOYW1lOiBzdHJpbmcpDQoJVWk6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgU2lnbWEgU3B5IGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBleGVjdXRvciIsDQoJCSJUaGUgYmVzdCBmcmVlIG9wdGlvbiBpcyBTd2lmdCAoZGlzY29yZC5nZy9nZXRzd2lmdGdnKSIsDQoJCWBcbllvdXIgZXhlY3V0b3I6IHtOYW1lfWANCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dVbnN1cHBvcnRlZChGdW5jTmFtZTogc3RyaW5nKQ0KCVVpOlNob3dNb2RhbCh7DQoJCSJVbmZvcnR1bmF0ZWx5IFNpZ21hIFNweSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgZXhlY3V0b3IiLA0KCQlgXG5NaXNzaW5nIGZ1bmN0aW9uOiB7RnVuY05hbWV9YA0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlT3B0aW9uc0ZvckRpY3QoUGFyZW50LCBEaWN0OiB0YWJsZSwgQ2FsbGJhY2spDQoJbG9jYWwgT3B0aW9ucyA9IHt9DQoNCgktLS8vIERpY3RvbmFyeSB3cmFwDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgRGljdCBkbw0KCQlPcHRpb25zW0tleV0gPSB7DQoJCQlWYWx1ZSA9IFZhbHVlLA0KCQkJTGFiZWwgPSBLZXksDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKF8sIFZhbHVlKQ0KCQkJCURpY3RbS2V5XSA9IFZhbHVlDQoNCgkJCQktLS8vIEludm9rZSBjYWxsYmFjaw0KCQkJCWlmIG5vdCBDYWxsYmFjayB0aGVuIHJldHVybiBlbmQNCgkJCQlDYWxsYmFjaygpDQoJCQllbmQNCgkJfQ0KCWVuZA0KDQoJLS0vLyBDcmVhdGUgZWxlbWVudHMNCglzZWxmOkNyZWF0ZUVsZW1lbnRzKFBhcmVudCwgT3B0aW9ucykNCmVuZA0KDQpmdW5jdGlvbiBVaTpDaGVja0tleWJpbmRMYXlvdXQoQ29udGFpbmVyLCBLZXlDb2RlOiBFbnVtLktleUNvZGUsIENhbGxiYWNrKQ0KCWlmIG5vdCBLZXlDb2RlIHRoZW4gcmV0dXJuIENvbnRhaW5lciBlbmQNCg0KCS0tLy8gQ3JlYXRlIFJvdyBsYXlvdXQNCglDb250YWluZXIgPSBDb250YWluZXI6Um93KHsNCgkJSG9yaXpvbnRhbEZsZXggPSBFbnVtLlVJRmxleEFsaWdubWVudC5TcGFjZUJldHdlZW4NCgl9KQ0KDQoJLS0vLyBBZGQgS2V5YmluZCBlbGVtZW50DQoJQ29udGFpbmVyOktleWJpbmQoew0KCQlMYWJlbCA9ICIiLA0KCQlWYWx1ZSA9IEtleUNvZGUsDQoJCUxheW91dE9yZGVyID0gMiwNCgkJSWdub3JlR2FtZVByb2Nlc3NlZCA9IGZhbHNlLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCS0tLy8gQ2hlY2sgaWYga2V5YmluZHMgYXJlIGVuYWJsZWQNCgkJCWxvY2FsIEVuYWJsZWQgPSBGbGFnczpHZXRGbGFnVmFsdWUoIktleWJpbmRzRW5hYmxlZCIpDQoJCQlpZiBub3QgRW5hYmxlZCB0aGVuIHJldHVybiBlbmQNCg0KCQkJLS0vLyBJbnZva2UgY2FsbGJhY2sNCgkJCUNhbGxiYWNrKCkNCgkJZW5kLA0KCX0pDQoNCglyZXR1cm4gQ29udGFpbmVyDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KCWxvY2FsIE9wdGlvblR5cGVzID0gc2VsZi5PcHRpb25UeXBlcw0KCQ0KCS0tLy8gQ3JlYXRlIHRhYmxlIGxheW91dA0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKHsNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KTpOZXh0Um93KCkNCg0KCWZvciBOYW1lLCBEYXRhIGluIE9wdGlvbnMgZG8NCgkJbG9jYWwgVmFsdWUgPSBEYXRhLlZhbHVlDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoNCgkJLS0vLyBBZGQgbWlzc2luZyB2YWx1ZXMgaW50byBvcHRpb25zIHRhYmxlDQoJCVJlR3VpOkNoZWNrQ29uZmlnKERhdGEsIHsNCgkJCUNsYXNzID0gT3B0aW9uVHlwZXNbVHlwZV0sDQoJCQlMYWJlbCA9IE5hbWUsDQoJCX0pDQoJCQ0KCQktLS8vIENoZWNrIGlmIGEgZWxlbWVudCB0eXBlIGV4aXN0cyBmb3IgdmFsdWUgdHlwZQ0KCQlsb2NhbCBDbGFzcyA9IERhdGEuQ2xhc3MNCgkJYXNzZXJ0KENsYXNzLCBgTm8ge1R5cGV9IHR5cGUgZXhpc3RzIGZvciBvcHRpb25gKQ0KDQoJCWxvY2FsIENvbnRhaW5lciA9IFRhYmxlOk5leHRDb2x1bW4oKQ0KCQlsb2NhbCBDaGVja2JveCA9IG5pbA0KDQoJCS0tLy8gQ2hlY2sgZm9yIGEga2V5YmluZCBsYXlvdXQNCgkJbG9jYWwgS2V5YmluZCA9IERhdGEuS2V5YmluZA0KCQlDb250YWluZXIgPSBzZWxmOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleWJpbmQsIGZ1bmN0aW9uKCkNCgkJCUNoZWNrYm94OlRvZ2dsZSgpDQoJCWVuZCkNCgkJDQoJCS0tLy8gQ3JlYXRlIGNvbHVtbiBhbmQgZWxlbWVudA0KCQlDaGVja2JveCA9IENvbnRhaW5lcltDbGFzc10oQ29udGFpbmVyLCBEYXRhKQ0KCWVuZA0KZW5kDQoNCi0tLy8gQm9paWlpIHdoYXQgZGlkIHlvdSBzYXkgYWJvdXQgU2lnbWEgU3B5IPCfkoDwn5KADQpmdW5jdGlvbiBVaTpEaXNwbGF5QXVyYSgpDQogICAgbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCiAgICBsb2NhbCBSYW5kID0gc2VsZi5SYW5kb21TZWVkDQoNCgktLS8vIEF1cmEgKGJvaWlpaWkpDQogICAgbG9jYWwgQVVSQSA9IFJhbmQ6TmV4dEludGVnZXIoMSwgOTk5OTk5OSkNCiAgICBsb2NhbCBBVVJBREVMQVkgPSBSYW5kOk5leHRJbnRlZ2VyKDEsIDUpDQoNCgktLS8vIFRpdGxlDQoJbG9jYWwgVGl0bGUgPSBgU2lnbWEgU3B5IC0gRGVwc28gfCBBVVJBOiB7QVVSQX1gDQoJbG9jYWwgU2Vhc29uYWwgPSBzZWxmOlR1cm5TZWFzb25hbChUaXRsZSkNCiAgICBXaW5kb3c6U2V0VGl0bGUoU2Vhc29uYWwpDQoNCiAgICB3YWl0KEFVUkFERUxBWSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpBdXJhQ291bnRlclNlcnZpY2UoKQ0KICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB0cnVlIGRvDQogICAgICAgICAgICBzZWxmOkRpc3BsYXlBdXJhKCkNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNyZWF0ZVdpbmRvd0NvbnRlbnQoV2luZG93KQ0KICAgIC0tLy8gV2luZG93IGdyb3VwDQogICAgbG9jYWwgTGF5b3V0ID0gV2luZG93Okxpc3Qoew0KICAgICAgICBVaVBhZGRpbmcgPSAyLA0KICAgICAgICBIb3Jpem9udGFsRmxleCA9IEVudW0uVUlGbGV4QWxpZ25tZW50LkZpbGwsDQogICAgICAgIFZlcnRpY2FsRmxleCA9IEVudW0uVUlGbGV4QWxpZ25tZW50LkZpbGwsDQogICAgICAgIEZpbGxEaXJlY3Rpb24gPSBFbnVtLkZpbGxEaXJlY3Rpb24uVmVydGljYWwsDQogICAgICAgIEZpbGwgPSB0cnVlDQogICAgfSkNCg0KCS0tLy8gUmVtb3RlcyBsaXN0DQogICAgc2VsZi5SZW1vdGVzTGlzdCA9IExheW91dDpDYW52YXMoew0KICAgICAgICBTY3JvbGwgPSB0cnVlLA0KICAgICAgICBVaVBhZGRpbmcgPSA1LA0KICAgICAgICBBdXRvbWF0aWNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLk5vbmUsDQogICAgICAgIEZsZXhNb2RlID0gRW51bS5VSUZsZXhNb2RlLk5vbmUsDQogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTMwLCAxLCAwKQ0KICAgIH0pDQoNCgktLS8vIFRhYiBib3gNCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBMYXlvdXQ6VGFiU2VsZWN0b3Ioew0KICAgICAgICBOb0FuaW1hdGlvbiA9IHRydWUsDQogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTEzMCwgMC40LCAwKSwNCiAgICB9KQ0KDQoJc2VsZi5JbmZvU2VsZWN0b3IgPSBJbmZvU2VsZWN0b3INCglzZWxmLkNhbnZhc0xheW91dCA9IExheW91dA0KDQoJLS0vLyBNYWtlIHRhYnMNCglzZWxmOk1ha2VFZGl0b3JUYWIoSW5mb1NlbGVjdG9yKQ0KCXNlbGY6TWFrZU9wdGlvbnNUYWIoSW5mb1NlbGVjdG9yKQ0KCQ0KCWlmIENvbmZpZy5EZWJ1ZyB0aGVuDQoJCXNlbGY6Q29uc29sZVRhYihJbmZvU2VsZWN0b3IpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6Q29uc29sZVRhYihJbmZvU2VsZWN0b3IpDQoJbG9jYWwgVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSAiQ29uc29sZSINCgl9KQ0KDQoJbG9jYWwgQnV0dG9uc1JvdyA9IFRhYjpSb3coKQ0KCUJ1dHRvbnNSb3c6QnV0dG9uKHsNCgkJVGV4dCA9ICJDbGVhciIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJc2VsZi5Db25zb2xlOkNsZWFyKCkNCgkJZW5kDQoJfSkNCglCdXR0b25zUm93OkJ1dHRvbih7DQoJCVRleHQgPSAiQ29weSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJbG9jYWwgQ29udGVudCA9IHNlbGYuQ29uc29sZTpHZXRWYWx1ZSgpDQoJCQl0b2NsaXBib2FyZChDb250ZW50KQ0KCQllbmQNCgl9KQ0KCUJ1dHRvbnNSb3c6QnV0dG9uKHsNCgkJVGV4dCA9ICJQYXVzZSIsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oc2VsZikNCgkJCWxvY2FsIEVuYWJsZWQgPSBub3Qgc2VsZi5Db25zb2xlLkVuYWJsZWQNCgkJCWxvY2FsIFRleHQgPSBFbmFibGVkIGFuZCAiUGF1c2VkIiBvciAiUGF1c2UiDQoJCQlzZWxmLlRleHQgPSBUZXh0DQoNCgkJCS0tLy8gVXBkYXRlIGNvbnNvbGUNCgkJCXNlbGYuQ29uc29sZS5FbmFibGVkID0gRW5hYmxlZA0KCQllbmQsDQoJfSkNCglCdXR0b25zUm93OkV4cGFuZCgpDQoNCgktLS8vIENyZWF0ZSBjb25zb2xlDQoJc2VsZi5Db25zb2xlID0gVGFiOkNvbnNvbGUoew0KCQlUZXh0ID0gIi0tIENyZWF0ZWQgYnkgZGVwc28iLA0KCQlSZWFkT25seSA9IHRydWUsDQoJCUJvcmRlciA9IGZhbHNlLA0KCQlGaWxsID0gdHJ1ZSwNCgkJRW5hYmxlZCA9IHRydWUsDQoJCUF1dG9TY3JvbGwgPSB0cnVlLA0KCQlSaWNoVGV4dCA9IHRydWUsDQoJCU1heExpbmVzID0gNTANCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNvbnNvbGVMb2coLi4uOiBzdHJpbmc/KQ0KCWxvY2FsIENvbnNvbGUgPSBzZWxmLkNvbnNvbGUNCglpZiBub3QgQ29uc29sZSB0aGVuIHJldHVybiBlbmQNCg0KCUNvbnNvbGU6QXBwZW5kVGV4dCguLi4pDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZU9wdGlvbnNUYWIoSW5mb1NlbGVjdG9yKQ0KCWxvY2FsIFRhYiA9IEluZm9TZWxlY3RvcjpDcmVhdGVUYWIoew0KCQlOYW1lID0gIk9wdGlvbnMiDQoJfSkNCg0KCS0tLy8gQWRkIGdsb2JhbCBvcHRpb25zDQoJVGFiOlNlcGFyYXRvcih7VGV4dD0iTG9ncyJ9KQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhUYWIsIHsNCgkJQmFzZSA9IHsNCgkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApLA0KCQkJQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZLA0KCQl9LA0KCQlCdXR0b25zID0gew0KCQkJew0KCQkJCVRleHQgPSAiQ2xlYXIgbG9ncyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFRhYiA9IEFjdGl2ZURhdGEgYW5kIEFjdGl2ZURhdGEuVGFiIG9yIG5pbA0KDQoJCQkJCS0tLy8gUmVtb3ZlIHRoZSBSZW1vdGUgdGFiDQoJCQkJCWlmIFRhYiB0aGVuDQoJCQkJCQlJbmZvU2VsZWN0b3I6UmVtb3ZlVGFiKFRhYikNCgkJCQkJZW5kDQoNCgkJCQkJLS0vLyBDbGVhciBhbGwgbG9nIGVsZW1lbnRzDQoJCQkJCUFjdGl2ZURhdGEgPSBuaWwNCgkJCQkJc2VsZjpDbGVhckxvZ3MoKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDbGVhciBibG9ja3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlQcm9jZXNzOlVwZGF0ZUFsbFJlbW90ZURhdGEoIkJsb2NrZWQiLCBmYWxzZSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ2xlYXIgZXhjbHVkZXMiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlQcm9jZXNzOlVwZGF0ZUFsbFJlbW90ZURhdGEoIkV4Y2x1ZGVkIiwgZmFsc2UpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkgRGlzY29yZCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6U2V0Q2xpcGJvYXJkKCJodHRwczovL2Rpc2NvcmQuZ2cvczluZ21VRFdnYiIpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkgR2l0aHViIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJc2VsZjpTZXRDbGlwYm9hcmQoImh0dHBzOi8vZ2l0aHViLmNvbS9kZXB0aHNvL1NpZ21hLVNweSIpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkVkaXQgU3Bvb2ZzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJc2VsZjpFZGl0RmlsZSgiUmV0dXJuIHNwb29mcy5sdWEiLCB0cnVlLCBmdW5jdGlvbihXaW5kb3csIENvbnRlbnQ6IHN0cmluZykNCgkJCQkJCVdpbmRvdzpDbG9zZSgpDQoJCQkJCQlDb21tQ2hhbm5lbDpGaXJlKCJVcGRhdGVTcG9vZnMiLCBDb250ZW50KQ0KCQkJCQllbmQpDQoJCQkJZW5kLA0KCQkJfQ0KCQl9DQoJfSkNCg0KCS0tLy8gRmxhZyBvcHRpb25zDQoJVGFiOlNlcGFyYXRvcih7VGV4dD0iU2V0dGluZ3MifSkNCglzZWxmOkNyZWF0ZUVsZW1lbnRzKFRhYiwgRmxhZ3M6R2V0RmxhZ3MoKSkNCg0KCXNlbGY6QWRkRGV0YWlsc1NlY3Rpb24oVGFiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkFkZERldGFpbHNTZWN0aW9uKE9wdGlvbnNUYWIpDQoJT3B0aW9uc1RhYjpTZXBhcmF0b3Ioe1RleHQ9IkluZm9ybWF0aW9uIn0pDQoJT3B0aW9uc1RhYjpCdWxsZXRUZXh0KHsNCgkJUm93cyA9IHsNCgkJCSJTaWdtYSBzcHkgLSBXcml0dGVuIGJ5IGRlcHNvISIsDQoJCQkiTGlicmFyaWVzOiBSb2Jsb3gtUGFyc2VyLCBEZWFyLVJlR3VpIiwNCgkJCSJUaGFuayB5b3Ugc3luLmx1YSBmb3Igc3VnZ2VzdGluZyBJIG1ha2UgdGhpcyINCgkJfQ0KCX0pDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gTWFrZUFjdGl2ZURhdGFDYWxsYmFjayhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIGZ1bmN0aW9uKC4uLikNCgkJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiByZXR1cm4gZW5kDQoJCXJldHVybiBBY3RpdmVEYXRhW05hbWVdKEFjdGl2ZURhdGEsIC4uLikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlRWRpdG9yVGFiKEluZm9TZWxlY3RvcikNCglsb2NhbCBEZWZhdWx0ID0gc2VsZi5EZWZhdWx0RWRpdG9yQ29udGVudA0KCWxvY2FsIFN5bnRheENvbG9ycyA9IENvbmZpZy5TeW50YXhDb2xvcnMNCg0KCS0tLy8gQ3JlYXRlIHRhYg0KCWxvY2FsIEVkaXRvclRhYiA9IEluZm9TZWxlY3RvcjpDcmVhdGVUYWIoew0KCQlOYW1lID0gIkVkaXRvciINCgl9KQ0KDQoJLS0vLyBJREUNCglsb2NhbCBDb2RlRWRpdG9yID0gRWRpdG9yVGFiOkNvZGVFZGl0b3Ioew0KCQlGaWxsID0gdHJ1ZSwNCgkJRWRpdGFibGUgPSB0cnVlLA0KCQlGb250U2l6ZSA9IDEzLA0KCQlDb2xvcnMgPSBTeW50YXhDb2xvcnMsDQoJCUZvbnRGYWNlID0gVGV4dEZvbnQsDQoJCVRleHQgPSBEZWZhdWx0DQoJfSkNCg0KCS0tLy8gQnV0dG9ucw0KCWxvY2FsIEJ1dHRvbnNSb3cgPSBFZGl0b3JUYWI6Um93KCkNCglzZWxmOkNyZWF0ZUJ1dHRvbnMoQnV0dG9uc1Jvdywgew0KCQlOb1RhYmxlID0gdHJ1ZSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCQlzZWxmOlNldENsaXBib2FyZChTY3JpcHQpDQoJCQkJZW5kDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiUnVuIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJbG9jYWwgRnVuYywgRXJyb3IgPSBsb2Fkc3RyaW5nKFNjcmlwdCwgIlNpZ21hU3B5LVVTRVJTQ1JJUFQiKQ0KDQoJCQkJCS0tLy8gU3ludGF4IGNoZWNrDQoJCQkJCWlmIG5vdCBGdW5jIHRoZW4NCgkJCQkJCXNlbGY6U2hvd01vZGFsKHsiRXJyb3IgcnVubmluZyBzY3JpcHQhXG4iLCBFcnJvcn0pDQoJCQkJCQlyZXR1cm4NCgkJCQkJZW5kDQoNCgkJCQkJRnVuYygpDQoJCQkJZW5kDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiR2V0IHJldHVybiIsDQoJCQkJQ2FsbGJhY2sgPSBNYWtlQWN0aXZlRGF0YUNhbGxiYWNrKCJHZXRSZXR1cm4iKQ0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlNjcmlwdCIsDQoJCQkJQ2FsbGJhY2sgPSBNYWtlQWN0aXZlRGF0YUNhbGxiYWNrKCJTY3JpcHRPcHRpb25zIikNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJCdWlsZCIsDQoJCQkJQ2FsbGJhY2sgPSBNYWtlQWN0aXZlRGF0YUNhbGxiYWNrKCJCdWlsZFNjcmlwdCIpDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiUG9wLW91dCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJCWxvY2FsIFRpbGUgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLlRhc2sgb3IgIlNpZ21hIFNweSINCgkJCQkJc2VsZjpNYWtlRWRpdG9yUG9wb3V0V2luZG93KFNjcmlwdCwgew0KCQkJCQkJVGl0bGUgPSBUaWxlDQoJCQkJCX0pDQoJCQkJZW5kDQoJCQl9LA0KCQl9DQoJfSkNCgkNCglzZWxmLkNvZGVFZGl0b3IgPSBDb2RlRWRpdG9yDQplbmQNCg0KZnVuY3Rpb24gVWk6U2hvdWxkRm9jdXMoVGFiKTogYm9vbGVhbg0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoJbG9jYWwgQWN0aXZlVGFiID0gSW5mb1NlbGVjdG9yLkFjdGl2ZVRhYg0KDQoJLS0vLyBJZiB0aGVyZSBpcyBhbiBlbXB0eSB0YWINCglpZiBub3QgQWN0aXZlVGFiIHRoZW4NCgkJcmV0dXJuIHRydWUNCgllbmQNCg0KCXJldHVybiBJbmZvU2VsZWN0b3I6Q29tcGFyZVRhYnMoQWN0aXZlVGFiLCBUYWIpDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhDb250ZW50OiBzdHJpbmcsIFdpbmRvd0NvbmZpZzogdGFibGUpDQoJbG9jYWwgV2luZG93ID0gc2VsZjpDcmVhdGVXaW5kb3coV2luZG93Q29uZmlnKQ0KCWxvY2FsIEJ1dHRvbnMgPSBXaW5kb3dDb25maWcuQnV0dG9ucyBvciB7fQ0KCWxvY2FsIENvbG9ycyA9IENvbmZpZy5TeW50YXhDb2xvcnMNCg0KCWxvY2FsIENvZGVFZGl0b3IgPSBXaW5kb3c6Q29kZUVkaXRvcih7DQoJCVRleHQgPSBDb250ZW50LA0KCQlFZGl0YWJsZSA9IHRydWUsDQoJCUZpbGwgPSB0cnVlLA0KCQlGb250U2l6ZSA9IDEzLA0KCQlDb2xvcnMgPSBDb2xvcnMsDQoJCUZvbnRGYWNlID0gVGV4dEZvbnQNCgl9KQ0KDQoJLS0vLyBEZWZhdWx0IGJ1dHRvbnMNCgl0YWJsZS5pbnNlcnQoQnV0dG9ucywgew0KCQlUZXh0ID0gIkNvcHkiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQlzZWxmOlNldENsaXBib2FyZChTY3JpcHQpDQoJCWVuZA0KCX0pDQoNCgktLS8vIEJ1dHRvbnMNCglsb2NhbCBCdXR0b25zUm93ID0gV2luZG93OlJvdygpDQoJc2VsZjpDcmVhdGVCdXR0b25zKEJ1dHRvbnNSb3csIHsNCgkJTm9UYWJsZSA9IHRydWUsDQoJCUJ1dHRvbnMgPSBCdXR0b25zDQoJfSkNCg0KCVdpbmRvdzpDZW50ZXIoKQ0KCXJldHVybiBDb2RlRWRpdG9yLCBXaW5kb3cNCmVuZA0KDQpmdW5jdGlvbiBVaTpFZGl0RmlsZShGaWxlUGF0aDogc3RyaW5nLCBJbkZvbGRlcjogYm9vbGVhbiwgT25TYXZlRnVuYzogKCh0YWJsZSwgc3RyaW5nKSAtPiBuaWwpPykNCglsb2NhbCBGb2xkZXIgPSBGaWxlcy5Gb2xkZXJOYW1lDQoJbG9jYWwgQ29kZUVkaXRvciwgV2luZG93DQoNCgktLS8vIFJlbGF0aXZlIHRvIFNpZ21hIFNweSBmb2xkZXINCglpZiBJbkZvbGRlciB0aGVuDQoJCUZpbGVQYXRoID0gYHtGb2xkZXJ9L3tGaWxlUGF0aH1gDQoJZW5kDQoNCgktLS8vIEdldCBmaWxlIGNvbnRlbnQNCglsb2NhbCBDb250ZW50ID0gcmVhZGZpbGUoRmlsZVBhdGgpDQoJQ29udGVudCA9IENvbnRlbnQ6Z3N1YigiXHJcbiIsICJcbiIpDQoJDQoJbG9jYWwgQnV0dG9ucyA9IHsNCgkJew0KCQkJVGV4dCA9ICJTYXZlIiwNCgkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJbG9jYWwgU3VjY2VzcywgRXJyb3IgPSBsb2Fkc3RyaW5nKFNjcmlwdCwgIlNpZ21hU3B5LUVkaXRvciIpDQoNCgkJCQktLS8vIFN5bnRheCBjaGVjaw0KCQkJCWlmIG5vdCBTdWNjZXNzIHRoZW4NCgkJCQkJc2VsZjpTaG93TW9kYWwoeyJFcnJvciBzYXZpbmcgZmlsZSFcbiIsIEVycm9yfSkNCgkJCQkJcmV0dXJuDQoJCQkJZW5kDQoJCQkJDQoJCQkJLS0vLyBTYXZlIGNvbnRlbnRzDQoJCQkJd3JpdGVmaWxlKEZpbGVQYXRoLCBTY3JpcHQpDQoNCgkJCQktLS8vIEludm9rZSBvbiBzYXZlIGZ1bmN0aW9uDQoJCQkJaWYgT25TYXZlRnVuYyB0aGVuDQoJCQkJCU9uU2F2ZUZ1bmMoV2luZG93LCBTY3JpcHQpDQoJCQkJZW5kDQoJCQllbmQNCgkJfQ0KCX0NCg0KCS0tLy8gQ3JlYXRlIEVkaXRvciBXaW5kb3cNCglDb2RlRWRpdG9yLCBXaW5kb3cgPSBzZWxmOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coQ29udGVudCwgew0KCQlUaXRsZSA9IGBFZGl0aW5nOiB7RmlsZVBhdGh9YCwNCgkJQnV0dG9ucyA9IEJ1dHRvbnMNCgl9KQ0KZW5kDQoNCnR5cGUgTWVudU9wdGlvbnMgPSB7DQoJW3N0cmluZ106IChHdWlCdXR0b24sIC4uLmFueSkgLT4gbmlsDQp9DQpmdW5jdGlvbiBVaTpNYWtlQnV0dG9uTWVudShCdXR0b246IEluc3RhbmNlLCBVbnBhY2s6IHRhYmxlLCBPcHRpb25zOiBNZW51T3B0aW9ucykNCglsb2NhbCBXaW5kb3cgPSBzZWxmLldpbmRvdw0KCWxvY2FsIFBvcHVwID0gV2luZG93OlBvcHVwQ2FudmFzKHsNCgkJUmVsYXRpdmVUbyA9IEJ1dHRvbiwNCgkJTWF4U2l6ZVggPSA1MDAsDQoJfSkNCg0KCS0tLy8gQ3JlYXRlIFNlbGVjdGFibGVzIGZvciBzdHJpbmcsIGZ1bmN0aW9uDQoJZm9yIE5hbWUsIEZ1bmMgaW4gT3B0aW9ucyBkbw0KCQkgUG9wdXA6U2VsZWN0YWJsZSh7DQoJCQlUZXh0ID0gTmFtZSwNCgkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCUZ1bmMoUHJvY2VzczpVbnBhY2soVW5wYWNrKSkNCgkJCWVuZCwNCgkJfSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpSZW1vdmVQcmV2aW91c1RhYihUaXRsZTogc3RyaW5nKTogYm9vbGVhbg0KCS0tLy8gTm8gcHJldmlvdXMgdGFicw0KCWlmIG5vdCBBY3RpdmVEYXRhIHRoZW4gDQoJCXJldHVybiBmYWxzZSANCgllbmQNCg0KCS0tLy8gVGFiU2VsZWN0b3INCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBzZWxmLkluZm9TZWxlY3Rvcg0KDQoJLS0vLyBQcmV2aW91cyBlbGVtZW50cw0KCWxvY2FsIFByZXZpb3VzVGFiID0gQWN0aXZlRGF0YS5UYWINCglsb2NhbCBQcmV2aW91c1NlbGVjdGFibGUgPSBBY3RpdmVEYXRhLlNlbGVjdGFibGUNCg0KCS0tLy8gUmVtb3ZlIHByZXZpb3VzIHRhYiBhbmQgc2V0IHNlbGVjdGFibGUgZm9jdXMNCglsb2NhbCBUYWJGb2N1c2VkID0gc2VsZjpTaG91bGRGb2N1cyhQcmV2aW91c1RhYikNCglJbmZvU2VsZWN0b3I6UmVtb3ZlVGFiKFByZXZpb3VzVGFiKQ0KCVByZXZpb3VzU2VsZWN0YWJsZTpTZXRTZWxlY3RlZChmYWxzZSkNCg0KCS0tLy8gQ3JlYXRlIG5ldyB0YWINCglyZXR1cm4gVGFiRm9jdXNlZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOk1ha2VUYWJsZUhlYWRlcnMoVGFibGUsIFJvd3M6IHRhYmxlKQ0KCWxvY2FsIEhlYWRlclJvdyA9IFRhYmxlOkhlYWRlclJvdygpDQoJZm9yIF8sIENhdGFnb3J5IGluIFJvd3MgZG8NCgkJbG9jYWwgQ29sdW1uID0gSGVhZGVyUm93Ok5leHRDb2x1bW4oKQ0KCQlDb2x1bW46TGFiZWwoe1RleHQ9Q2F0YWdvcnl9KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkRlY29tcGlsZShFZGl0b3I6IHRhYmxlLCBTY3JpcHQ6IFNjcmlwdCkNCglsb2NhbCBIZWFkZXIgPSAiLS1CT09JSUlJIFRISVMgSVMgU08gVFVGRiBGTElQUFkgU0tJQklESSBBVVJBIChTSUdNQSBTUFkpIg0KCUVkaXRvcjpTZXRUZXh0KCItLURlY29tcGlsaW5nLi4uICs5OTk5OTk5IEFVUkEgKG1hbmdvIHBob25rKSIpDQoNCgktLS8vIERlY29tcGlsZSBzY3JpcHQNCglsb2NhbCBEZWNvbXBpbGVkLCBJc0Vycm9yID0gUHJvY2VzczpEZWNvbXBpbGUoU2NyaXB0KQ0KDQoJLS0vLyBBZGQgaGVhZGVyIGZvciBzdWNjZXNzZnVsIGRlY29tcGlsYXRpb25zDQoJaWYgbm90IElzRXJyb3IgdGhlbg0KCQlEZWNvbXBpbGVkID0gYHtIZWFkZXJ9XG57RGVjb21waWxlZH1gDQoJZW5kDQoNCglFZGl0b3I6U2V0VGV4dChEZWNvbXBpbGVkKQ0KZW5kDQoNCnR5cGUgRGlzcGxheVRhYmxlQ29uZmlnID0gew0KCVJvd3M6IHRhYmxlLA0KCUZsYWdzOiB0YWJsZT8sDQoJVG9EaXNwbGF5OiB0YWJsZSwNCglUYWJsZTogdGFibGUNCn0NCmZ1bmN0aW9uIFVpOkRpc3BsYXlUYWJsZShQYXJlbnQsIENvbmZpZzogRGlzcGxheVRhYmxlQ29uZmlnKTogdGFibGUNCgktLS8vIENvbmZpZ3VyYXRpb24NCglsb2NhbCBSb3dzID0gQ29uZmlnLlJvd3MNCglsb2NhbCBGbGFncyA9IENvbmZpZy5GbGFncw0KCWxvY2FsIERhdGFUYWJsZSA9IENvbmZpZy5UYWJsZQ0KCWxvY2FsIFRvRGlzcGxheSA9IENvbmZpZy5Ub0Rpc3BsYXkNCg0KCUZsYWdzLk1heENvbHVtbnMgPSAjUm93cw0KDQoJLS0vLyBDcmVhdGUgdGFibGUNCglsb2NhbCBUYWJsZSA9IFBhcmVudDpUYWJsZShGbGFncykNCg0KCS0tLy8gVGFibGUgaGVhZGVycw0KCXNlbGY6TWFrZVRhYmxlSGVhZGVycyhUYWJsZSwgUm93cykNCg0KCS0tLy8gVGFibGUgbGF5b3V0DQoJZm9yIFJvd0luZGV4LCBOYW1lIGluIFRvRGlzcGxheSBkbw0KCQlsb2NhbCBSb3cgPSBUYWJsZTpSb3coKQ0KCQkNCgkJLS0vLyBDcmVhdGUgQ29sdW1ucw0KCQlmb3IgQ291bnQsIENhdGFnb3J5IGluIFJvd3MgZG8NCgkJCWxvY2FsIENvbHVtbiA9IFJvdzpOZXh0Q29sdW1uKCkNCgkJCQ0KCQkJLS0vLyBWYWx1ZSB0ZXh0DQoJCQlsb2NhbCBWYWx1ZSA9IENhdGFnb3J5ID09ICJOYW1lIiBhbmQgTmFtZSBvciBEYXRhVGFibGVbTmFtZV0NCgkJCWlmIG5vdCBWYWx1ZSB0aGVuIGNvbnRpbnVlIGVuZA0KDQoJCQktLS8vIENyZWF0ZSBmaWx0ZXJlZCBsYWJlbA0KCQkJbG9jYWwgU3RyaW5nID0gc2VsZjpGaWx0ZXJOYW1lKGB7VmFsdWV9YCwgMTUwKQ0KCQkJQ29sdW1uOkxhYmVsKHtUZXh0PVN0cmluZ30pDQoJCWVuZA0KCWVuZA0KDQoJcmV0dXJuIFRhYmxlDQplbmQNCg0KZnVuY3Rpb24gVWk6U2V0Rm9jdXNlZFJlbW90ZShEYXRhKQ0KCS0tLy8gVW5wYWNrIHJlbW90ZSBkYXRhDQoJbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KCWxvY2FsIElzUmVjZWl2ZSA9IERhdGEuSXNSZWNlaXZlDQoJbG9jYWwgU2NyaXB0ID0gRGF0YS5DYWxsaW5nU2NyaXB0DQoJbG9jYWwgQ2xhc3NEYXRhID0gRGF0YS5DbGFzc0RhdGENCglsb2NhbCBIZWFkZXJEYXRhID0gRGF0YS5IZWFkZXJEYXRhDQoJbG9jYWwgVmFsdWVTd2FwcyA9IERhdGEuVmFsdWVTd2Fwcw0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCglsb2NhbCBJZCA9IERhdGEuSWQNCg0KCS0tLy8gRmxhZ3MNCglsb2NhbCBUYWJsZUFyZ3MgPSBGbGFnczpHZXRGbGFnVmFsdWUoIlRhYmxlQXJncyIpDQoJbG9jYWwgTm9WYXJpYWJsZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIk5vVmFyaWFibGVzIikNCg0KCS0tLy8gVW5wYWNrIGluZm8NCglsb2NhbCBSZW1vdGVEYXRhID0gUHJvY2VzczpHZXRSZW1vdGVEYXRhKElkKQ0KCWxvY2FsIElzUmVtb3RlRnVuY3Rpb24gPSBDbGFzc0RhdGEuSXNSZW1vdGVGdW5jdGlvbg0KCWxvY2FsIFJlbW90ZU5hbWUgPSBzZWxmOkZpbHRlck5hbWUoYHtSZW1vdGV9YCwgNTApDQoNCgktLS8vIFVJIGRhdGENCglsb2NhbCBDb2RlRWRpdG9yID0gc2VsZi5Db2RlRWRpdG9yDQoJbG9jYWwgVG9EaXNwbGF5ID0gc2VsZi5EaXNwbGF5UmVtb3RlSW5mbw0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoNCglsb2NhbCBUYWJGb2N1c2VkID0gc2VsZjpSZW1vdmVQcmV2aW91c1RhYigpDQoJbG9jYWwgVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSBzZWxmOkZpbHRlck5hbWUoYFJlbW90ZToge1JlbW90ZU5hbWV9YCwgNTApLA0KCQlGb2N1c2VkID0gVGFiRm9jdXNlZA0KCX0pDQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyDQoJbG9jYWwgTW9kdWxlID0gR2VuZXJhdGlvbjpOZXdQYXJzZXIoew0KCQlOb1ZhcmlhYmxlcyA9IE5vVmFyaWFibGVzDQoJfSkNCglsb2NhbCBQYXJzZXIgPSBNb2R1bGUuUGFyc2VyDQoJbG9jYWwgRm9ybWF0dGVyID0gTW9kdWxlLkZvcm1hdHRlcg0KCUZvcm1hdHRlcjpTZXRWYWx1ZVN3YXBzKFZhbHVlU3dhcHMpDQoNCgktLS8vIFNldCB0aGlzIGxvZyB0byBiZSBzZWxlY3RlZA0KCUFjdGl2ZURhdGEgPSBEYXRhDQoJRGF0YS5UYWIgPSBUYWINCglEYXRhLlNlbGVjdGFibGU6U2V0U2VsZWN0ZWQodHJ1ZSkNCg0KCWxvY2FsIGZ1bmN0aW9uIFNldElERVRleHQoQ29udGVudDogc3RyaW5nLCBUYXNrOiBzdHJpbmc/KQ0KCQlEYXRhLlRhc2sgPSBUYXNrIG9yICJTaWdtYSBTcHkiDQoJCUNvZGVFZGl0b3I6U2V0VGV4dChDb250ZW50KQ0KCWVuZA0KCWxvY2FsIGZ1bmN0aW9uIERhdGFDb25uZWN0aW9uKE5hbWUsIC4uLikNCgkJbG9jYWwgQXJncyA9IHsuLi59DQoJCXJldHVybiBmdW5jdGlvbigpDQoJCQlyZXR1cm4gRGF0YVtOYW1lXShEYXRhLCBQcm9jZXNzOlVucGFjayhBcmdzKSkNCgkJZW5kDQoJZW5kDQoJbG9jYWwgZnVuY3Rpb24gU2NyaXB0Q2hlY2soU2NyaXB0LCBOb01pc3NpbmdDaGVjazogYm9vbGVhbik6IGJvb2xlYW4/DQoJCS0tLy8gUmVqZWN0IGNsaWVudCBldmVudHMNCgkJaWYgSXNSZWNlaXZlIHRoZW4gDQoJCQlVaTpTaG93TW9kYWwoew0KCQkJCSJSZWNpZXZlcyBkbyBub3QgaGF2ZSBhIHNjcmlwdCBiZWNhdXNlIGl0J3MgYSBDb25uZWN0aW9uIg0KCQkJfSkNCgkJCXJldHVybiANCgkJZW5kDQoNCgkJLS0vLyBDaGVjayBpZiBzY3JpcHQgZXhpc3RzDQoJCWlmIG5vdCBTY3JpcHQgYW5kIG5vdCBOb01pc3NpbmdDaGVjayB0aGVuIA0KCQkJVWk6U2hvd01vZGFsKHsiVGhlIFNjcmlwdCBoYXMgYmVlbiBkZXN0cm95ZWQgYnkgdGhlIGdhbWUgKC05OTk5OTk5IEFVUkEpIn0pDQoJCQlyZXR1cm4NCgkJZW5kDQoNCgkJcmV0dXJuIHRydWUNCgllbmQNCg0KCS0tLy8gRnVuY3Rpb25zDQoJZnVuY3Rpb24gRGF0YTpTY3JpcHRPcHRpb25zKEJ1dHRvbjogR3VpQnV0dG9uKQ0KCQlVaTpNYWtlQnV0dG9uTWVudShCdXR0b24sIHtzZWxmfSwgew0KCQkJWyJDYWxsZXIgSW5mbyJdID0gRGF0YUNvbm5lY3Rpb24oIkdlbmVyYXRlSW5mbyIpLA0KCQkJWyJEZWNvbXBpbGUiXSA9IERhdGFDb25uZWN0aW9uKCJEZWNvbXBpbGUiLCAiU291cmNlU2NyaXB0IiksDQoJCQlbIkRlY29tcGlsZSBDYWxsaW5nIl0gPSBEYXRhQ29ubmVjdGlvbigiRGVjb21waWxlIiwgIkNhbGxpbmdTY3JpcHQiKSwNCgkJCVsiUmVwZWF0IENhbGwiXSA9IERhdGFDb25uZWN0aW9uKCJSZXBlYXRDYWxsIiksDQoJCQlbIlNhdmUgQnl0ZWNvZGUiXSA9IERhdGFDb25uZWN0aW9uKCJTYXZlQnl0ZWNvZGUiKSwNCgkJfSkNCgllbmQNCglmdW5jdGlvbiBEYXRhOkJ1aWxkU2NyaXB0KEJ1dHRvbjogR3VpQnV0dG9uKQ0KCQlVaTpNYWtlQnV0dG9uTWVudShCdXR0b24sIHtzZWxmfSwgew0KCQkJWyJDYWxsIFJlbW90ZSJdID0gRGF0YUNvbm5lY3Rpb24oIk1ha2VTY3JpcHQiLCAiUmVtb3RlIiksDQoJCQlbIkJsb2NrIFJlbW90ZSJdID0gRGF0YUNvbm5lY3Rpb24oIk1ha2VTY3JpcHQiLCAiQmxvY2siKSwNCgkJCVsiUmVwZWF0IEZvciJdID0gRGF0YUNvbm5lY3Rpb24oIk1ha2VTY3JpcHQiLCAiUmVwZWF0IiksDQoJCQlbIlNwYW0gUmVtb3RlIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJTcGFtIikNCgkJfSkNCgllbmQNCglmdW5jdGlvbiBEYXRhOlNhdmVCeXRlY29kZSgpDQoJCS0tLy8gUHJvYmxlbSBjaGVjaw0KCQlpZiBub3QgU2NyaXB0Q2hlY2soU2NyaXB0LCB0cnVlKSB0aGVuIHJldHVybiBlbmQNCg0KCQktLS8vIGdldHNjcmlwdGJ5dGVjb2RlDQogICAgCWxvY2FsIFN1Y2Nlc3MsIEJ5dGVjb2RlID0gcGNhbGwoZ2V0c2NyaXB0Ynl0ZWNvZGUsIFNjcmlwdCkNCgkJaWYgbm90IFN1Y2Nlc3MgdGhlbg0KCQkJVWk6U2hvd01vZGFsKHsiRmFpbGVkIHRvIGdldCBTY3JpcHRlIGJ5dGVjb2RlICgtOTk5OTk5OSBBVVJBKSJ9KQ0KCQkJcmV0dXJuDQoJCWVuZA0KDQoJCS0tLy8gU2F2ZSBmaWxlDQoJCWxvY2FsIFBhdGhCYXNlID0gYHtTY3JpcHR9ICVzLnR4dGANCgkJbG9jYWwgRmlsZVBhdGggPSBHZW5lcmF0aW9uOlRpbWVTdGFtcEZpbGUoUGF0aEJhc2UpDQoJCXdyaXRlZmlsZShGaWxlUGF0aCwgQnl0ZWNvZGUpDQoNCgkJVWk6U2hvd01vZGFsKHsiU2F2ZWQgYnl0ZWNvZGUgdG8iLCBGaWxlUGF0aH0pDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpNYWtlU2NyaXB0KFNjcmlwdFR5cGU6IHN0cmluZykNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpSZW1vdGVTY3JpcHQoTW9kdWxlLCBzZWxmLCBTY3JpcHRUeXBlKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYEVkaXRpbmc6IHtSZW1vdGVOYW1lfS5sdWFgKQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6UmVwZWF0Q2FsbCgpDQoJCWxvY2FsIFNpZ25hbCA9IEhvb2s6SW5kZXgoUmVtb3RlLCBNZXRob2QpDQoNCgkJaWYgSXNSZWNlaXZlIHRoZW4NCgkJCWZpcmVzaWduYWwoU2lnbmFsLCBQcm9jZXNzOlVucGFjayhBcmdzKSkNCgkJZWxzZQ0KCQkJU2lnbmFsKFJlbW90ZSwgUHJvY2VzczpVbnBhY2soQXJncykpDQoJCWVuZA0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6R2V0UmV0dXJuKCkNCgkJbG9jYWwgUmV0dXJuVmFsdWVzID0gc2VsZi5SZXR1cm5WYWx1ZXMNCg0KCQktLS8vIEVycm9yIG1lc3NhZ2VzDQoJCWlmIG5vdCBJc1JlbW90ZUZ1bmN0aW9uIHRoZW4NCgkJCVVpOlNob3dNb2RhbCh7IlRoZSBSZW1vdGUgaXMgbm90IGEgUmVtb3RlIEZ1bmN0aW9uICgtOTk5OTk5OSBBVVJBKSJ9KQ0KCQkJcmV0dXJuDQoJCWVuZA0KCQlpZiBub3QgUmV0dXJuVmFsdWVzIHRoZW4NCgkJCVVpOlNob3dNb2RhbCh7Ik5vIHJldHVybiB2YWx1ZXMgKC05OTk5OTk5IEFVUkEpIn0pDQoJCQlyZXR1cm4NCgkJZW5kDQoNCgkJLS0vLyBHZW5lcmF0ZSBzY3JpcHQNCgkJbG9jYWwgU2NyaXB0ID0gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIFJldHVyblZhbHVlcykNCgkJU2V0SURFVGV4dChTY3JpcHQsIGBSZXR1cm4gVmFsdWVzIGZvcjoge1JlbW90ZU5hbWV9YCkNCgllbmQNCglmdW5jdGlvbiBEYXRhOkdlbmVyYXRlSW5mbygpDQoJCS0tLy8gUHJvYmxlbSBjaGVjaw0KCQlpZiBub3QgU2NyaXB0Q2hlY2sobmlsLCB0cnVlKSB0aGVuIHJldHVybiBlbmQNCg0KCQktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCQlsb2NhbCBTY3JpcHQgPSBHZW5lcmF0aW9uOkFkdmFuY2VkSW5mbyhNb2R1bGUsIHNlbGYpDQoJCVNldElERVRleHQoU2NyaXB0LCBgQWR2YW5jZWQgSW5mbyBmb3I6IHtSZW1vdGVOYW1lfWApDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpEZWNvbXBpbGUoV2hpY2hTY3JpcHQ6IHN0cmluZykNCgkJbG9jYWwgRGVjb21waWxlUG9wb3V0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJEZWNvbXBpbGVQb3BvdXQiKQ0KCQlsb2NhbCBUb0RlY29tcGlsZSA9IERhdGFbV2hpY2hTY3JpcHRdDQoJCWxvY2FsIEVkaXRvciA9IENvZGVFZGl0b3INCg0KCQktLS8vIFByb2JsZW0gY2hlY2sNCgkJaWYgbm90IFNjcmlwdENoZWNrKFRvRGVjb21waWxlLCB0cnVlKSB0aGVuIHJldHVybiBlbmQNCg0KCQlsb2NhbCBUYXNrID0gVWk6RmlsdGVyTmFtZShgVmlld2luZzoge1RvRGVjb21waWxlfS5sdWFgLCAyMDApDQoJCQ0KCQktLS8vIEF1dG9tYXRpY2FsbHkgUG9wLW91dCB0aGUgZWRpdG9yIGZvciBkZWNvbXBpbGluZyBpZiBlbmFibGVkDQoJCWlmIERlY29tcGlsZVBvcG91dCB0aGVuDQoJCQlFZGl0b3IgPSBVaTpNYWtlRWRpdG9yUG9wb3V0V2luZG93KCIiLCB7DQoJCQkJVGl0bGUgPSBUYXNrDQoJCQl9KQ0KCQllbmQNCg0KCQlVaTpEZWNvbXBpbGUoRWRpdG9yLCBUb0RlY29tcGlsZSkNCgllbmQNCgkNCgktLS8vIFJlbW90ZU9wdGlvbnMNCglzZWxmOkNyZWF0ZU9wdGlvbnNGb3JEaWN0KFRhYiwgUmVtb3RlRGF0YSwgZnVuY3Rpb24oKQ0KCQlQcm9jZXNzOlVwZGF0ZVJlbW90ZURhdGEoSWQsIFJlbW90ZURhdGEpDQoJZW5kKQ0KDQoJLS0vLyBJbnN0YW5jZSBvcHRpb25zDQoJc2VsZjpDcmVhdGVCdXR0b25zKFRhYiwgew0KCQlCYXNlID0gew0KCQkJU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyMCksDQoJCQlBdXRvbWF0aWNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlksDQoJCX0sDQoJCUJ1dHRvbnMgPSB7DQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IHNjcmlwdCBwYXRoIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJU2V0Q2xpcGJvYXJkKFBhcnNlcjpNYWtlUGF0aFN0cmluZyh7DQoJCQkJCQlPYmplY3QgPSBTY3JpcHQsDQoJCQkJCQlOb1ZhcmlhYmxlcyA9IHRydWUNCgkJCQkJfSkpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNvcHkgcmVtb3RlIHBhdGgiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlTZXRDbGlwYm9hcmQoUGFyc2VyOk1ha2VQYXRoU3RyaW5nKHsNCgkJCQkJCU9iamVjdCA9IFJlbW90ZSwNCgkJCQkJCU5vVmFyaWFibGVzID0gdHJ1ZQ0KCQkJCQl9KSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiUmVtb3ZlIGxvZyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCUluZm9TZWxlY3RvcjpSZW1vdmVUYWIoVGFiKQ0KCQkJCQlEYXRhLlNlbGVjdGFibGU6UmVtb3ZlKCkNCgkJCQkJSGVhZGVyRGF0YTpSZW1vdmUoKQ0KCQkJCQlBY3RpdmVEYXRhID0gbmlsDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkR1bXAgbG9ncyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIExvZ3MgPSBIZWFkZXJEYXRhLkVudHJpZXMNCgkJCQkJbG9jYWwgRmlsZVBhdGggPSBHZW5lcmF0aW9uOkR1bXBMb2dzKExvZ3MpDQoJCQkJCXNlbGY6U2hvd01vZGFsKHsiU2F2ZWQgZHVtcCB0byIsIEZpbGVQYXRofSkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiVmlldyBDb25uZWN0aW9ucyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIE1ldGhvZCA9IENsYXNzRGF0YS5SZWNlaXZlWzFdDQoJCQkJCWxvY2FsIFNpZ25hbCA9IFJlbW90ZVtNZXRob2RdDQoJCQkJCXNlbGY6Vmlld0Nvbm5lY3Rpb25zKFJlbW90ZU5hbWUsIFNpZ25hbCkNCgkJCQllbmQsDQoJCQl9DQoJCX0NCgl9KQ0KDQoJLS0vLyBSZW1vdGUgaW5mb3JtYXRpb24gdGFibGUNCglzZWxmOkRpc3BsYXlUYWJsZShUYWIsIHsNCgkJUm93cyA9IHsiTmFtZSIsICJWYWx1ZSJ9LA0KCQlUYWJsZSA9IERhdGEsDQoJCVRvRGlzcGxheSA9IFRvRGlzcGxheSwNCgkJRmxhZ3MgPSB7DQoJCQlCb3JkZXIgPSB0cnVlLA0KCQkJUm93QmFja2dyb3VuZCA9IHRydWUsDQoJCQlNYXhDb2x1bW5zID0gMg0KCQl9DQoJfSkNCgkNCgktLS8vIEFyZ3VtZW50cyB0YWJsZSBzY3JpcHQNCglpZiBUYWJsZUFyZ3MgdGhlbg0KCQlsb2NhbCBQYXJzZWQgPSBHZW5lcmF0aW9uOlRhYmxlU2NyaXB0KE1vZHVsZSwgQXJncykNCgkJU2V0SURFVGV4dChQYXJzZWQsIGBBcmd1bWVudHMgZm9yIHtSZW1vdGVOYW1lfWApDQoJCXJldHVybg0KCWVuZA0KDQoJLS0vLyBSZW1vdGUgY2FsbCBzY3JpcHQNCglEYXRhOk1ha2VTY3JpcHQoIlJlbW90ZSIpDQplbmQNCg0KZnVuY3Rpb24gVWk6Vmlld0Nvbm5lY3Rpb25zKFJlbW90ZU5hbWU6IHN0cmluZywgU2lnbmFsOiBSQlhTY3JpcHRDb25uZWN0aW9uKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KHsNCgkJVGl0bGUgPSBgQ29ubmVjdGlvbnMgZm9yOiB7UmVtb3RlTmFtZX1gLA0KCQlTaXplID0gVURpbTIuZnJvbU9mZnNldCg0NTAsIDI1MCkNCgl9KQ0KDQoJbG9jYWwgVG9EaXNwbGF5ID0gew0KCQkiRW5hYmxlZCIsDQoJCSJMdWFDb25uZWN0aW9uIiwNCgkJIlNjcmlwdCINCgl9DQoNCgktLS8vIEdldCBGaWx0ZXJlZCBjb25uZWN0aW9ucw0KCWxvY2FsIENvbm5lY3Rpb25zID0gUHJvY2VzczpGaWx0ZXJDb25uZWN0aW9ucyhTaWduYWwsIFRvRGlzcGxheSkNCg0KCS0tLy8gVGFibGUNCglsb2NhbCBUYWJsZSA9IFdpbmRvdzpUYWJsZSh7DQoJCUJvcmRlciA9IHRydWUsDQoJCVJvd0JhY2tncm91bmQgPSB0cnVlLA0KCQlNYXhDb2x1bW5zID0gMw0KCX0pDQoNCglsb2NhbCBCdXR0b25zRm9yVmFsdWVzID0gew0KCQlbIlNjcmlwdCJdID0gZnVuY3Rpb24oUm93LCBWYWx1ZSkNCgkJCVJvdzpCdXR0b24oew0KCQkJCVRleHQgPSAiRGVjb21waWxlIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgVGFzayA9IHNlbGY6RmlsdGVyTmFtZShgVmlld2luZzoge1ZhbHVlfS5sdWFgLCAyMDApDQoJCQkJCWxvY2FsIEVkaXRvciA9IHNlbGY6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhuaWwsIHsNCgkJCQkJCVRpdGxlID0gVGFzaw0KCQkJCQl9KQ0KCQkJCQlzZWxmOkRlY29tcGlsZShFZGl0b3IsIFZhbHVlKQ0KCQkJCWVuZA0KCQkJfSkNCgkJZW5kLA0KCQlbIkVuYWJsZWQiXSA9IGZ1bmN0aW9uKFJvdywgRW5hYmxlZCwgQ29ubmVjdGlvbikNCgkJCVJvdzpCdXR0b24oew0KCQkJCVRleHQgPSBFbmFibGVkIGFuZCAiRGlzYWJsZSIgb3IgIkVuYWJsZSIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxmKQ0KCQkJCQlFbmFibGVkID0gbm90IEVuYWJsZWQNCgkJCQkJc2VsZi5UZXh0ID0gRW5hYmxlZCBhbmQgIkRpc2FibGUiIG9yICJFbmFibGUiDQoNCgkJCQkJLS0vLyBFbmFibGUgb3IgZGlzYWJsZSB0aGUgY29ubmVjdGlvbg0KCQkJCQlpZiBFbmFibGVkIHRoZW4NCgkJCQkJCUNvbm5lY3Rpb246RW5hYmxlKCkNCgkJCQkJZWxzZQ0KCQkJCQkJQ29ubmVjdGlvbjpEaXNhYmxlKCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQl9KQ0KCQllbmQNCgl9DQoNCgktLS8vIE1ha2UgaGVhZGVycyBvbiB0aGUgdGFibGUNCglzZWxmOk1ha2VUYWJsZUhlYWRlcnMoVGFibGUsIFRvRGlzcGxheSkNCg0KCWZvciBfLCBDb25uZWN0aW9uIGluIENvbm5lY3Rpb25zIGRvDQoJCWxvY2FsIFJvdyA9IFRhYmxlOlJvdygpDQoNCgkJZm9yIF8sIFByb3BlcnR5IGluIFRvRGlzcGxheSBkbw0KCQkJbG9jYWwgQ29sdW1uID0gUm93Ok5leHRDb2x1bW4oKQ0KCQkJbG9jYWwgQ29sdW1uUm93ID0gQ29sdW1uOlJvdygpDQoNCgkJCWxvY2FsIFZhbHVlID0gQ29ubmVjdGlvbltQcm9wZXJ0eV0NCgkJCWxvY2FsIENhbGxiYWNrID0gQnV0dG9uc0ZvclZhbHVlc1tQcm9wZXJ0eV0NCg0KCQkJLS0vLyBWYWx1ZSBsYWJlbA0KCQkJQ29sdW1uUm93OkxhYmVsKHtUZXh0PWB7VmFsdWV9YH0pDQoNCgkJCS0tLy8gQWRkIGJ1dHRvbnMNCgkJCWlmIENhbGxiYWNrIHRoZW4NCgkJCQlDYWxsYmFjayhDb2x1bW5Sb3csIFZhbHVlLCBDb25uZWN0aW9uKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBDZW50ZXIgV2luZG93DQoJV2luZG93OkNlbnRlcigpDQplbmQNCg0KZnVuY3Rpb24gVWk6R2V0UmVtb3RlSGVhZGVyKERhdGE6IExvZykNCglsb2NhbCBMb2dMaW1pdCA9IHNlbGYuTG9nTGltaXQNCglsb2NhbCBMb2dzID0gc2VsZi5Mb2dzDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCgktLS8vIFJlbW90ZSBpbmZvDQoJbG9jYWwgSWQgPSBEYXRhLklkDQoJbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBSZW1vdGVOYW1lID0gc2VsZjpGaWx0ZXJOYW1lKGB7UmVtb3RlfWAsIDMwKQ0KDQoJLS0vLyBOb1RyZWVOb2Rlcw0KCWxvY2FsIE5vVHJlZU5vZGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1RyZWVOb2RlcyIpDQoNCgktLS8vIENoZWNrIGZvciBleGlzdGluZyBUcmVlTm9kZQ0KCWxvY2FsIEV4aXN0aW5nID0gTG9nc1tJZF0NCglpZiBFeGlzdGluZyB0aGVuIHJldHVybiBFeGlzdGluZyBlbmQNCg0KCS0tLy8gSGVhZGVyIGRhdGENCglsb2NhbCBIZWFkZXJEYXRhID0gewkNCgkJTG9nQ291bnQgPSAwLA0KCQlEYXRhID0gRGF0YSwNCgkJRW50cmllcyA9IHt9DQoJfQ0KDQoJLS0vLyBJbmNyZW1lbnQgdHJlZW5vZGUgY291bnQNCglSZW1vdGVzQ291bnQgKz0gMQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHRyZWVub2RlIGVsZW1lbnQNCglpZiBub3QgTm9UcmVlTm9kZXMgdGhlbg0KCQlIZWFkZXJEYXRhLlRyZWVOb2RlID0gUmVtb3Rlc0xpc3Q6VHJlZU5vZGUoew0KCQkJTGF5b3V0T3JkZXIgPSAtMSAqIFJlbW90ZXNDb3VudCwNCgkJCVRpdGxlID0gUmVtb3RlTmFtZQ0KCQl9KQ0KCWVuZA0KDQoJZnVuY3Rpb24gSGVhZGVyRGF0YTpDaGVja0xpbWl0KCkNCgkJbG9jYWwgRW50cmllcyA9IHNlbGYuRW50cmllcw0KCQlpZiAjRW50cmllcyA8IExvZ0xpbWl0IHRoZW4gcmV0dXJuIGVuZA0KCQkJDQoJCS0tLy8gR2V0IGFuZCByZW1vdmUgbGFzdCBlbGVtZW50DQoJCWxvY2FsIExvZyA9IHRhYmxlLnJlbW92ZShFbnRyaWVzLCAxKQ0KCQlMb2cuU2VsZWN0YWJsZTpSZW1vdmUoKQ0KCWVuZA0KDQoJZnVuY3Rpb24gSGVhZGVyRGF0YTpMb2dBZGRlZChEYXRhKQ0KCQktLS8vIEluY3JlbWVudCBsb2cgY291bnQNCgkJc2VsZi5Mb2dDb3VudCArPSAxDQoJCXNlbGY6Q2hlY2tMaW1pdCgpDQoNCgkJLS0vLyBBZGQgZW50cnkNCgkJbG9jYWwgRW50cmllcyA9IHNlbGYuRW50cmllcw0KCQl0YWJsZS5pbnNlcnQoRW50cmllcywgRGF0YSkNCgkJDQoJCXJldHVybiBzZWxmDQoJZW5kDQoNCglmdW5jdGlvbiBIZWFkZXJEYXRhOlJlbW92ZSgpDQoJCS0tLy8gUmVtb3ZlIFRyZWVOb2RlDQoJCWxvY2FsIFRyZWVOb2RlID0gc2VsZi5UcmVlTm9kZQ0KCQlpZiBUcmVlTm9kZSB0aGVuDQoJCQlUcmVlTm9kZTpSZW1vdmUoKQ0KCQllbmQNCg0KCQktLS8vIENsZWFyIHRhYmxlcyBmcm9tIG1lbW9yeQ0KCQlMb2dzW0lkXSA9IG5pbA0KCQl0YWJsZS5jbGVhcihIZWFkZXJEYXRhKQ0KCWVuZA0KDQoJTG9nc1tJZF0gPSBIZWFkZXJEYXRhDQoJcmV0dXJuIEhlYWRlckRhdGENCmVuZA0KDQpmdW5jdGlvbiBVaTpDbGVhckxvZ3MoKQ0KCWxvY2FsIExvZ3MgPSBzZWxmLkxvZ3MNCglsb2NhbCBSZW1vdGVzTGlzdCA9IHNlbGYuUmVtb3Rlc0xpc3QNCg0KCS0tLy8gQ2xlYXIgYWxsIGVsZW1lbnRzDQoJUmVtb3Rlc0NvdW50ID0gMA0KCVJlbW90ZXNMaXN0OkNsZWFyQ2hpbGRFbGVtZW50cygpDQoNCgktLS8vIENsZWFyIGxvZ3MgZnJvbSBtZW1vcnkNCgl0YWJsZS5jbGVhcihMb2dzKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlF1ZXVlTG9nKERhdGEpDQoJbG9jYWwgTG9nUXVldWUgPSBzZWxmLkxvZ1F1ZXVlDQogICAgdGFibGUuaW5zZXJ0KExvZ1F1ZXVlLCBEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlByb2Nlc3NMb2dRdWV1ZSgpDQoJbG9jYWwgUXVldWUgPSBzZWxmLkxvZ1F1ZXVlDQogICAgaWYgI1F1ZXVlIDw9IDAgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENyZWF0ZSBhIGxvZyBlbGVtZW50IGZvciBlYWNoIGluIHRoZSBRdWV1ZQ0KICAgIGZvciBJbmRleCwgRGF0YSBpbiBuZXh0LCBRdWV1ZSBkbw0KICAgICAgICBzZWxmOkNyZWF0ZUxvZyhEYXRhKQ0KICAgICAgICB0YWJsZS5yZW1vdmUoUXVldWUsIEluZGV4KQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOkJlZ2luTG9nU2VydmljZSgpDQoJY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KCQl3aGlsZSB0cnVlIGRvDQoJCQlzZWxmOlByb2Nlc3NMb2dRdWV1ZSgpDQoJCQl0YXNrLndhaXQoKQ0KCQllbmQNCgllbmQpKCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpGaWx0ZXJOYW1lKE5hbWU6IHN0cmluZywgQ2hhcmFjdGVyTGltaXQ6IG51bWJlcj8pOiBzdHJpbmcNCglsb2NhbCBUcmltbWVkID0gTmFtZTpzdWIoMSwgQ2hhcmFjdGVyTGltaXQgb3IgMjApDQoJbG9jYWwgRmlsdHJlZCA9IFRyaW1tZWQ6Z3N1YigiW1xuXHJdIiwgIiIpDQoJRmlsdHJlZCA9IEdlbmVyYXRpb246TWFrZVByaW50YWJsZShGaWx0cmVkKQ0KDQoJcmV0dXJuIEZpbHRyZWQNCmVuZA0KDQpmdW5jdGlvbiBVaTpDcmVhdGVMb2coRGF0YTogTG9nKQ0KCS0tLy8gVW5wYWNrIGxvZyBkYXRhDQogICAgbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBNZXRob2QgPSBEYXRhLk1ldGhvZA0KICAgIGxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCiAgICBsb2NhbCBJc1JlY2VpdmUgPSBEYXRhLklzUmVjZWl2ZQ0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIFRpbWVzdGFtcCA9IERhdGEuVGltZXN0YW1wDQoJbG9jYWwgSXNFeHBsb2l0ID0gRGF0YS5Jc0V4cGxvaXQNCgkNCglsb2NhbCBJc05pbFBhcmVudCA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiUGFyZW50IikgPT0gbmlsDQoJbG9jYWwgUmVtb3RlRGF0YSA9IFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZCkNCg0KCS0tLy8gUGF1c2VkDQoJbG9jYWwgUGF1c2VkID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJQYXVzZWQiKQ0KCWlmIFBhdXNlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ2hlY2sgY2FsbGVyIChJZ25vcmUgZXhwbG9pdCBjYWxscykNCglsb2NhbCBMb2dFeHBsb2l0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJMb2dFeHBsb2l0IikNCglpZiBub3QgTG9nRXhwbG9pdCBhbmQgSXNFeHBsb2l0IHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBJZ25vcmVOaWwNCglsb2NhbCBJZ25vcmVOaWwgPSBGbGFnczpHZXRGbGFnVmFsdWUoIklnbm9yZU5pbCIpDQoJaWYgSWdub3JlTmlsIGFuZCBJc05pbFBhcmVudCB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gTG9nUmVjaXZlcyBjaGVjaw0KCWxvY2FsIExvZ1JlY2l2ZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIkxvZ1JlY2l2ZXMiKQ0KCWlmIG5vdCBMb2dSZWNpdmVzIGFuZCBJc1JlY2VpdmUgdGhlbiByZXR1cm4gZW5kDQoNCglsb2NhbCBTZWxlY3ROZXdlc3QgPSBGbGFnczpHZXRGbGFnVmFsdWUoIlNlbGVjdE5ld2VzdCIpDQoJbG9jYWwgTm9UcmVlTm9kZXMgPSBGbGFnczpHZXRGbGFnVmFsdWUoIk5vVHJlZU5vZGVzIikNCg0KICAgIC0tLy8gRXhjbHVkZWQgY2hlY2sNCiAgICBpZiBSZW1vdGVEYXRhLkV4Y2x1ZGVkIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBEZXNlcmlhbGl6ZSBhcmd1bWVudHMNCglBcmdzID0gQ29tbXVuaWNhdGlvbjpEZXNlcmlhbGl6ZVRhYmxlKEFyZ3MpDQoNCgktLS8vIERlZXAgY2xvbmUgZGF0YQ0KCWxvY2FsIENsb25lZEFyZ3MgPSBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKEFyZ3MpDQoJRGF0YS5BcmdzID0gQ2xvbmVkQXJncw0KCURhdGEuVmFsdWVTd2FwcyA9IEdlbmVyYXRpb246TWFrZVZhbHVlU3dhcHNUYWJsZShUaW1lc3RhbXApDQoNCgktLS8vIEdlbmVyYXRlIGxvZyB0aXRsZQ0KCWxvY2FsIENvbG9yID0gQ29uZmlnLk1ldGhvZENvbG9yc1tNZXRob2Q6bG93ZXIoKV0NCglsb2NhbCBUZXh0ID0gTm9UcmVlTm9kZXMgYW5kIGB7UmVtb3RlfSB8IHtNZXRob2R9YCBvciBNZXRob2QNCg0KCS0tLy8gRmluZFN0cmluZ0Zvck5hbWUgY2hlY2sNCglsb2NhbCBGaW5kU3RyaW5nID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJGaW5kU3RyaW5nRm9yTmFtZSIpDQoJaWYgRmluZFN0cmluZyB0aGVuDQoJCWZvciBfLCBBcmcgaW4gbmV4dCwgQ2xvbmVkQXJncyBkbw0KCQkJaWYgdHlwZW9mKEFyZykgPT0gInN0cmluZyIgdGhlbg0KCQkJCWxvY2FsIEZpbHRyZWQgPSBzZWxmOkZpbHRlck5hbWUoQXJnKQ0KCQkJCVRleHQgPSBge0ZpbHRyZWR9IHwge1RleHR9YA0KCQkJCWJyZWFrDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCgktLS8vIEZldGNoIEhlYWRlckRhdGEgYnkgdGhlIFJlbW90ZUlEIHVzZWQgZm9yIHN0YWNraW5nDQoJbG9jYWwgSGVhZGVyID0gc2VsZjpHZXRSZW1vdGVIZWFkZXIoRGF0YSkNCglsb2NhbCBSZW1vdGVzTGlzdCA9IHNlbGYuUmVtb3Rlc0xpc3QNCg0KCWxvY2FsIExvZ0NvdW50ID0gSGVhZGVyLkxvZ0NvdW50DQoJbG9jYWwgVHJlZU5vZGUgPSBIZWFkZXIuVHJlZU5vZGUgDQoJbG9jYWwgUGFyZW50ID0gVHJlZU5vZGUgb3IgUmVtb3Rlc0xpc3QNCg0KCS0tLy8gSW5jcmVhc2UgbG9nIGNvdW50IC0gVHJlZU5vZGVzIGFyZSBpbiBHZXRSZW1vdGVIZWFkZXIgZnVuY3Rpb24NCglpZiBOb1RyZWVOb2RlcyB0aGVuDQoJCVJlbW90ZXNDb3VudCArPSAxDQoJCUxvZ0NvdW50ID0gUmVtb3Rlc0NvdW50DQoJZW5kDQoNCiAgICAtLS8vIENyZWF0ZSBmb2N1cyBidXR0b24NCglEYXRhLkhlYWRlckRhdGEgPSBIZWFkZXINCglEYXRhLlNlbGVjdGFibGUgPSBQYXJlbnQ6U2VsZWN0YWJsZSh7DQoJCVRleHQgPSBUZXh0LA0KICAgICAgICBMYXlvdXRPcmRlciA9IC0xICogTG9nQ291bnQsDQoJCVRleHRDb2xvcjMgPSBDb2xvciwNCgkJVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQsDQoJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJc2VsZjpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJCWVuZCwNCiAgICB9KQ0KDQoJSGVhZGVyOkxvZ0FkZGVkKERhdGEpDQoNCgktLS8vIEF1dG8gc2VsZWN0IGNoZWNrDQoJbG9jYWwgR3JvdXBTZWxlY3RlZCA9IEFjdGl2ZURhdGEgYW5kIEFjdGl2ZURhdGEuSGVhZGVyRGF0YSA9PSBIZWFkZXINCglpZiBTZWxlY3ROZXdlc3QgYW5kIEdyb3VwU2VsZWN0ZWQgdGhlbg0KCQlzZWxmOlNldEZvY3VzZWRSZW1vdGUoRGF0YSkNCgllbmQNCmVuZA0KDQpyZXR1cm4gVWk=]]
},Generation={'base64',
[[dHlwZSB0YWJsZSA9IHsNCglbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJTWV0YU1ldGhvZDogc3RyaW5nLA0KCUFyZ3M6IHRhYmxlLA0KCU1ldGhvZDogc3RyaW5nLA0KICAgIFRyYW5zZmVyVHlwZTogc3RyaW5nLA0KCVZhbHVlUmVwbGFjZW1lbnRzOiB0YWJsZSwNCglOb1ZhcmlhYmxlczogYm9vbGVhbj8NCn0NCg0KLS0vLyBNb2R1bGUNCmxvY2FsIEdlbmVyYXRpb24gPSB7DQoJRHVtcEJhc2VOYW1lID0gIlNpZ21hU3B5LUR1bXAgJXMubHVhIiwNCglTY3JpcHRUZW1wbGF0ZXMgPSB7DQoJCVsiUmVtb3RlIl0gPSB7DQoJCQl7IiVSZW1vdGVDYWxsJSJ9DQoJCX0sDQoJCVsiU3BhbSJdID0gew0KCQkJeyJ3aGlsZSB3YWl0KCkgZG8ifSwNCgkJCXsiJVJlbW90ZUNhbGwlIiwgMn0sDQoJCQl7ImVuZCJ9DQoJCX0sDQoJCVsiUmVwZWF0Il0gPSB7DQoJCQl7ImZvciBJbmRleCA9IDEsIDEwIGRvIn0sDQoJCQl7IiVSZW1vdGVDYWxsJSIsIDJ9LA0KCQkJeyJlbmQifQ0KCQl9LA0KCQlbIkJsb2NrIl0gPSB7DQoJCQlbIl9faW5kZXgiXSA9IHsNCgkJCQl7ImxvY2FsIE9sZDsgT2xkID0gaG9va2Z1bmN0aW9uKCVTaWduYWwlLCBmdW5jdGlvbihzZWxmLCAuLi4pIn0sDQoJCQkJeyJpZiBzZWxmID09ICVSZW1vdGUlIHRoZW4iLCAyfSwNCgkJCQl7InJldHVybiIsIDN9LA0KCQkJCXsiZW5kIiwgMn0sDQoJCQkJeyJyZXR1cm4gT2xkKHNlbGYsIC4uLikiLCAyfSwNCgkJCQl7ImVuZCkifQ0KCQkJfSwNCgkJCVsiX19uYW1lY2FsbCJdID0gew0KCQkJCXsibG9jYWwgT2xkOyBPbGQgPSBob29rbWV0YW1ldGhvZChnYW1lLCBcIl9fbmFtZWNhbGxcIiwgZnVuY3Rpb24oc2VsZiwgLi4uKSJ9LA0KCQkJCXsibG9jYWwgTWV0aG9kID0gZ2V0bmFtZWNhbGxtZXRob2QoKSIsIDJ9LA0KCQkJCXsiaWYgc2VsZiA9PSAlUmVtb3RlJSBhbmQgTWV0aG9kID09IFwiJU1ldGhvZCVcIiB0aGVuIiwgMn0sDQoJCQkJeyJyZXR1cm4iLCAzfSwNCgkJCQl7ImVuZCIsIDJ9LA0KCQkJCXsicmV0dXJuIE9sZChzZWxmLCAuLi4pIiwgMn0sDQoJCQkJeyJlbmQpIn0NCgkJCX0sDQoJCQlbIkNvbm5lY3QiXSA9IHsNCgkJCQl7ImZvciBfLCBDb25uZWN0aW9uIGluIGdldGNvbm5lY3Rpb25zKCVTaWduYWwlKSBkbyJ9LA0KCQkJCXsiQ29ubmVjdGlvbjpEaXNhYmxlKCkiLCAyfSwNCgkJCQl7ImVuZCJ9DQoJCQl9DQoJCX0NCgl9DQp9DQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgQ29uZmlnDQpsb2NhbCBIb29rDQpsb2NhbCBQYXJzZXJNb2R1bGUNCmxvY2FsIFRoaXNTY3JpcHQgPSBzY3JpcHQNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGU/KQ0KCWlmIG5vdCBOZXcgdGhlbiByZXR1cm4gZW5kDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpJbml0KERhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIE1vZHVsZXMgPSBEYXRhLk1vZHVsZXMNCglsb2NhbCBDb25maWd1cmF0aW9uID0gTW9kdWxlcy5Db25maWd1cmF0aW9uDQoNCgktLS8vIE1vZHVsZXMNCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KCUhvb2sgPSBNb2R1bGVzLkhvb2sNCgkNCgktLS8vIEltcG9ydCBwYXJzZXINCglsb2NhbCBQYXJzZXJVcmwgPSBDb25maWd1cmF0aW9uLlBhcnNlclVybA0KCXNlbGY6TG9hZFBhcnNlcihQYXJzZXJVcmwpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlUHJpbnRhYmxlKFN0cmluZzogc3RyaW5nKTogc3RyaW5nDQoJbG9jYWwgRm9ybWF0dGVyID0gUGFyc2VyTW9kdWxlLk1vZHVsZXMuRm9ybWF0dGVyDQoJcmV0dXJuIEZvcm1hdHRlcjpNYWtlUHJpbnRhYmxlKFN0cmluZykNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlRpbWVTdGFtcEZpbGUoRmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZw0KCWxvY2FsIFRpbWVTdGFtcCA9IG9zLmRhdGUoIiVZLSVtLSVkXyVILSVNLSVTIikNCglsb2NhbCBGb3JtYXR0ZWQgPSBGaWxlUGF0aDpmb3JtYXQoVGltZVN0YW1wKQ0KCXJldHVybiBGb3JtYXR0ZWQNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOldyaXRlRHVtcChDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcNCglsb2NhbCBEdW1wQmFzZU5hbWUgPSBzZWxmLkR1bXBCYXNlTmFtZQ0KCWxvY2FsIEZpbGVQYXRoID0gc2VsZjpUaW1lU3RhbXBGaWxlKER1bXBCYXNlTmFtZSkNCg0KCS0tLy8gV3JpdGUgdG8gZmlsZQ0KCXdyaXRlZmlsZShGaWxlUGF0aCwgQ29udGVudCkNCg0KCXJldHVybiBGaWxlUGF0aA0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TG9hZFBhcnNlcihNb2R1bGVVcmw6IHN0cmluZykNCglQYXJzZXJNb2R1bGUgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldChNb2R1bGVVcmwpLCAiUGFyc2VyIikoKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZVZhbHVlU3dhcHNUYWJsZSgpOiB0YWJsZQ0KCWxvY2FsIEZvcm1hdHRlciA9IFBhcnNlck1vZHVsZS5Nb2R1bGVzLkZvcm1hdHRlcg0KCXJldHVybiBGb3JtYXR0ZXI6TWFrZVJlcGxhY2VtZW50cygpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpTZXRTd2Fwc0NhbGxiYWNrKENhbGxiYWNrOiAoSW50ZXJmYWNlOiB0YWJsZSkgLT4gKCkpDQoJc2VsZi5Td2Fwc0NhbGxiYWNrID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkdldEJhc2UoTW9kdWxlKTogKHN0cmluZywgYm9vbGVhbikNCgktLWxvY2FsIENvZGUgPSAiLS0gR2VuZXJhdGVkIHdpdGggc2lnbWEgc3B5IEJPSUlJSUlJSUlJICgrOTk5OTk5OSBBVVJBKVxuIg0KCWxvY2FsIENvZGUgPSAiLS0gR2VuZXJhdGVkIHdpdGggU2lnbWEgU3B5IEdpdGh1YjogaHR0cHM6Ly9naXRodWIuY29tL2RlcHRoc28vU2lnbWEtU3B5XG4iDQoNCgktLS8vIEdlbmVyYXRlIHZhcmlhYmxlcyBjb2RlDQoJbG9jYWwgVmFyaWFibGVzID0gTW9kdWxlLlBhcnNlcjpNYWtlVmFyaWFibGVDb2RlKHsNCgkJIlNlcnZpY2VzIiwgIlJlbW90ZSIsICJWYXJpYWJsZXMiDQoJfSkNCg0KCWxvY2FsIE5vVmFyaWFibGVzID0gVmFyaWFibGVzID09ICIiDQoJQ29kZSAuLj0gVmFyaWFibGVzDQoNCglyZXR1cm4gQ29kZSwgTm9WYXJpYWJsZXMNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkdldFN3YXBzKCkNCglsb2NhbCBGdW5jID0gc2VsZi5Td2Fwc0NhbGxiYWNrDQoJbG9jYWwgU3dhcHMgPSB7fQ0KDQoJbG9jYWwgSW50ZXJmYWNlID0ge30NCglmdW5jdGlvbiBJbnRlcmZhY2U6QWRkU3dhcChPYmplY3Q6IEluc3RhbmNlLCBEYXRhOiB0YWJsZSkNCgkJaWYgbm90IE9iamVjdCB0aGVuIHJldHVybiBlbmQNCgkJU3dhcHNbT2JqZWN0XSA9IERhdGENCgllbmQNCg0KCS0tLy8gSW52b2tlIEdldFN3YXBzIGZ1bmN0aW9uDQoJRnVuYyhJbnRlcmZhY2UpDQoNCglyZXR1cm4gU3dhcHMNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlBpY2tWYXJpYWJsZU5hbWUoKTogc3RyaW5nDQoJbG9jYWwgTmFtZXMgPSBDb25maWcuVmFyaWFibGVOYW1lcw0KCXJldHVybiBOYW1lc1ttYXRoLnJhbmRvbSgxLCAjTmFtZXMpXQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TmV3UGFyc2VyKEV4dHJhOiB0YWJsZT8pDQoJbG9jYWwgVmFyaWFibGVOYW1lID0gc2VsZjpQaWNrVmFyaWFibGVOYW1lKCkNCglsb2NhbCBTd2FwcyA9IHNlbGY6R2V0U3dhcHMoKQ0KDQoJbG9jYWwgQ29uZmlndXJhdGlvbiA9IHsNCgkJVmFyaWFibGVCYXNlID0gVmFyaWFibGVOYW1lLA0KCQlTd2FwcyA9IFN3YXBzLA0KCQlJbmRleEZ1bmMgPSBmdW5jdGlvbiguLi4pDQoJCQlyZXR1cm4gSG9vazpJbmRleCguLi4pDQoJCWVuZCwNCgl9DQoNCgktLS8vIE1lcmdlIGV4dHJhIGNvbmZpZ3VyYXRpb24NCglNZXJnZShDb25maWd1cmF0aW9uLCBFeHRyYSkNCg0KCS0tLy8gQ3JlYXRlIG5ldyBwYXJzZXIgaW5zdGFuY2UNCglyZXR1cm4gUGFyc2VyTW9kdWxlOk5ldyhDb25maWd1cmF0aW9uKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246SW5kZW50KEluZGVudFN0cmluZzogc3RyaW5nLCBMaW5lOiBzdHJpbmcpDQoJcmV0dXJuIGB7SW5kZW50U3RyaW5nfXtMaW5lfWANCmVuZA0KDQp0eXBlIENhbGxJbmZvID0gew0KCUFyZ3VtZW50czogdGFibGUsDQoJSW5kZW50OiBudW1iZXIsDQoJUmVtb3RlVmFyaWFibGU6IHN0cmluZywNCglNb2R1bGU6IHRhYmxlDQp9DQpmdW5jdGlvbiBHZW5lcmF0aW9uOkNhbGxSZW1vdGVTY3JpcHQoRGF0YSwgSW5mbzogQ2FsbEluZm8pOiBzdHJpbmcNCglsb2NhbCBJc1JlY2VpdmUgPSBEYXRhLklzUmVjZWl2ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KDQoJbG9jYWwgUmVtb3RlVmFyaWFibGUgPSBJbmZvLlJlbW90ZVZhcmlhYmxlDQoJbG9jYWwgSW5kZW50ID0gSW5mby5JbmRlbnQgb3IgMA0KCWxvY2FsIE1vZHVsZSA9IEluZm8uTW9kdWxlDQoNCglsb2NhbCBWYXJpYWJsZXMgPSBNb2R1bGUuVmFyaWFibGVzDQoJbG9jYWwgUGFyc2VyID0gTW9kdWxlLlBhcnNlcg0KCWxvY2FsIE5vVmFyaWFibGVzID0gRGF0YS5Ob1ZhcmlhYmxlcw0KDQoJbG9jYWwgSW5kZW50U3RyaW5nID0gc2VsZjpNYWtlSW5kZW50KEluZGVudCkNCg0KCS0tLy8gUGFyc2UgYXJndW1lbnRzDQoJbG9jYWwgUGFyc2VkQXJncywgSXRlbXNDb3VudCwgSXNBcnJheSA9IFBhcnNlcjpQYXJzZVRhYmxlSW50b1N0cmluZyh7DQoJCU5vQnJhY2tldHMgPSB0cnVlLA0KCQlOb1ZhcmlhYmxlcyA9IE5vVmFyaWFibGVzLA0KCQlUYWJsZSA9IEFyZ3MsDQoJCUluZGVudCA9IEluZGVudA0KCX0pDQoNCgktLS8vIENyZWF0ZSB0YWJsZSB2YXJpYWJsZSBpZiBub3QgYW4gYXJyYXkNCglpZiBub3QgSXNBcnJheSBvciBOb1ZhcmlhYmxlcyB0aGVuDQoJCVBhcnNlZEFyZ3MgPSBWYXJpYWJsZXM6TWFrZVZhcmlhYmxlKHsNCgkJCVZhbHVlID0gKCJ7JXN9Iik6Zm9ybWF0KFBhcnNlZEFyZ3MpLA0KCQkJQ29tbWVudCA9IG5vdCBJc0FycmF5IGFuZCAiQXJndW1lbnRzIGFyZW4ndCBvcmRlcmVkIiBvciBuaWwsDQoJCQlOYW1lID0gIlJlbW90ZUFyZ3MiLA0KCQkJQ2xhc3MgPSAiUmVtb3RlIg0KCQl9KQ0KCWVuZA0KDQoJLS0vLyBXcmFwIGluIGEgdW5wYWNrIGlmIHRoZSB0YWJsZSBpcyBhIGRpY3QNCglpZiBJdGVtc0NvdW50ID4gMCBhbmQgbm90IElzQXJyYXkgdGhlbg0KCQlQYXJzZWRBcmdzID0gYHVucGFjayh7UGFyc2VkQXJnc30sIDEsIHRhYmxlLm1heG4oe1BhcnNlZEFyZ3N9KSlgDQoJZW5kDQoNCgktLS8vIEZpcmVzaWduYWwgc2NyaXB0IGZvciBjbGllbnQgcmVjaWV2ZXMNCglpZiBJc1JlY2VpdmUgdGhlbg0KCQlsb2NhbCBTZWNvbmQgPSBJdGVtc0NvdW50IDw9IDAgYW5kICIiIG9yIGAsIHtQYXJzZWRBcmdzfWANCgkJbG9jYWwgU2lnbmFsID0gYHtSZW1vdGVWYXJpYWJsZX0ue01ldGhvZH1gDQoNCgkJbG9jYWwgQ29kZSA9IGAtLSBUaGlzIGRhdGEgd2FzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlcmANCgkJUGFyc2VkQXJncyA9IHNlbGY6SW5kZW50KEluZGVudFN0cmluZywgQ29kZSkNCgkJQ29kZSAuLj0gYFxue0luZGVudFN0cmluZ31maXJlc2lnbmFsKHtTaWduYWx9e1NlY29uZH0pYA0KCQkNCgkJcmV0dXJuIENvZGUNCgllbmQNCgkNCgktLS8vIFJlbW90ZSBpbnZva2Ugc2NyaXB0DQoJcmV0dXJuIGB7UmVtb3RlVmFyaWFibGV9OntNZXRob2R9KHtQYXJzZWRBcmdzfSlgDQplbmQNCg0KLS0vLyBWYXJpYWJsZXM6ICVWYXJpYWJsZU5hbWUlDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkFwcGx5VmFyaWFibGVzKFN0cmluZzogc3RyaW5nLCBWYXJpYWJsZXM6IHRhYmxlLCAuLi4pOiBzdHJpbmcNCglmb3IgVmFyaWFibGUsIFZhbHVlIGluIFZhcmlhYmxlcyBkbw0KCQktLS8vIEludm9rZSB2YWx1ZSBmdW5jdGlvbg0KCQlpZiB0eXBlb2YoVmFsdWUpID09ICJmdW5jdGlvbiIgdGhlbg0KCQkJVmFsdWUgPSBWYWx1ZSguLi4pDQoJCWVuZA0KDQoJCVN0cmluZyA9IFN0cmluZzpnc3ViKGAlJXtWYXJpYWJsZX0lJWAsIGZ1bmN0aW9uKCkNCgkJCXJldHVybiBWYWx1ZQ0KCQllbmQpDQoJZW5kDQoJcmV0dXJuIFN0cmluZw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZUluZGVudChJbmRlbnQ6IG51bWJlcikNCglyZXR1cm4gc3RyaW5nLnJlcCgiCSIsIEluZGVudCkNCmVuZA0KDQp0eXBlIFNjcmlwdERhdGEgPSB7DQoJVmFyaWFibGVzOiB0YWJsZSwNCglNZXRhTWV0aG9kOiBzdHJpbmcNCn0NCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZUNhbGxDb2RlKFNjcmlwdFR5cGU6IHN0cmluZywgRGF0YTogU2NyaXB0RGF0YSk6IHN0cmluZw0KCWxvY2FsIFNjcmlwdFRlbXBsYXRlcyA9IHNlbGYuU2NyaXB0VGVtcGxhdGVzDQoJbG9jYWwgVGVtcGxhdGUgPSBTY3JpcHRUZW1wbGF0ZXNbU2NyaXB0VHlwZV0NCg0KCWFzc2VydChUZW1wbGF0ZSwgYHtTY3JpcHRUeXBlfSBpcyBub3QgYSB2YWxpZCBzY3JpcHQgdHlwZSFgKQ0KDQoJbG9jYWwgVmFyaWFibGVzID0gRGF0YS5WYXJpYWJsZXMNCglsb2NhbCBNZXRhTWV0aG9kID0gRGF0YS5NZXRhTWV0aG9kDQoJbG9jYWwgTWV0YU1ldGhvZHMgPSB7Il9faW5kZXgiLCAiX19uYW1lY2FsbCIsICJDb25uZWN0In0NCg0KCWxvY2FsIGZ1bmN0aW9uIENvbXBpbGUoVGVtcGxhdGU6IHRhYmxlKTogc3RyaW5nDQoJCWxvY2FsIE91dCA9ICIiDQoNCgkJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGVtcGxhdGUgZG8NCgkJCS0tLy8gTWV0YU1ldGhvZCBjaGVjaw0KCQkJbG9jYWwgSXNNZXRhVHlwZU9ubHkgPSB0YWJsZS5maW5kKE1ldGFNZXRob2RzLCBLZXkpDQoJCQlpZiBJc01ldGFUeXBlT25seSB0aGVuDQoJCQkJaWYgS2V5ID09IE1ldGFNZXRob2QgdGhlbg0KCQkJCQlsb2NhbCBMaW5lID0gQ29tcGlsZShWYWx1ZSkNCgkJCQkJT3V0IC4uPSBMaW5lDQoJCQkJZW5kDQoJCQkJY29udGludWUNCgkJCWVuZA0KDQoJCQktLS8vIEluZm9ybWF0aW9uDQoJCQlsb2NhbCBDb250ZW50LCBJbmRlbnQgPSBWYWx1ZVsxXSwgVmFsdWVbMl0gb3IgMA0KCQkJSW5kZW50ID0gbWF0aC5jbGFtcChJbmRlbnQtMSwgMCwgOTk5OSkNCg0KCQkJLS0vLyBNYWtlIGxpbmUNCgkJCWxvY2FsIExpbmUgPSBzZWxmOkFwcGx5VmFyaWFibGVzKENvbnRlbnQsIFZhcmlhYmxlcywgSW5kZW50KQ0KCQkJbG9jYWwgSW5kZW50U3RyaW5nID0gc2VsZjpNYWtlSW5kZW50KEluZGVudCkNCg0KCQkJLS0vLyBBcHBlbmQgdG8gY29kZQ0KCQkJT3V0IC4uPSBge0luZGVudFN0cmluZ317TGluZX1cbmANCgkJZW5kDQoNCgkJcmV0dXJuIE91dA0KCWVuZA0KCQ0KCXJldHVybiBDb21waWxlKFRlbXBsYXRlKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246UmVtb3RlU2NyaXB0KE1vZHVsZSwgRGF0YTogUmVtb3RlRGF0YSwgU2NyaXB0VHlwZTogc3RyaW5nKTogc3RyaW5nDQoJLS0vLyBVbnBhY2sgZGF0YQ0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZA0KDQoJLS0vLyBSZW1vdGUgaW5mbw0KCWxvY2FsIENsYXNzTmFtZSA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiQ2xhc3NOYW1lIikNCglsb2NhbCBJc05pbFBhcmVudCA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiUGFyZW50IikgPT0gbmlsDQoJDQoJbG9jYWwgVmFyaWFibGVzID0gTW9kdWxlLlZhcmlhYmxlcw0KCWxvY2FsIEZvcm1hdHRlciA9IE1vZHVsZS5Gb3JtYXR0ZXINCgkNCgktLS8vIFByZS1yZW5kZXIgdmFyaWFibGVzDQoJVmFyaWFibGVzOlByZXJlbmRlclZhcmlhYmxlcyhBcmdzLCB7Ikluc3RhbmNlIn0pDQoNCgktLS8vIENyZWF0ZSByZW1vdGUgdmFyaWFibGUNCglsb2NhbCBSZW1vdGVWYXJpYWJsZSA9IFZhcmlhYmxlczpNYWtlVmFyaWFibGUoew0KCQlWYWx1ZSA9IEZvcm1hdHRlcjpGb3JtYXQoUmVtb3RlLCB7DQoJCQlOb1ZhcmlhYmxlcyA9IHRydWUNCgkJfSksDQoJCUNvbW1lbnQgPSBge0NsYXNzTmFtZX0ge0lzTmlsUGFyZW50IGFuZCAifCBSZW1vdGUgcGFyZW50IGlzIG5pbCIgb3IgIiJ9YCwNCgkJTmFtZSA9IEZvcm1hdHRlcjpNYWtlTmFtZShSZW1vdGUpLA0KCQlMb29rdXAgPSBSZW1vdGUsDQoJCUNsYXNzID0gIlJlbW90ZSINCgl9KQ0KDQoJLS0vLyBHZW5lcmF0ZSBjYWxsIHNjcmlwdA0KCWxvY2FsIENhbGxDb2RlID0gc2VsZjpNYWtlQ2FsbENvZGUoU2NyaXB0VHlwZSwgew0KCQlWYXJpYWJsZXMgPSB7DQoJCQlbIlJlbW90ZUNhbGwiXSA9IGZ1bmN0aW9uKEluZGVudDogbnVtYmVyKQ0KCQkJCXJldHVybiBzZWxmOkNhbGxSZW1vdGVTY3JpcHQoRGF0YSwgew0KCQkJCQlSZW1vdGVWYXJpYWJsZSA9IFJlbW90ZVZhcmlhYmxlLA0KCQkJCQlJbmRlbnQgPSBJbmRlbnQsDQoJCQkJCU1vZHVsZSA9IE1vZHVsZQ0KCQkJCX0pDQoJCQllbmQsDQoJCQlbIlJlbW90ZSJdID0gUmVtb3RlVmFyaWFibGUsDQoJCQlbIk1ldGhvZCJdID0gTWV0aG9kLA0KCQkJWyJTaWduYWwiXSA9IGB7UmVtb3RlVmFyaWFibGV9LntNZXRob2R9YA0KCQl9LA0KCQlNZXRhTWV0aG9kID0gTWV0YU1ldGhvZA0KCX0pDQoJDQoJLS0vLyBNYWtlIGNvZGUNCglsb2NhbCBDb2RlID0gc2VsZjpHZXRCYXNlKE1vZHVsZSkNCglyZXR1cm4gYHtDb2RlfVxue0NhbGxDb2RlfWANCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkNvbm5lY3Rpb25zVGFibGUoU2lnbmFsOiBSQlhTY3JpcHRTaWduYWwpOiB0YWJsZQ0KCWxvY2FsIENvbm5lY3Rpb25zID0gZ2V0Y29ubmVjdGlvbnMoU2lnbmFsKQ0KCWxvY2FsIERhdGFBcnJheSA9IHt9DQoNCglmb3IgXywgQ29ubmVjdGlvbiBpbiBuZXh0LCBDb25uZWN0aW9ucyBkbw0KCQlsb2NhbCBGdW5jdGlvbiA9IENvbm5lY3Rpb24uRnVuY3Rpb24NCgkJbG9jYWwgU2NyaXB0ID0gcmF3Z2V0KGdldGZlbnYoRnVuY3Rpb24pLCAic2NyaXB0IikNCg0KCQktLS8vIFNraXAgaWYgc2VsZg0KCQlpZiBTY3JpcHQgPT0gVGhpc1NjcmlwdCB0aGVuIGNvbnRpbnVlIGVuZA0KDQoJCS0tLy8gQ29ubmVjdGlvbiBkYXRhDQoJCWxvY2FsIERhdGEgPSB7DQoJCQlGdW5jdGlvbiA9IEZ1bmN0aW9uLA0KCQkJU3RhdGUgPSBDb25uZWN0aW9uLlN0YXRlLA0KCQkJU2NyaXB0ID0gU2NyaXB0DQoJCX0NCg0KCQl0YWJsZS5pbnNlcnQoRGF0YUFycmF5LCBEYXRhKQ0KCWVuZA0KDQoJcmV0dXJuIERhdGFBcnJheQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246VGFibGVTY3JpcHQoTW9kdWxlLCBUYWJsZTogdGFibGUpOiBzdHJpbmcNCgktLS8vIFByZS1yZW5kZXIgdmFyaWFibGVzDQoJTW9kdWxlLlZhcmlhYmxlczpQcmVyZW5kZXJWYXJpYWJsZXMoVGFibGUsIHsiSW5zdGFuY2UifSkNCg0KCS0tLy8gUGFyc2UgYXJndW1lbnRzDQoJbG9jYWwgUGFyc2VkVGFibGUgPSBNb2R1bGUuUGFyc2VyOlBhcnNlVGFibGVJbnRvU3RyaW5nKHsNCgkJVGFibGUgPSBUYWJsZQ0KCX0pDQoNCgktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCWxvY2FsIENvZGUsIE5vVmFyaWFibGVzID0gc2VsZjpHZXRCYXNlKE1vZHVsZSkNCglsb2NhbCBTZXBlcmF0b3IgPSBOb1ZhcmlhYmxlcyBhbmQgIiIgb3IgIlxuIg0KCUNvZGUgLi49IGB7U2VwZXJhdG9yfXJldHVybiB7UGFyc2VkVGFibGV9YA0KDQoJcmV0dXJuIENvZGUNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VUeXBlc1RhYmxlKFRhYmxlOiB0YWJsZSk6IHRhYmxlDQoJbG9jYWwgVHlwZXMgPSB7fQ0KDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCgkJbG9jYWwgVHlwZSA9IHR5cGVvZihWYWx1ZSkNCgkJaWYgVHlwZSA9PSAidGFibGUiIHRoZW4NCgkJCVR5cGUgPSBzZWxmOk1ha2VUeXBlc1RhYmxlKFZhbHVlKQ0KCQllbmQNCg0KCQlUeXBlc1tLZXldID0gVHlwZQ0KCWVuZA0KDQoJcmV0dXJuIFR5cGVzDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpDb25uZWN0aW9uSW5mbyhSZW1vdGU6IEluc3RhbmNlLCBDbGFzc0RhdGE6IHRhYmxlKTogdGFibGU/DQoJbG9jYWwgUmVjZWl2ZU1ldGhvZHMgPSBDbGFzc0RhdGEuUmVjZWl2ZQ0KCWlmIG5vdCBSZWNlaXZlTWV0aG9kcyB0aGVuIHJldHVybiBlbmQNCg0KCWxvY2FsIENvbm5lY3Rpb25zID0ge30NCglmb3IgXywgTWV0aG9kOiBzdHJpbmcgaW4gbmV4dCwgUmVjZWl2ZU1ldGhvZHMgZG8NCgkJcGNhbGwoZnVuY3Rpb24oKSAtLSBUT0RPOiBHRVRDQUxMQkFDS1ZBTFVFDQoJCQlsb2NhbCBTaWduYWwgPSBIb29rOkluZGV4KFJlbW90ZSwgTWV0aG9kKQ0KCQkJQ29ubmVjdGlvbnNbTWV0aG9kXSA9IHNlbGY6Q29ubmVjdGlvbnNUYWJsZShTaWduYWwpDQoJCWVuZCkNCgllbmQNCg0KCXJldHVybiBDb25uZWN0aW9ucw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246QWR2YW5jZWRJbmZvKE1vZHVsZSwgRGF0YTogdGFibGUpOiBzdHJpbmcNCgktLS8vIFVucGFjayByZW1vdGUgZGF0YQ0KCWxvY2FsIEZ1bmN0aW9uID0gRGF0YS5DYWxsaW5nRnVuY3Rpb24NCglsb2NhbCBDbGFzc0RhdGEgPSBEYXRhLkNsYXNzRGF0YQ0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgQXJncyA9IERhdGEuQXJncw0KCQ0KCS0tLy8gQWR2YW5jZWQgaW5mbyB0YWJsZSBiYXNlDQoJbG9jYWwgRnVuY3Rpb25JbmZvID0gew0KCQlbIkNhbGxlciJdID0gew0KCQkJWyJTb3VyY2VTY3JpcHQiXSA9IERhdGEuU291cmNlU2NyaXB0LA0KCQkJWyJDYWxsaW5nU2NyaXB0Il0gPSBEYXRhLkNhbGxpbmdTY3JpcHQsDQoJCQlbIkNhbGxpbmdGdW5jdGlvbiJdID0gRnVuY3Rpb24NCgkJfSwNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCVsiUmVtb3RlIl0gPSBSZW1vdGUsDQoJCQlbIlJlbW90ZUlEIl0gPSBEYXRhLklkLA0KCQkJWyJNZXRob2QiXSA9IERhdGEuTWV0aG9kLA0KCQkJWyJDb25uZWN0aW9ucyJdID0gc2VsZjpDb25uZWN0aW9uSW5mbyhSZW1vdGUsIENsYXNzRGF0YSkNCgkJfSwNCgkJWyJBcmd1bWVudHMiXSA9IHsNCgkJCVsiTGVuZ3RoIl0gPSAjQXJncywNCgkJCVsiVHlwZXMiXSA9IHNlbGY6TWFrZVR5cGVzVGFibGUoQXJncyksDQoJCX0sDQoJCVsiTWV0YU1ldGhvZCJdID0gRGF0YS5NZXRhTWV0aG9kLA0KCQlbIklzQWN0b3IiXSA9IERhdGEuSXNBY3RvciwNCgl9DQoNCgktLS8vIFNvbWUgY2xvc3VyZXMgbWF5IG5vdCBiZSBsdWENCglpZiBGdW5jdGlvbiBhbmQgaXNsY2xvc3VyZShGdW5jdGlvbikgdGhlbg0KCQlGdW5jdGlvbkluZm9bIlVwVmFsdWVzIl0gPSBkZWJ1Zy5nZXR1cHZhbHVlcyhGdW5jdGlvbikNCgkJRnVuY3Rpb25JbmZvWyJDb25zdGFudHMiXSA9IGRlYnVnLmdldGNvbnN0YW50cyhGdW5jdGlvbikNCgllbmQNCg0KCS0tLy8gR2VuZXJhdGUgc2NyaXB0DQoJcmV0dXJuIHNlbGY6VGFibGVTY3JpcHQoTW9kdWxlLCBGdW5jdGlvbkluZm8pDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpEdW1wTG9ncyhMb2dzOiB0YWJsZSk6IHN0cmluZw0KCWxvY2FsIEJhc2VEYXRhDQoJbG9jYWwgUGFyc2VkID0gew0KCQlSZW1vdGUgPSBuaWwsDQoJCUNhbGxzID0ge30NCgl9DQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyIGluc3RhbmNlDQoJbG9jYWwgTW9kdWxlID0gR2VuZXJhdGlvbjpOZXdQYXJzZXIoKQ0KDQoJZm9yIF8sIERhdGEgaW4gTG9ncyBkbw0KCQlsb2NhbCBDYWxscyA9IFBhcnNlZC5DYWxscw0KCQlsb2NhbCBUYWJsZSA9IHsNCgkJCUFyZ3MgPSBEYXRhLkFyZ3MsDQoJCQlUaW1lc3RhbXAgPSBEYXRhLlRpbWVzdGFtcCwNCgkJCVJldHVyblZhbHVlcyA9IERhdGEuUmV0dXJuVmFsdWVzLA0KCQkJTWV0aG9kID0gRGF0YS5NZXRob2QsDQoJCQlNZXRhTWV0aG9kID0gRGF0YS5NZXRhTWV0aG9kLA0KCQkJQ2FsbGluZ1NjcmlwdCA9IERhdGEuQ2FsbGluZ1NjcmlwdCwNCgkJfQ0KDQoJCS0tLy8gQXBwZW5kDQoJCXRhYmxlLmluc2VydChDYWxscywgVGFibGUpDQoNCgkJLS0vLyBTZXQgQmFzZURhdGENCgkJaWYgbm90IEJhc2VEYXRhIHRoZW4NCgkJCUJhc2VEYXRhID0gRGF0YQ0KCQllbmQNCgllbmQNCg0KCS0tLy8gQmFzZWRhdGEgbWVyZ2UNCglQYXJzZWQuUmVtb3RlID0gQmFzZURhdGEuUmVtb3RlDQoNCgktLS8vIENvbXBpbGUgYW5kIHNhdmUNCglsb2NhbCBPdXRwdXQgPSBzZWxmOlRhYmxlU2NyaXB0KE1vZHVsZSwgUGFyc2VkKQ0KCWxvY2FsIEZpbGVQYXRoID0gc2VsZjpXcml0ZUR1bXAoT3V0cHV0KQ0KCQ0KCXJldHVybiBGaWxlUGF0aA0KZW5kDQoNCnJldHVybiBHZW5lcmF0aW9uDQo=]]
},Communication={'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBNb2R1bGUgPSB7DQogICAgQ29tbUNhbGxiYWNrcyA9IHt9DQp9DQoNCmxvY2FsIENvbW1XcmFwcGVyID0ge30NCkNvbW1XcmFwcGVyLl9faW5kZXggPSBDb21tV3JhcHBlcg0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBDb3JlR3VpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBQcm9jZXNzDQoNCmZ1bmN0aW9uIE1vZHVsZTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KICAgIGxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIFByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCiAgICBDb3JlR3VpID0gU2VydmljZXMuQ29yZUd1aQ0KZW5kDQoNCmZ1bmN0aW9uIENvbW1XcmFwcGVyOkZpcmUoLi4uKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KICAgIHRhYmxlLmluc2VydChRdWV1ZSwgey4uLn0pDQplbmQNCg0KZnVuY3Rpb24gQ29tbVdyYXBwZXI6UHJvY2Vzc0FyZ3VtZW50cyhBcmd1bWVudHMpIA0KICAgIGxvY2FsIENoYW5uZWwgPSBzZWxmLkNoYW5uZWwNCiAgICBDaGFubmVsOkZpcmUoUHJvY2VzczpVbnBhY2soQXJndW1lbnRzKSkNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpQcm9jZXNzUXVldWUoKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KDQogICAgZm9yIEluZGV4ID0gMSwgI1F1ZXVlIGRvDQogICAgICAgIGxvY2FsIEFyZ3VtZW50cyA9IHRhYmxlLnJlbW92ZShRdWV1ZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc2VsZjpQcm9jZXNzQXJndW1lbnRzKEFyZ3VtZW50cykgDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpCZWdpblF1ZXVlU2VydmljZSgpDQogICAgY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB3YWl0KCkgZG8NCiAgICAgICAgICAgIHNlbGY6UHJvY2Vzc1F1ZXVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk5ld0NvbW1XcmFwKENoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQogICAgbG9jYWwgQmFzZSA9IHsNCiAgICAgICAgUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCiAgICAgICAgQ2hhbm5lbCA9IENoYW5uZWwsDQogICAgICAgIEV2ZW50ID0gQ2hhbm5lbC5FdmVudA0KICAgIH0NCg0KICAgIC0tLy8gQ3JlYXRlIG5ldyB3cmFwcGVyIGNsYXNzDQogICAgbG9jYWwgV3JhcHBlZCA9IHNldG1ldGF0YWJsZShCYXNlLCBDb21tV3JhcHBlcikNCiAgICBXcmFwcGVkOkJlZ2luUXVldWVTZXJ2aWNlKCkNCg0KICAgIHJldHVybiBXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpOiBCaW5kYWJsZUZ1bmN0aW9uDQogICAgLS0vLyBVc2luZyBCaW5kYWJsZUZ1bmN0aW9uIGFzIGl0IGRvZXMgbm90IHJlcXVpcmUgYSB0aHJlYWQgcGVybWlzc2lvbiBjaGFuZ2UNCiAgICBsb2NhbCBSZW1vdGUgPSBJbnN0YW5jZS5uZXcoIkJpbmRhYmxlRnVuY3Rpb24iKQ0KICAgIGZ1bmN0aW9uIFJlbW90ZS5Pbkludm9rZShPYmplY3Q6IEluc3RhbmNlKTogc3RyaW5nDQogICAgICAgIHJldHVybiBPYmplY3Q6R2V0RGVidWdJZCgpDQogICAgZW5kDQoNCiAgICBzZWxmLkRlYnVnSWRSZW1vdGUgPSBSZW1vdGUNCiAgICBzZWxmLkRlYnVnSWRJbnZva2UgPSBSZW1vdGUuSW52b2tlDQoNCiAgICByZXR1cm4gUmVtb3RlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldERlYnVnSWQoT2JqZWN0OiBJbnN0YW5jZSk6IHN0cmluZw0KICAgIGxvY2FsIEludm9rZSA9IHNlbGYuRGVidWdJZEludm9rZQ0KICAgIGxvY2FsIFJlbW90ZSA9IHNlbGYuRGVidWdJZFJlbW90ZQ0KCXJldHVybiBJbnZva2UoUmVtb3RlLCBPYmplY3QpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEhpZGRlblBhcmVudCgpOiBJbnN0YW5jZQ0KICAgIC0tLy8gVXNlIGdldGh1aSBpZiBpdCBleGlzdHMNCiAgICBpZiBnZXRodWkgdGhlbiByZXR1cm4gZ2V0aHVpKCkgZW5kDQogICAgcmV0dXJuIENvcmVHdWkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ29tbUNoYW5uZWwoKTogKG51bWJlciwgQmluZGFibGVFdmVudCkNCiAgICAtLS8vIFVzZSBuYXRpdmUgaWYgaXQgZXhpc3RzDQogICAgbG9jYWwgRm9yY2UgPSBDb25maWcuRm9yY2VVc2VDdXN0b21Db21tDQogICAgaWYgY3JlYXRlX2NvbW1fY2hhbm5lbCBhbmQgbm90IEZvcmNlIHRoZW4NCiAgICAgICAgcmV0dXJuIGNyZWF0ZV9jb21tX2NoYW5uZWwoKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWxJZCA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDAwKQ0KDQogICAgLS0vLyBCaW5kYWJsZUV2ZW50DQogICAgbG9jYWwgQ2hhbm5lbCA9IEluc3RhbmNlLm5ldygiQmluZGFibGVFdmVudCIsIFBhcmVudCkNCiAgICBDaGFubmVsLk5hbWUgPSBDaGFubmVsSWQNCg0KICAgIHJldHVybiBDaGFubmVsSWQsIENoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkOiBudW1iZXIpOiBCaW5kYWJsZUV2ZW50Pw0KICAgIC0tLy8gVXNlIG5hdGl2ZSBpZiBpdCBleGlzdHMNCiAgICBsb2NhbCBGb3JjZSA9IENvbmZpZy5Gb3JjZVVzZUN1c3RvbUNvbW0NCiAgICBpZiBnZXRfY29tbV9jaGFubmVsIGFuZCBub3QgRm9yY2UgdGhlbg0KICAgICAgICBsb2NhbCBDaGFubmVsID0gZ2V0X2NvbW1fY2hhbm5lbChDaGFubmVsSWQpDQogICAgICAgIHJldHVybiBDaGFubmVsLCBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWwgPSBQYXJlbnQ6RmluZEZpcnN0Q2hpbGQoQ2hhbm5lbElkKQ0KDQogICAgLS0vLyBXcmFwIHRoZSBjaGFubmVsIChQcmV2ZW50cyB0aHJlYWQgcGVybWlzc2lvbiBlcnJvcnMpDQogICAgbG9jYWwgV3JhcHBlZCA9IHNlbGY6TmV3Q29tbVdyYXAoQ2hhbm5lbCkNCiAgICByZXR1cm4gV3JhcHBlZCwgdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGVja1ZhbHVlKFZhbHVlLCBJbmJvdW5kOiBib29sZWFuPykNCiAgICAgLS0vLyBObyBzZXJpYWxpemluZyAgbmVlZGVkDQogICAgaWYgdHlwZW9mKFZhbHVlKSB+PSAidGFibGUiIHRoZW4gDQogICAgICAgIHJldHVybiBWYWx1ZSANCiAgICBlbmQNCiAgIA0KICAgIC0tLy8gRGVzZXJpYWxpemUNCiAgICBpZiBJbmJvdW5kIHRoZW4NCiAgICAgICAgcmV0dXJuIHNlbGY6RGVzZXJpYWxpemVUYWJsZShWYWx1ZSkNCiAgICBlbmQNCg0KICAgIC0tLy8gU2VyaWFsaXplDQogICAgcmV0dXJuIHNlbGY6U2VyaWFsaXplVGFibGUoVmFsdWUpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VQYWNrZXQoSW5kZXgsIFZhbHVlKTogdGFibGUNCiAgICByZXR1cm4gew0KICAgICAgICBJbmRleCA9IHNlbGY6Q2hlY2tWYWx1ZShJbmRleCksIA0KICAgICAgICBWYWx1ZSA9IHNlbGY6Q2hlY2tWYWx1ZShWYWx1ZSkNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlJlYWRQYWNrZXQoUGFja2V0OiB0YWJsZSk6IChhbnksIGFueSkNCiAgICBsb2NhbCBLZXkgPSBzZWxmOkNoZWNrVmFsdWUoUGFja2V0LkluZGV4LCB0cnVlKQ0KICAgIGxvY2FsIFZhbHVlID0gc2VsZjpDaGVja1ZhbHVlKFBhY2tldC5WYWx1ZSwgdHJ1ZSkNCiAgICByZXR1cm4gS2V5LCBWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXJpYWxpemVUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KICAgIGxvY2FsIFNlcmlhbGl6ZWQgPSB7fQ0KICAgIGZvciBJbmRleCwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgbG9jYWwgUGFja2V0ID0gc2VsZjpNYWtlUGFja2V0KEluZGV4LCBWYWx1ZSkNCiAgICAgICAgdGFibGUuaW5zZXJ0KFNlcmlhbGl6ZWQsIFBhY2tldCkNCiAgICBlbmQNCiAgICByZXR1cm4gU2VyaWFsaXplZA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpEZXNlcmlhbGl6ZVRhYmxlKFNlcmlhbGl6ZWQ6IHRhYmxlKTogdGFibGUNCiAgICBsb2NhbCBUYWJsZSA9IHt9DQogICAgZm9yIF8sIFBhY2tldCBpbiBuZXh0LCBTZXJpYWxpemVkIGRvDQogICAgICAgIGxvY2FsIEluZGV4LCBWYWx1ZSA9IHNlbGY6UmVhZFBhY2tldChQYWNrZXQpDQogICAgICAgIGlmIG5vdCBJbmRleCB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIFRhYmxlW0luZGV4XSA9IFZhbHVlDQogICAgZW5kDQogICAgcmV0dXJuIFRhYmxlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogbnVtYmVyKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbnNvbGVQcmludCguLi4pDQogICAgc2VsZjpDb21tdW5pY2F0ZSgiUHJpbnQiLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlF1ZXVlTG9nKERhdGEpDQogICAgc2VsZjpDb21tdW5pY2F0ZSgiUXVldWVMb2ciLCBEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb21tQ2FsbGJhY2soVHlwZTogc3RyaW5nLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICBDb21tQ2FsbGJhY2tzW1R5cGVdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNhbGxiYWNrKFR5cGU6IHN0cmluZyk6ICguLi5hbnkpIC0+IC4uLmFueQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICByZXR1cm4gQ29tbUNhbGxiYWNrc1tUeXBlXQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgUHJvcGVydHk6IHN0cmluZykNCiAgICBpZiB0eXBlb2YoQ2hhbm5lbCkgPT0gIkluc3RhbmNlIiB0aGVuDQogICAgICAgIHJldHVybiBIb29rOkluZGV4KENoYW5uZWwsIFByb3BlcnR5KQ0KICAgIGVuZA0KDQogICAgLS0vLyBTb21lIGV4ZWN1dG9ycyByZXR1cm4gYSBVc2VyRGF0YSB0eXBlDQogICAgcmV0dXJuIENoYW5uZWxbUHJvcGVydHldDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbW11bmljYXRlKC4uLikNCiAgICBsb2NhbCBGaXJlID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkZpcmUiKQ0KICAgIEZpcmUoQ2hhbm5lbCwgLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb25uZWN0aW9uKENhbGxiYWNrKTogUkJYU2NyaXB0Q29ubmVjdGlvbg0KICAgIGxvY2FsIEV2ZW50ID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkV2ZW50IikNCiAgICByZXR1cm4gRXZlbnQ6Q29ubmVjdChDYWxsYmFjaykNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrKFR5cGU6IHN0cmluZywgQ2FsbGJhY2spOiBSQlhTY3JpcHRDb25uZWN0aW9uDQogICAgbG9jYWwgRXZlbnQgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRXZlbnQiKQ0KICAgIHJldHVybiBFdmVudDpDb25uZWN0KGZ1bmN0aW9uKFJlY2l2ZWRUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgaWYgUmVjaXZlZFR5cGUgfj0gVHlwZSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgQ2FsbGJhY2soLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrcyhUeXBlczogdGFibGUpDQogICAgZm9yIFR5cGU6IHN0cmluZywgQ2FsbGJhY2sgaW4gbmV4dCwgVHlwZXMgZG8NCiAgICAgICAgc2VsZjpBZGRUeXBlQ2FsbGJhY2soVHlwZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQ6IEJpbmRhYmxlRXZlbnQpDQogICAgc2VsZjpBZGRDb21tQ2FsbGJhY2soIldhcm4iLCBmdW5jdGlvbiguLi4pDQogICAgICAgIHdhcm4oLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ2hhbm5lbCgpOiBudW1iZXINCiAgICBsb2NhbCBDaGFubmVsSUQsIEV2ZW50ID0gc2VsZjpDcmVhdGVDb21tQ2hhbm5lbCgpDQoNCiAgICAtLS8vIENvbm5lY3QgR2V0Q29tbUNhbGxiYWNrIGZ1bmN0aW9uDQogICAgRXZlbnQuRXZlbnQ6Q29ubmVjdChmdW5jdGlvbihUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgbG9jYWwgQ2FsbGJhY2sgPSBzZWxmOkdldENvbW1DYWxsYmFjayhUeXBlKQ0KICAgICAgICBpZiBDYWxsYmFjayB0aGVuDQogICAgICAgICAgICBDYWxsYmFjayguLi4pDQogICAgICAgIGVuZA0KICAgIGVuZCkNCg0KICAgIC0tLy8gQWRkIGRlZmF1bHQgY29tbXVuaWNhdGlvbiBjYWxsYmFja3MNCiAgICBzZWxmOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQpDQoNCiAgICByZXR1cm4gQ2hhbm5lbElELCBFdmVudA0KZW5kDQoNCk1vZHVsZTpNYWtlRGVidWdJZEhhbmRsZXIoKQ0KDQpyZXR1cm4gTW9kdWxl]]
}},d.Players local i=e:LoadLibraries(g)local j,k,l,m,n,o,p=i.Process,i.Hook,i.Ui
,i.Generation,i.Communication,i.Config,e:GetAsset('ProggyClean.ttf',true)local q
=e:CreateFont('ProggyClean',p)l:SetFontFile(q)j:CheckConfig(o)e:LoadModules(i,{
Modules=i,Services=d})local r,s=l:CreateMainWindow(),j:CheckIsSupported()if not
s then r:Close()return end local t,u=n:CreateChannel()n:AddCommCallback(
'QueueLog',function(...)l:QueueLog(...)end)n:AddCommCallback('Print',function(
...)l:ConsoleLog(...)end)local v=h.LocalPlayer m:SetSwapsCallback(function(w)w:
AddSwap(v,{String='LocalPlayer'})w:AddSwap(v.Character,{String='Character',
NextParent=v})end)l:CreateWindowContent(r)l:SetCommChannel(u)l:BeginLogService()
local w=e:MakeActorScript(g,t)k:LoadHooks(w,t)